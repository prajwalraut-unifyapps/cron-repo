{
	"appsUsed":[
		"storage_by_unifyapps"
	],
	"createdTime":1757312079947,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1760551302307,
		"deployedBy":1,
		"deployedDefinitionId":"68efe185e09fb733aee43625",
		"status":"DEPLOYED",
		"version":60,
		"workflowVersion":106
	},
	"edges":[
		{
			"fromNodeId":"DugAy",
			"priority":0,
			"skip":false,
			"toNodeId":"n_65StQ",
			"type":"next"
		},
		{
			"fromNodeId":"n_65StQ",
			"priority":0,
			"skip":false,
			"toNodeId":"n_jSNFJ",
			"type":"next"
		},
		{
			"fromNodeId":"n_jSNFJ",
			"priority":0,
			"skip":false,
			"toNodeId":"EI4Z9",
			"type":"next"
		},
		{
			"fromNodeId":"EI4Z9",
			"priority":0,
			"skip":false,
			"toNodeId":"IUfDf",
			"type":"next"
		},
		{
			"fromNodeId":"IUfDf",
			"priority":0,
			"skip":false,
			"toNodeId":"SYqV3",
			"type":"next"
		},
		{
			"fromNodeId":"SYqV3",
			"priority":0,
			"skip":false,
			"toNodeId":"e0Ij8",
			"type":"next"
		},
		{
			"fromNodeId":"e0Ij8",
			"priority":0,
			"skip":false,
			"toNodeId":"pGM6y",
			"type":"next"
		},
		{
			"fromNodeId":"pGM6y",
			"priority":0,
			"skip":false,
			"toNodeId":"an5XW",
			"type":"next"
		},
		{
			"fromNodeId":"an5XW",
			"priority":0,
			"skip":false,
			"toNodeId":"wonjF",
			"type":"next"
		},
		{
			"fromNodeId":"wonjF",
			"priority":0,
			"skip":false,
			"toNodeId":"n_AQjym",
			"type":"loop"
		},
		{
			"fromNodeId":"n_AQjym",
			"priority":0,
			"skip":false,
			"toNodeId":"ES5o1",
			"type":"next"
		},
		{
			"fromNodeId":"ES5o1",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"7932k",
			"type":"if"
		},
		{
			"fromNodeId":"7932k",
			"priority":0,
			"skip":false,
			"toNodeId":"_3BEtF",
			"type":"next"
		},
		{
			"fromNodeId":"ES5o1",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_3BEtF",
			"type":"next"
		},
		{
			"fromNodeId":"_3BEtF",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_uWlQc",
			"type":"if"
		},
		{
			"fromNodeId":"n_uWlQc",
			"priority":0,
			"skip":false,
			"toNodeId":"n_rneOz",
			"type":"next"
		},
		{
			"fromNodeId":"n_rneOz",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Rselo",
			"type":"next"
		},
		{
			"fromNodeId":"n_Rselo",
			"priority":0,
			"skip":false,
			"toNodeId":"n_E6Kyi",
			"type":"next"
		},
		{
			"fromNodeId":"n_E6Kyi",
			"priority":0,
			"skip":false,
			"toNodeId":"_rpCbT",
			"type":"next"
		},
		{
			"fromNodeId":"_rpCbT",
			"priority":0,
			"skip":false,
			"toNodeId":"n_BjF51",
			"type":"next"
		},
		{
			"fromNodeId":"_3BEtF",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_BjF51",
			"type":"next"
		},
		{
			"fromNodeId":"n_BjF51",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_c9OEa",
			"type":"if"
		},
		{
			"fromNodeId":"n_c9OEa",
			"priority":0,
			"skip":false,
			"toNodeId":"n_qLF4E",
			"type":"next"
		},
		{
			"fromNodeId":"n_qLF4E",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"_Rn1em",
			"type":"if"
		},
		{
			"fromNodeId":"_Rn1em",
			"priority":0,
			"skip":false,
			"toNodeId":"n_wgh5C",
			"type":"next"
		},
		{
			"fromNodeId":"n_qLF4E",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_wgh5C",
			"type":"next"
		},
		{
			"fromNodeId":"n_wgh5C",
			"priority":0,
			"skip":false,
			"toNodeId":"bLJg2",
			"type":"next"
		},
		{
			"fromNodeId":"n_BjF51",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"bLJg2",
			"type":"next"
		},
		{
			"fromNodeId":"bLJg2",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_osdL9",
			"type":"if"
		},
		{
			"fromNodeId":"n_osdL9",
			"priority":0,
			"skip":false,
			"toNodeId":"qGSsF",
			"type":"next"
		},
		{
			"fromNodeId":"qGSsF",
			"priority":0,
			"skip":false,
			"toNodeId":"n_dc4mW",
			"type":"next"
		},
		{
			"fromNodeId":"bLJg2",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_dc4mW",
			"type":"next"
		},
		{
			"fromNodeId":"n_dc4mW",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_l9cLo",
			"type":"if"
		},
		{
			"fromNodeId":"n_l9cLo",
			"priority":0,
			"skip":false,
			"toNodeId":"_rU64E",
			"type":"next"
		},
		{
			"fromNodeId":"_rU64E",
			"priority":0,
			"skip":false,
			"toNodeId":"n_SDjVM",
			"type":"next"
		},
		{
			"fromNodeId":"n_SDjVM",
			"priority":0,
			"skip":false,
			"toNodeId":"_vWQXh",
			"type":"next"
		},
		{
			"fromNodeId":"_vWQXh",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ch1VU",
			"type":"next"
		},
		{
			"fromNodeId":"n_ch1VU",
			"priority":0,
			"skip":false,
			"toNodeId":"aHNuU",
			"type":"next"
		},
		{
			"fromNodeId":"n_dc4mW",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"aHNuU",
			"type":"next"
		},
		{
			"fromNodeId":"aHNuU",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"U267N",
			"type":"if"
		},
		{
			"fromNodeId":"aHNuU",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"iXSAA",
			"type":"next"
		},
		{
			"fromNodeId":"U267N",
			"priority":0,
			"skip":false,
			"toNodeId":"n_SO1Z6",
			"type":"next"
		},
		{
			"fromNodeId":"iXSAA",
			"priority":0,
			"skip":false,
			"toNodeId":"n_SO1Z6",
			"type":"next"
		},
		{
			"fromNodeId":"n_SO1Z6",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_2C1i2",
			"type":"if"
		},
		{
			"fromNodeId":"n_2C1i2",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Ysl3V",
			"type":"next"
		},
		{
			"fromNodeId":"n_SO1Z6",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Ysl3V",
			"type":"next"
		},
		{
			"fromNodeId":"n_Ysl3V",
			"priority":0,
			"skip":false,
			"toNodeId":"JniDU",
			"type":"next"
		},
		{
			"fromNodeId":"JniDU",
			"priority":0,
			"skip":false,
			"toNodeId":"n_O0hVb",
			"type":"next"
		},
		{
			"fromNodeId":"n_O0hVb",
			"priority":0,
			"skip":false,
			"toNodeId":"n_eMPny",
			"type":"next"
		},
		{
			"fromNodeId":"n_eMPny",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"_j4F9w",
			"type":"if"
		},
		{
			"fromNodeId":"_j4F9w",
			"priority":0,
			"skip":false,
			"toNodeId":"n_MKFAs",
			"type":"next"
		},
		{
			"fromNodeId":"n_MKFAs",
			"priority":0,
			"skip":false,
			"toNodeId":"n_4kZmP",
			"type":"next"
		},
		{
			"fromNodeId":"n_eMPny",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_4kZmP",
			"type":"next"
		},
		{
			"fromNodeId":"n_4kZmP",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_x8Doj",
			"type":"if"
		},
		{
			"fromNodeId":"n_x8Doj",
			"priority":0,
			"skip":false,
			"toNodeId":"_lNJmH",
			"type":"next"
		},
		{
			"fromNodeId":"_lNJmH",
			"priority":0,
			"skip":false,
			"toNodeId":"n_iFfz7",
			"type":"next"
		},
		{
			"fromNodeId":"n_iFfz7",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"wonjF",
			"type":"next"
		},
		{
			"fromNodeId":"n_4kZmP",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"wonjF",
			"type":"next"
		},
		{
			"fromNodeId":"wonjF",
			"priority":0,
			"skip":false,
			"toNodeId":"n_4xswy",
			"type":"next"
		},
		{
			"fromNodeId":"n_4xswy",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_zQ3Ds",
			"type":"if"
		},
		{
			"fromNodeId":"n_zQ3Ds",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ikgwx",
			"type":"next"
		},
		{
			"fromNodeId":"n_ikgwx",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_stixW",
			"type":"if"
		},
		{
			"fromNodeId":"n_stixW",
			"priority":0,
			"skip":false,
			"toNodeId":"n_r7Mwb",
			"type":"next"
		},
		{
			"fromNodeId":"n_ikgwx",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_r7Mwb",
			"type":"next"
		},
		{
			"fromNodeId":"n_4xswy",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_r7Mwb",
			"type":"next"
		},
		{
			"fromNodeId":"n_r7Mwb",
			"priority":0,
			"skip":false,
			"toNodeId":"i5fug",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"VIEW_RUNS",
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"68a7438a7cdf147e40665747",
	"lastModifiedBy":1,
	"lcName":"trigger ai agent (streaming)",
	"modifiedTime":1760599701129,
	"name":"Trigger AI Agent (Streaming)",
	"nodes":[
		{
			"additional":{
				"xsdSchemaConfig":{}
			},
			"context":{
				"appName":"callables",
				"resourceVersion":434,
				"resourceName":"callables_from_automation_streaming"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"3mlzD-1",
			"id":"DugAy",
			"index":1,
			"inputs":{
				"result":{
					"type":"object",
					"additionalProperties":false,
					"required":[
						"copilotBlocks",
						"messageId",
						"caseId"
					],
					"properties":{
						"messageType":{
							"type":"string",
							"title":"messageType"
						},
						"delta":{
							"type":"string",
							"title":"delta"
						},
						"copilotBlocks":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Copilot Blocks"
						},
						"messageId":{
							"type":"string",
							"title":"Message Id"
						},
						"caseId":{
							"type":"string",
							"title":"Case Id"
						},
						"mesageCreatedTime":{
							"type":"string",
							"title":"Mesage Created Time"
						},
						"msgAdditional":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Msg Additional"
						},
						"interfaceDetails":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Interface Details"
						}
					}
				},
				"setup":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"sessionId":{
							"type":"string",
							"title":"sessionId"
						},
						"userQuery":{
							"type":"string",
							"title":"userQuery"
						},
						"userEmailAddress":{
							"type":"string",
							"title":"userEmailAddress"
						},
						"aiAgentId":{
							"type":"string",
							"title":"aiAgentId"
						},
						"knowledgeSetIds":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Knowledge Set Ids"
						},
						"includeThoughts":{
							"type":"boolean",
							"title":"Include Thoughts"
						},
						"attachments":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"name":{
										"type":"string",
										"title":"Name"
									},
									"fileType":{
										"type":"string",
										"title":"File Type"
									},
									"mimeType":{
										"type":"string",
										"title":"Mime Type"
									},
									"url":{
										"type":"string",
										"title":"Url"
									},
									"source":{
										"type":"string",
										"title":"Source"
									},
									"sourceType":{
										"type":"string",
										"title":"Source Type"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Attachments"
						},
						"knowledgeIds":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Knowledge Ids"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger via automation (Streaming responses)",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":7,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"3mlzD-1",
			"id":"n_65StQ",
			"index":2,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"Initial list items",
							"ui:description":"Set the initial values of the list (defaults to empty)"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"type":"object"
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray"
				},
				"ua:title":"chunks",
				"ua:list_type":"OBJECT"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"chunks",
							"disableActions":true,
							"items":{
								"type":"object",
								"properties":{}
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"chunks",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":10,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"3mlzD-1",
			"id":"n_jSNFJ",
			"index":3,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"Initial list items",
							"ui:description":"Set the initial values of the list (defaults to empty)"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"additionalProperties":false,
									"type":[
										"object",
										"string",
										"number",
										"boolean",
										"integer"
									],
									"properties":{}
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray"
				},
				"ua:title":"streamedMessageIds",
				"ua:list_type":"STRING"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"streamedMessageIds",
							"disableActions":true,
							"items":{
								"type":"string"
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"streamedMessageIds",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":391,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"3mlzD-1",
			"id":"EI4Z9",
			"index":4,
			"inputs":{
				"automationId":"674afe5adefb851816d61959",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"channelName":"WORKFLOW",
					"text":"{{ DugAy.outputs.userQuery }}",
					"caseAssociationType":"PREVIOUS_FAN_MESSAGE",
					"messageType":"FAN",
					"caseId":"{{ DugAy.outputs.sessionId }}",
					"triggeredFromAutomationId":"{{ __RUN__.outputs.workflowId }}",
					"toCustomerUserId":"{{ DugAy.outputs.aiAgentId }}",
					"temporaryMessage":false,
					"channelSpecificUserId":"{{ __RUN__.outputs.executionId }}",
					"attachments":{
						"source":"{{ DugAy.outputs.attachments }}",
						"ua:type":"mappedArray",
						"items":{
							"name":"{{ DugAy.outputs.attachments[0].name }}",
							"mimeType":"{{ DugAy.outputs.attachments[0].mimeType }}",
							"fileType":"{{ DugAy.outputs.attachments[0].fileType }}",
							"url":"{{ DugAy.outputs.attachments[0].url }}",
							"source":"{{ DugAy.outputs.attachments[0].source }}",
							"sourceType":"{{ DugAy.outputs.attachments[0].sourceType }}"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":2,
				"resourceName":"storage_by_unifyapps_update_record_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"3mlzD-1",
			"id":"IUfDf",
			"index":5,
			"inputs":{
				"recordId":"{{ EI4Z9.outputs.caseId }}",
				"writeThroughSessionVariables":false,
				"object_type":"e_ai_agent_streaming_detail",
				"skipIfBlank":false,
				"record":{
					"waitingInstanceId":"{{ __RUN__.outputs.executionId }}",
					"aiAgentId":"{{ DugAy.outputs.aiAgentId }}",
					"streamingInProgress":true,
					"userId_caseId":"{{ __RUN__.outputs.userId }}_{{ EI4Z9.outputs.caseId }}",
					"instanceType":"ACCUMULATOR",
					"waitingInstanceRunTimeType":"{{ __RUN__.outputs.workflowRunTimeType }}"
				},
				"upsert":true
			},
			"skip":false,
			"subTitle":"Storage",
			"title":"Update an existing record",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":75,
				"resourceName":"variable_by_unifyapps_set_session_variable",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"3mlzD-1",
			"id":"SYqV3",
			"index":6,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"supportsStreaming":{
							"type":"boolean",
							"title":"Supports Streaming"
						},
						"ua_disable_inline_citation":{
							"type":"boolean",
							"title":"Ua Disable Inline Citation"
						},
						"api_stream":{
							"type":"boolean",
							"title":"Api Stream"
						},
						"caseId":{
							"type":"string",
							"title":"Case Id"
						}
					},
					"required":[]
				}
			},
			"inputs":{
				"api_stream":true,
				"supportsStreaming":true,
				"ua_disable_inline_citation":true,
				"caseId":"{{ EI4Z9.outputs.caseId }}"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"supportsStreaming":{
							"type":"boolean",
							"title":"Supports Streaming"
						},
						"ua_disable_inline_citation":{
							"type":"boolean",
							"title":"Ua Disable Inline Citation"
						},
						"api_stream":{
							"type":"boolean",
							"title":"Api Stream"
						},
						"caseId":{
							"type":"string",
							"title":"Case Id"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Set Session Variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":381,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"3mlzD-1",
			"id":"e0Ij8",
			"index":7,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"finalAnswer":{
							"type":"string",
							"title":"Final Answer"
						},
						"accumulatedChunkContent":{
							"type":"string",
							"title":"Accumulated Chunk Content"
						},
						"messageContent":{
							"type":"string",
							"title":"Message Content"
						}
					},
					"required":[
						"finalAnswer"
					]
				}
			},
			"inputs":{},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"finalAnswer":{
							"type":"string",
							"title":"Final Answer"
						},
						"accumulatedChunkContent":{
							"type":"string",
							"title":"Accumulated Chunk Content"
						},
						"messageContent":{
							"type":"string",
							"title":"Message Content"
						}
					},
					"required":[
						"finalAnswer"
					]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":391,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"3mlzD-1",
			"id":"pGM6y",
			"index":8,
			"inputs":{
				"automationId":"66966960e8797a59f4a46292",
				"runtimeConnections":{},
				"synchronous":false,
				"triggerWorkflowWithRuntimeType":"IN_MEMORY",
				"version":"-1",
				"parameters":{
					"aiAgentId":"{{ DugAy.outputs.aiAgentId }}",
					"userQuery":"{{ DugAy.outputs.userQuery }}",
					"userEmailAddress":"{{ DugAy.outputs.userEmailAddress }}",
					"caseId":"{{ EI4Z9.outputs.caseId }}",
					"messageId":"{{ EI4Z9.outputs.messageId }}",
					"externalKnowledgeSets":{
						"ua:type":"mappedArray",
						"source":"{{ DugAy.outputs.knowledgeSetIds }}",
						"items":"{{ DugAy.outputs.knowledgeSetIds[0] }}"
					},
					"externalKnowledges":{
						"source":"{{ DugAy.outputs.knowledgeIds }}",
						"ua:type":"mappedArray",
						"items":"{{ DugAy.outputs.knowledgeIds[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":381,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"3mlzD-1",
			"id":"an5XW",
			"index":9,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"messageType":{
							"type":"string",
							"title":"Message Type"
						},
						"currentMessageId":{
							"type":"string",
							"title":"Current Message Id"
						},
						"currentMsgCreatedTime":{
							"type":"string",
							"title":"Current Msg Created Time"
						},
						"msgAdditional":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Msg Additional"
						}
					},
					"required":[
						"messageType",
						"currentMsgCreatedTime"
					]
				}
			},
			"inputs":{},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"messageType":{
							"type":"string",
							"title":"Message Type"
						},
						"currentMessageId":{
							"type":"string",
							"title":"Current Message Id"
						},
						"currentMsgCreatedTime":{
							"type":"string",
							"title":"Current Msg Created Time"
						},
						"msgAdditional":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Msg Additional"
						}
					},
					"required":[
						"messageType",
						"currentMsgCreatedTime"
					]
				}
			},
			"skip":false,
			"subTitle":"messageVariables",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"signals_by_unifyapps",
				"resourceVersion":3,
				"resourceName":"signals_by_unifyapps_wait_for_signals_loop",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"3mlzD-1",
			"id":"wonjF",
			"index":10,
			"inputs":{
				"signal_payload":{
					"payload":{
						"type":"object",
						"properties":{
							"chunkContent":{
								"type":"string",
								"title":"chunkContent"
							},
							"coPilotBlocks":{
								"type":"array",
								"items":{
									"type":"object"
								},
								"title":"coPilotBlocks"
							},
							"eventType":{
								"type":"string",
								"title":"Event Type"
							},
							"messageType":{
								"type":"string",
								"title":"Message Type"
							},
							"completeData":{
								"type":"object",
								"properties":{},
								"additionalProperties":false,
								"title":"Complete Data"
							}
						},
						"additionalProperties":false,
						"required":[]
					}
				}
			},
			"skip":false,
			"subTitle":"Signals by UnifyApps",
			"title":"Wait for signals In Loop",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":7,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"wonjF@3mlzD-1@l",
			"id":"n_AQjym",
			"index":11,
			"inputs":{
				"itemToAdd":"{{ wonjF.outputs }}",
				"insertLocation":"END",
				"listName":"{{ n_65StQ.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":371,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"wonjF@3mlzD-1@l",
			"id":"ES5o1",
			"index":12,
			"inputs":{
				"filters":[
					{
						"property":"{{ wonjF.outputs.payload.eventType }}",
						"filter":{
							"operator":"EQUAL",
							"value":"message_end"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"continue",
				"resourceVersion":372,
				"resourceName":"continue",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"ES5o1@wonjF@3mlzD-1@l@y",
			"id":"7932k",
			"index":13,
			"inputs":{
				"loop":"wonjF"
			},
			"skip":false,
			"subTitle":"Continue",
			"title":"Continue",
			"type":"CONTINUE"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":371,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"wonjF@3mlzD-1@l",
			"id":"_3BEtF",
			"index":14,
			"inputs":{
				"filters":[
					{
						"property":"{{ wonjF.outputs.payload.eventType }}",
						"filter":{
							"operator":"EQUAL",
							"value":"message_start"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":8,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_3BEtF@wonjF@3mlzD-1@l@y",
			"id":"n_uWlQc",
			"index":15,
			"inputs":{
				"automationId":"67a31b86addac8605df79166",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"caseId":"{{ EI4Z9.outputs.caseId }}",
					"createMessageIfAbsent":true,
					"aiAgentId":"{{ DugAy.outputs.aiAgentId }}",
					"internalMessageType":"{{ wonjF.outputs.payload.messageType }}"
				}
			},
			"skip":false,
			"subTitle":"create message",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":239,
				"resourceName":"storage_by_unifyapps_update_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_3BEtF@wonjF@3mlzD-1@l@y",
			"id":"n_rneOz",
			"index":16,
			"inputs":{
				"numberOfRecordsToUpdate":"SINGLE",
				"triggerInputCondition":{
					"filters":[
						{
							"property":"properties_userId_caseId",
							"filter":{
								"operator":"EQUAL",
								"value":"{{ __RUN__.outputs.userId }}_{{ EI4Z9.outputs.caseId }}"
							}
						}
					],
					"operator":"AND"
				},
				"object_type":"e_ai_agent_streaming_detail",
				"skipIfBlank":false,
				"updateFields":[
					{
						"fieldName":"properties.currentMessageId",
						"actionType":"SET",
						"setValue":"{{ n_uWlQc.outputs.messageId }}"
					},
					{
						"fieldName":"properties.currentMessageType",
						"actionType":"SET",
						"setValue":"{{ wonjF.outputs.payload.messageType }}"
					}
				],
				"skipIfEmpty":false,
				"page":{
					"offset":0,
					"limit":20
				},
				"unsetIfNull":false
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Update records by query",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":10,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_3BEtF@wonjF@3mlzD-1@l@y",
			"id":"n_Rselo",
			"index":17,
			"inputs":{
				"variables":[
					{
						"source":"{{ an5XW.outputs.currentMessageId }}",
						"value":"{{ n_uWlQc.outputs.messageId }}"
					},
					{
						"source":"{{ an5XW.outputs.currentMsgCreatedTime }}",
						"value":"{{ n_uWlQc.outputs.messageCreatedTime }}"
					},
					{
						"source":"{{ an5XW.outputs.msgAdditional }}",
						"value":"{{ n_uWlQc.outputs.additional }}"
					}
				]
			},
			"skip":false,
			"subTitle":"messageId",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":10,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_3BEtF@wonjF@3mlzD-1@l@y",
			"id":"n_E6Kyi",
			"index":18,
			"inputs":{
				"itemToAdd":"{{ n_uWlQc.outputs.messageId }}",
				"insertLocation":"END",
				"listName":"{{ n_jSNFJ.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"continue",
				"resourceVersion":372,
				"resourceName":"continue",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_3BEtF@wonjF@3mlzD-1@l@y",
			"id":"_rpCbT",
			"index":19,
			"inputs":{
				"loop":"wonjF"
			},
			"skip":false,
			"subTitle":"Continue",
			"title":"Continue",
			"type":"CONTINUE"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":15,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"wonjF@3mlzD-1@l",
			"id":"n_BjF51",
			"index":20,
			"inputs":{
				"filters":[
					{
						"property":"{{ wonjF.outputs.payload.eventType }}",
						"filter":{
							"operator":"EQUAL",
							"value":"stop_response_generation"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":18,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_BjF51@wonjF@3mlzD-1@l@y",
			"id":"n_c9OEa",
			"index":21,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"additional":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Additional"
						},
						"textBlock":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Text Block"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"currentMessage":{
							"type":"string",
							"title":"Current Message"
						},
						"currentAdditional":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Current Additional"
						}
					}
				},
				"code":"// {\n//         \"blockType\": \"Typography\",\n//         \"data\": {\n//           \"text\": \"Your email ID is prashast.srivastava@dge.gov.ae.\",\n//           \"type\": \"MARKDOWN\"\n//         }\n//       }\n\ndef additional = (binding.hasVariable(\"currentAdditional\") && currentAdditional != null) ? new HashMap(currentAdditional) : [:]\nadditional.put(\"responseGenerationStopped\", true)\nadditional.put(\"accumulatedResponse\", true)\nadditional.put(\"streamedAlready\", true)\nreturn [\"textBlock\": [\"blockType\":\"Typography\", \"data\":[\"text\":currentMessage, \"type\":\"MARKDOWN\"]], \"additional\": additional]",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"currentMessage":"{{ an5XW.outputs.currentMessageContent }}",
					"currentAdditional":"{{ an5XW.outputs.msgAdditional }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":15,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_BjF51@wonjF@3mlzD-1@l@y",
			"id":"n_qLF4E",
			"index":22,
			"inputs":{
				"filters":[
					{
						"property":"{{ an5XW.outputs.currentMessageContent }}",
						"filter":{
							"operator":"EXISTS"
						}
					},
					{
						"property":"=ISBLANK({{ an5XW.outputs.currentMessageContent }})",
						"filter":{
							"operator":"EQUAL",
							"value":"false"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":435,
				"resourceName":"callables_return_to_automation_streaming",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_qLF4E@n_BjF51@wonjF@3mlzD-1@l@y@y",
			"id":"_Rn1em",
			"index":23,
			"inputs":{
				"result":{
					"caseId":"{{ EI4Z9.outputs.caseId }}",
					"messageType":"{{ an5XW.outputs.messageType }}",
					"messageId":"{{ an5XW.outputs.currentMessageId }}",
					"mesageCreatedTime":"{{ an5XW.outputs.currentMsgCreatedTime }}",
					"msgAdditional":"{{ n_c9OEa.outputs.result.additional }}",
					"copilotBlocks":{
						"items":"{{ n_c9OEa.outputs.result.textBlock }}",
						"ua:type":"mappedArray"
					}
				},
				"completed":false
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Add response to automation stream",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"break",
				"resourceVersion":15,
				"resourceName":"break",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_BjF51@wonjF@3mlzD-1@l@y",
			"id":"n_wgh5C",
			"index":24,
			"inputs":{
				"loop":"wonjF"
			},
			"skip":false,
			"subTitle":"Break",
			"title":"Break",
			"type":"BREAK"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":371,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"wonjF@3mlzD-1@l",
			"id":"bLJg2",
			"index":25,
			"inputs":{
				"filters":[
					{
						"property":"{{ wonjF.outputs.payload.eventType }}",
						"filter":{
							"operator":"EQUAL",
							"value":"stream_completed"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":10,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"bLJg2@wonjF@3mlzD-1@l@y",
			"id":"n_osdL9",
			"index":26,
			"inputs":{
				"automationId":"6836bec667041276bedcf39a",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"caseId":"{{ EI4Z9.outputs.caseId }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"break",
				"resourceVersion":382,
				"resourceName":"break",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"bLJg2@wonjF@3mlzD-1@l@y",
			"id":"qGSsF",
			"index":27,
			"inputs":{
				"loop":"wonjF"
			},
			"skip":false,
			"subTitle":"Break",
			"title":"Break",
			"type":"BREAK"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":8,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"wonjF@3mlzD-1@l",
			"id":"n_dc4mW",
			"index":28,
			"inputs":{
				"filters":[
					{
						"property":"{{ wonjF.outputs.payload.eventType }}",
						"filter":{
							"operator":"EQUAL",
							"value":"push_complete_message"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.streamedMessageIds.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":10,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_dc4mW@wonjF@3mlzD-1@l@y",
			"id":"n_l9cLo",
			"index":29,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"skip":{
							"type":"boolean",
							"title":"Skip"
						},
						"coPilotBlocks":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Co Pilot Blocks"
						},
						"messageType":{
							"type":"string",
							"title":"Message Type"
						},
						"messageId":{
							"type":"string",
							"title":"Message Id"
						},
						"messageCreatedTime":{
							"type":"string",
							"title":"Message Created Time"
						},
						"additional":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Additional"
						},
						"interfaceDetails":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Interface Details"
						},
						"delta":{
							"type":"string",
							"title":"Delta"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"streamedMessageIds":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Streamed Message Ids"
						},
						"completeMessage":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Complete Message"
						},
						"supportsCoPilotBlocks":{
							"type":"boolean",
							"title":"Supports Co Pilot Blocks"
						}
					}
				},
				"code":"import java.net.URLEncoder\n\ndef PLATFORM_URL = \"https://aiagentdev.qa.unifyapps.com\"\n\ndef transformCitationBlock(block, platformUrl) {\n    if (block?.blockType == \"Citation\" && block?.data?.citations instanceof List) {\n        block.data.citations.each { citation ->\n            if (citation?.referenceUrl) {\n                def refUrl = citation.referenceUrl\n                if (refUrl.startsWith(\"/api/file/download\")) {\n                    def encodedPath = URLEncoder.encode(refUrl, \"UTF-8\")\n                    citation.referenceUrl = platformUrl + \"/api-endpoint/ai-agent/sources?filePath=\" + encodedPath\n                }\n            }\n        }\n    }\n    return block\n}\n\n\n\nif (!binding.hasVariable('completeMessage')) {\n    return [\"skip\": true]\n}\ndef messageId = completeMessage?.messageId\nif (binding.hasVariable('streamedMessageIds') && streamedMessageIds.contains(messageId)) {\n    return [\"skip\": true]\n}\n\ndef coPilotBlocks = completeMessage?.message;\ndef messageType = completeMessage?.additional?.internalMessageType;\nif (messageType == null || messageType.isBlank()) {\n    messageType = \"ANSWER\"\n}\n\nif (!binding.hasVariable(\"supportsCopilotBlocks\") || !supportsCopilotBlocks) {\n    if (coPilotBlocks?.size() == 1) {\n        for (def block : coPilotBlocks) {\n            if (block?.blockType == \"Typography\" && block?.data?.text) {\n                return [\"messageType\": messageType, \"delta\": block?.data?.text, \"messageId\": messageId, \"messageCreatedTime\": completeMessage?.messageCreatedTime, \"additional\": completeMessage?.additional]\n            }\n        }\n    } else {\n        def readingBlock = [:]\n        def searchingBlock = false;\n        def searchingContent = \"\";\n        if (completeMessage?.additional?.internalMessageType == \"THOUGHT\") {\n            searchingBlock = (completeMessage?.additional?.messageSubType == \"SEARCHING\");\n            for (def block : coPilotBlocks) {\n                if (block?.blockType == \"Typography\") {\n                    searchingBlock = searchingBlock || (block?.data?.text == \"Searching\")\n                }\n                if (block?.blockType == \"Citation\") {\n                    readingBlock = transformCitationBlock(block,PLATFORM_URL);\n                }\n                if(searchingBlock && block?.blockType == \"Stack\") {\n                    searchingContent = block?.data?.\"1\"?.data?.label\n                }\n            }\n\n        }\n        if (!readingBlock.isEmpty()) {\n            return [\"messageType\": \"SOURCES\", \"coPilotBlocks\": [readingBlock], \"messageId\": messageId, \"messageCreatedTime\": completeMessage?.messageCreatedTime, \"additional\": completeMessage?.additional]\n\n        }\n        if(searchingContent != null && !searchingContent.isBlank()) {\n            return [\"messageType\": \"SEARCHING\", \"delta\": searchingContent, \"messageId\": messageId, \"messageCreatedTime\": completeMessage?.messageCreatedTime, \"additional\": completeMessage?.additional]\n        }\n        return [\"skip\": true]\n    }\n}\n\ndef transformedBlocks = coPilotBlocks.collect { block ->\n    transformCitationBlock(block, PLATFORM_URL)\n}\n\nreturn [\"coPilotBlocks\": transformedBlocks, \"messageType\": messageType, \"messageId\": messageId, \"messageCreatedTime\": completeMessage?.messageCreatedTime, \"additional\": completeMessage?.additional, \"interfaceDetails\": completeMessage?.interfaceDetails]\n\n\n\n",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"completeMessage":"{{ wonjF.outputs.payload.completeData }}",
					"supportsCoPilotBlocks":false,
					"streamedMessageIds":{
						"source":"{{ n_jSNFJ.outputs.items }}",
						"ua:type":"mappedArray",
						"items":"{{ n_jSNFJ.outputs.items[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":7,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_dc4mW@wonjF@3mlzD-1@l@y",
			"id":"_rU64E",
			"index":30,
			"inputs":{
				"itemToAdd":"{{ n_l9cLo.outputs.result }}",
				"insertLocation":"END",
				"listName":"{{ n_65StQ.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"continue",
				"resourceVersion":8,
				"resourceName":"continue",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_dc4mW@wonjF@3mlzD-1@l@y",
			"id":"n_SDjVM",
			"index":31,
			"inputs":{
				"loop":"wonjF",
				"conditions":{
					"filters":[
						{
							"property":"{{ n_l9cLo.outputs.result.skip }}",
							"filter":{
								"operator":"EQUAL",
								"value":"true"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"subTitle":"Continue",
			"title":"Continue",
			"type":"CONTINUE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":435,
				"resourceName":"callables_return_to_automation_streaming",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_dc4mW@wonjF@3mlzD-1@l@y",
			"id":"_vWQXh",
			"index":32,
			"inputs":{
				"result":{
					"messageType":"{{ n_l9cLo.outputs.result.messageType }}",
					"delta":"{{ n_l9cLo.outputs.result.delta }}",
					"messageId":"{{ n_l9cLo.outputs.result.messageId }}",
					"caseId":"{{ EI4Z9.outputs.caseId }}",
					"mesageCreatedTime":"{{ n_l9cLo.outputs.result.messageCreatedTime }}",
					"msgAdditional":"{{ n_l9cLo.outputs.result.additional }}",
					"interfaceDetails":"{{ n_l9cLo.outputs.result.interfaceDetails }}",
					"copilotBlocks":{
						"ua:type":"mappedArray",
						"source":"{{ n_l9cLo.outputs.result.coPilotBlocks }}",
						"items":"{{ n_l9cLo.outputs.result.coPilotBlocks[0] }}"
					}
				},
				"completed":false
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Add response to automation stream",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"continue",
				"resourceVersion":8,
				"resourceName":"continue",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_dc4mW@wonjF@3mlzD-1@l@y",
			"id":"n_ch1VU",
			"index":33,
			"inputs":{
				"loop":"wonjF"
			},
			"skip":false,
			"subTitle":"Continue",
			"title":"Continue",
			"type":"CONTINUE"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":371,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"wonjF@3mlzD-1@l",
			"id":"aHNuU",
			"index":34,
			"inputs":{
				"filters":[
					{
						"property":"{{ wonjF.outputs.payload.messageType }}",
						"filter":{
							"operator":"EQUAL",
							"value":"THOUGHT"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":378,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"aHNuU@wonjF@3mlzD-1@l@y",
			"id":"U267N",
			"index":35,
			"inputs":{
				"variables":[
					{
						"source":"{{ an5XW.outputs.messageType }}",
						"value":"{{ wonjF.outputs.payload.messageType }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":378,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"aHNuU@wonjF@3mlzD-1@l@n",
			"id":"iXSAA",
			"index":36,
			"inputs":{
				"variables":[
					{
						"source":"{{ an5XW.outputs.messageType }}",
						"value":"ANSWER"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":439,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"wonjF@3mlzD-1@l",
			"id":"n_SO1Z6",
			"index":37,
			"inputs":{
				"filters":[
					{
						"property":"{{ an5XW.outputs.messageType }}",
						"filter":{
							"operator":"EQUAL",
							"value":"THOUGHT"
						}
					},
					{
						"property":"{{ DugAy.outputs.includeThoughts }}",
						"filter":{
							"operator":"NOT_EQUAL",
							"value":"true"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"include thoughts?",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"continue",
				"resourceVersion":0,
				"resourceName":"continue",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_SO1Z6@wonjF@3mlzD-1@l@y",
			"id":"n_2C1i2",
			"index":38,
			"inputs":{
				"loop":"wonjF"
			},
			"skip":false,
			"subTitle":"Continue",
			"title":"Continue",
			"type":"CONTINUE"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"wonjF@3mlzD-1@l",
			"id":"n_Ysl3V",
			"index":39,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[
						"messageId",
						"caseId"
					],
					"properties":{
						"messageId":{
							"type":"string",
							"title":"Message Id"
						},
						"caseId":{
							"type":"string",
							"title":"Case Id"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[
						"completedMessage"
					],
					"properties":{
						"completedMessage":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Completed Message"
						}
					}
				},
				"code":"if (binding.hasVariable('completedMessage')) {\n  def map = [:]\n  if (completedMessage.messageId) {\n    map['messageId'] = completedMessage.messageId\n  }\n  if (completedMessage.caseId) {\n    map['caseId'] = completedMessage.caseId\n  }\n}",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"completedMessage":"{{ wonjF.outputs.payload.completeData }}"
				}
			},
			"skip":false,
			"subTitle":"Handle complete Message",
			"title":"Get Message Details",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":74,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"wonjF@3mlzD-1@l",
			"id":"JniDU",
			"index":40,
			"inputs":{
				"variables":[
					{
						"source":"{{ e0Ij8.outputs.accumulatedChunkContent }}",
						"value":"=CONCATENATE({{ e0Ij8.outputs.accumulatedChunkContent }}, {{ wonjF.outputs.payload.chunkContent }})"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.allCitations.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":441,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"wonjF@3mlzD-1@l",
			"id":"n_O0hVb",
			"index":41,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"toStream":{
							"type":"boolean",
							"title":"To Stream"
						},
						"citationPresent":{
							"type":"boolean",
							"title":"Citation Present"
						},
						"chunkNumber":{
							"type":"array",
							"items":{
								"type":"integer"
							},
							"title":"Chunk Number"
						},
						"citations":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Citations"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"messageContent":{
							"type":"string",
							"title":"Message Content"
						},
						"chunkContent":{
							"type":"string",
							"title":"Chunk Content"
						}
					}
				},
				"code":"if(!binding.hasVariable(\"messageContent\"))\n    return [toStream:true]\n\ndef openBracketIdx = messageContent.lastIndexOf('[')\ndef closeBracketIdx = messageContent.lastIndexOf(']')\ndef openBraceIdx = messageContent.lastIndexOf('{')\ndef closeBraceIdx = messageContent.lastIndexOf('}')\n\ndef insideIncompleteLink = false\ndef citationPresent = false\ndef chunkNumber = []\ndef citations = []\n\ndef fullPattern       = ~/\\$\\$\\[([\\d,]+)\\]\\$\\$/\ndef incompletePattern = ~/\\$\\$\\[[\\d,]*\\]?\\$?$/\n\n// pause on any ‘$’ not followed by a digit (i.e. non‐currency), until we see a full $$[n]$$\nif ((messageContent =~ /\\$(?!\\d)/) && !(messageContent =~ fullPattern)) {\n    return [toStream: false, citationPresent: citationPresent, chunkNumber: chunkNumber]\n}\n\n// Check for properly closed citations $$[n]$$ or $$[n1,n2,…]$$\ndef citationMatcher = messageContent =~ fullPattern\nif (citationMatcher) {\n    citationPresent = true\n    citationMatcher.each { m ->\n        m[1].split(',').each { chunkNumber.add(it.trim()) }\n    }\n}\n\n// also pause if there’s an incomplete citation at the end\nif ((messageContent =~ incompletePattern) && !(messageContent =~ fullPattern)) {\n    return [toStream: false, citationPresent: citationPresent, chunkNumber: chunkNumber]\n}\n\n\n// Check for an incomplete [title]{url} at the end\nif (openBracketIdx > closeBracketIdx || openBraceIdx > closeBraceIdx) {\n    // There is an unmatched [ or { after the last ] or }\n    // This means an incomplete link at the end\n    if (openBracketIdx > closeBracketIdx && (openBracketIdx > openBraceIdx || openBraceIdx == -1)) {\n        insideIncompleteLink = true\n    } else if (openBraceIdx > closeBraceIdx && (openBraceIdx > openBracketIdx || openBracketIdx == -1)) {\n        insideIncompleteLink = true\n    }\n}\n\ndef toStream = !insideIncompleteLink\nreturn [toStream: toStream, citationPresent: citationPresent, chunkNumber: chunkNumber, citations:citations]",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"messageContent":"{{ e0Ij8.outputs.accumulatedChunkContent }}",
					"chunkContent":"{{ wonjF.outputs.payload.chunkContent }}"
				}
			},
			"skip":false,
			"subTitle":"Check if streaming in progress and citation present",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":442,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"wonjF@3mlzD-1@l",
			"id":"n_eMPny",
			"index":42,
			"inputs":{
				"filters":[
					{
						"property":"{{ n_O0hVb.outputs.result.toStream }}",
						"filter":{
							"operator":"EQUAL",
							"value":"true"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":435,
				"resourceName":"callables_return_to_automation_streaming",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_eMPny@wonjF@3mlzD-1@l@y",
			"id":"_j4F9w",
			"index":43,
			"inputs":{
				"result":{
					"messageType":"{{ an5XW.outputs.messageType }}",
					"delta":"{{ e0Ij8.outputs.accumulatedChunkContent }}",
					"messageId":"{{ an5XW.outputs.currentMessageId }}",
					"caseId":"{{ EI4Z9.outputs.caseId }}",
					"mesageCreatedTime":"{{ an5XW.outputs.currentMsgCreatedTime }}",
					"msgAdditional":"{{ an5XW.outputs.msgAdditional }}",
					"copilotBlocks":{
						"source":"{{ wonjF.outputs.payload.coPilotBlocks }}",
						"ua:type":"mappedArray",
						"items":"{{ wonjF.outputs.payload.coPilotBlocks[0] }}"
					}
				},
				"completed":false
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Add response to automation stream",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":445,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_eMPny@wonjF@3mlzD-1@l@y",
			"id":"n_MKFAs",
			"index":44,
			"inputs":{
				"variables":[
					{
						"source":"{{ e0Ij8.outputs.accumulatedChunkContent }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":437,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"wonjF@3mlzD-1@l",
			"id":"n_4kZmP",
			"index":45,
			"inputs":{
				"filters":[
					{
						"property":"{{ n_O0hVb.outputs.result.citationPresent }}",
						"filter":{
							"operator":"EQUAL",
							"value":"true"
						}
					},
					{
						"property":"=LEN({{ n_O0hVb.outputs.result.chunkNumber }})",
						"filter":{
							"operator":"GT",
							"value":"0"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Citation?",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":459,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_4kZmP@wonjF@3mlzD-1@l@y",
			"id":"n_x8Doj",
			"index":46,
			"inputs":{
				"automationId":"685914facb8d060a8c7b1481",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"caseId":"{{ EI4Z9.outputs.caseId }}",
					"blockType":"Citation",
					"chunkNo":{
						"source":"{{ n_O0hVb.outputs.result.chunkNumber }}",
						"ua:type":"mappedArray",
						"items":"{{ n_O0hVb.outputs.result.chunkNumber[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Fetch chunks from citation store",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":435,
				"resourceName":"callables_return_to_automation_streaming",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_4kZmP@wonjF@3mlzD-1@l@y",
			"id":"_lNJmH",
			"index":47,
			"inputs":{
				"result":{
					"messageType":"{{ an5XW.outputs.messageType }}",
					"messageId":"{{ an5XW.outputs.currentMessageId }}",
					"caseId":"{{ EI4Z9.outputs.caseId }}",
					"mesageCreatedTime":"{{ an5XW.outputs.currentMsgCreatedTime }}",
					"msgAdditional":"{{ an5XW.outputs.msgAdditional }}",
					"copilotBlocks":{
						"ua:type":"mappedArray",
						"source":"{{ n_x8Doj.outputs.citationData }}",
						"items":"{{ n_x8Doj.outputs.citationData[0] }}"
					}
				},
				"completed":false
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Add response to automation stream",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"continue",
				"resourceVersion":0,
				"resourceName":"continue",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_4kZmP@wonjF@3mlzD-1@l@y",
			"id":"n_iFfz7",
			"index":48,
			"inputs":{
				"loop":"wonjF"
			},
			"skip":false,
			"subTitle":"Continue",
			"title":"Continue",
			"type":"CONTINUE"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":10,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"3mlzD-1",
			"id":"n_4xswy",
			"index":49,
			"inputs":{
				"filters":[
					{
						"property":"{{ an5XW.outputs.currentMessageId }}",
						"filter":{
							"operator":"EXISTS"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":383,
				"resourceName":"storage_by_unifyapps_get_record_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_4xswy@3mlzD-1@y",
			"id":"n_zQ3Ds",
			"index":50,
			"inputs":{
				"object_type":"service_hub_message",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"translationsOption":"DEFAULT",
				"id":"{{ an5XW.outputs.currentMessageId }}",
				"readThroughSessionVariables":false
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Fetch record by ID",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":10,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_4xswy@3mlzD-1@y",
			"id":"n_ikgwx",
			"index":51,
			"inputs":{
				"filters":[
					{
						"property":"=LEN({{ n_zQ3Ds.outputs.properties.content.citations }})",
						"filter":{
							"operator":"GT",
							"value":"0"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":10,
				"resourceName":"callables_return_to_automation_streaming",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_ikgwx@n_4xswy@3mlzD-1@y@y",
			"id":"n_stixW",
			"index":52,
			"inputs":{
				"result":{
					"messageType":"CITATION",
					"copilotBlocks":{
						"source":"{{ n_zQ3Ds.outputs.properties.content.coPilotBlocks.blocks }}",
						"ua:type":"mappedArray",
						"items":"{{ n_zQ3Ds.outputs.properties.content.coPilotBlocks.blocks[0] }}"
					},
					"messageId":"{{ an5XW.outputs.currentMessageId }}",
					"caseId":"{{ EI4Z9.outputs.caseId }}",
					"mesageCreatedTime":"{{ an5XW.outputs.currentMsgCreatedTime }}",
					"msgAdditional":"{{ an5XW.outputs.msgAdditional }}"
				},
				"completed":false
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Add response to automation stream",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":435,
				"resourceName":"callables_return_to_automation_streaming",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"3mlzD-1",
			"id":"n_r7Mwb",
			"index":53,
			"inputs":{
				"completed":true
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Add response to automation stream",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"stop"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"3mlzD-1",
			"id":"i5fug",
			"index":54,
			"skip":false,
			"subTitle":"Stop",
			"title":"Stop",
			"type":"STOP"
		}
	],
	"ownerUserId":-1,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":false,
	"version":107
}