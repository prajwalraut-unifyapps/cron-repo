{
	"appsUsed":[
		"storage_by_unifyapps",
		"tavily"
	],
	"createdTime":1758731859961,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1758820836403,
		"deployedBy":-1,
		"deployedDefinitionId":"68d579e4b57aa23969b94c75",
		"status":"DEPLOYED",
		"version":3,
		"workflowVersion":122
	},
	"edges":[
		{
			"fromNodeId":"TqnB7",
			"priority":0,
			"skip":false,
			"toNodeId":"AU2XH",
			"type":"next"
		},
		{
			"fromNodeId":"AU2XH",
			"priority":0,
			"skip":false,
			"toNodeId":"fc5LR",
			"type":"next"
		},
		{
			"fromNodeId":"fc5LR",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Lg0rG",
			"type":"next"
		},
		{
			"fromNodeId":"n_Lg0rG",
			"priority":0,
			"skip":false,
			"toNodeId":"RkGgx",
			"type":"next"
		},
		{
			"fromNodeId":"RkGgx",
			"priority":0,
			"skip":false,
			"toNodeId":"_aN708",
			"type":"next"
		},
		{
			"fromNodeId":"_aN708",
			"priority":0,
			"skip":false,
			"toNodeId":"n_6hEKN",
			"type":"next"
		},
		{
			"fromNodeId":"n_6hEKN",
			"priority":0,
			"skip":false,
			"toNodeId":"n_6Q87C",
			"type":"loop"
		},
		{
			"fromNodeId":"n_6Q87C",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"n_6hEKN",
			"type":"next"
		},
		{
			"fromNodeId":"n_6hEKN",
			"priority":0,
			"skip":false,
			"toNodeId":"_snNf0",
			"type":"next"
		},
		{
			"fromNodeId":"_snNf0",
			"priority":0,
			"skip":false,
			"toNodeId":"KS8hc",
			"type":"next"
		},
		{
			"fromNodeId":"KS8hc",
			"priority":0,
			"skip":false,
			"toNodeId":"MvWJz",
			"type":"next"
		},
		{
			"fromNodeId":"MvWJz",
			"priority":0,
			"skip":false,
			"toNodeId":"B42S5",
			"type":"next"
		},
		{
			"fromNodeId":"B42S5",
			"priority":0,
			"skip":false,
			"toNodeId":"LpZOz",
			"type":"next"
		},
		{
			"fromNodeId":"LpZOz",
			"priority":0,
			"skip":false,
			"toNodeId":"z4F2m",
			"type":"next"
		},
		{
			"fromNodeId":"z4F2m",
			"priority":0,
			"skip":false,
			"toNodeId":"h9R03",
			"type":"loop"
		},
		{
			"fromNodeId":"h9R03",
			"priority":0,
			"skip":false,
			"toNodeId":"FW2ke",
			"type":"next"
		},
		{
			"fromNodeId":"FW2ke",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"TWO8C",
			"type":"if"
		},
		{
			"fromNodeId":"TWO8C",
			"priority":0,
			"skip":false,
			"toNodeId":"7txbk",
			"type":"next"
		},
		{
			"fromNodeId":"FW2ke",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"7txbk",
			"type":"next"
		},
		{
			"fromNodeId":"7txbk",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"z4F2m",
			"type":"next"
		},
		{
			"fromNodeId":"z4F2m",
			"priority":0,
			"skip":false,
			"toNodeId":"CWe4P",
			"type":"next"
		},
		{
			"fromNodeId":"CWe4P",
			"priority":0,
			"skip":false,
			"toNodeId":"_3SI7v",
			"type":"next"
		},
		{
			"fromNodeId":"_3SI7v",
			"priority":0,
			"skip":false,
			"toNodeId":"UB4qk",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"68593cbb518c4b5388423263",
	"lastModifiedBy":0,
	"lcName":"deep research tool | websearch",
	"modifiedTime":1758885730677,
	"name":"Deep Research Tool | WebSearch",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":444,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"5s0uf-1",
			"id":"TqnB7",
			"index":1,
			"inputs":{
				"result":{
					"type":"object",
					"properties":{
						"output":{
							"type":"object",
							"properties":{
								"results":{
									"type":"array",
									"items":{
										"type":"object",
										"properties":{},
										"additionalProperties":false
									},
									"title":"Results"
								}
							},
							"additionalProperties":false,
							"title":"Output",
							"required":[]
						},
						"ans":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Ans"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"setup":{
					"type":"object",
					"properties":{
						"query":{
							"type":"string",
							"title":"Query"
						},
						"modelID":{
							"type":"string",
							"title":"Model ID"
						},
						"agentID":{
							"type":"string",
							"title":"Agent ID"
						}
					},
					"additionalProperties":false,
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger via automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":16,
				"resourceName":"variable_by_unifyapps_get_session_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"5s0uf-1",
			"id":"AU2XH",
			"index":2,
			"inputs":{
				"variableSchema":{
					"type":"object",
					"properties":{
						"caseId":{
							"type":"string",
							"title":"Case Id"
						}
					},
					"additionalProperties":false,
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"caseId",
			"title":"Get Session Variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":124,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"5s0uf-1",
			"id":"fc5LR",
			"index":3,
			"inputs":{
				"automationId":"67c89525ab51f86320c5f5f1",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"queries":{
						"items":"{{ TqnB7.outputs.query }}",
						"ua:type":"mappedArray"
					},
					"caseId":"{{ AU2XH.outputs.caseId }}"
				}
			},
			"skip":false,
			"subTitle":"Searching block",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":450,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"5s0uf-1",
			"id":"n_Lg0rG",
			"index":4,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"Initial list items",
							"ui:description":"Set the initial values of the list (defaults to empty)"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"type":"object",
									"properties":{
										"url":{
											"type":"string",
											"title":"Url"
										},
										"text":{
											"type":"string",
											"title":"Text"
										},
										"title":{
											"type":"string",
											"title":"Title"
										}
									},
									"required":[]
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray"
				},
				"ua:title":"List",
				"ua:list_type":"OBJECT"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"List",
							"disableActions":true,
							"items":{
								"type":"object",
								"properties":{
									"url":{
										"type":"string",
										"title":"Url"
									},
									"text":{
										"type":"string",
										"title":"Text"
									},
									"title":{
										"type":"string",
										"title":"Title"
									}
								},
								"required":[]
							}
						}
					}
				}
			},
			"skip":true,
			"subTitle":"Variable by UnifyApps",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"tavily",
				"resourceVersion":13,
				"connectionId":"6834716e958416644b8b96c9",
				"resourceName":"tavily_execute_search_query",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"5s0uf-1",
			"id":"RkGgx",
			"index":5,
			"inputs":{
				"search_depth":"advanced",
				"include_answers":true,
				"time_range":"week",
				"query":"{{ TqnB7.outputs.query }}",
				"topic":"general",
				"max_results":2
			},
			"skip":false,
			"subTitle":"Tavily",
			"title":"Search query",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":450,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"5s0uf-1",
			"id":"_aN708",
			"index":6,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"Initial list items",
							"ui:description":"Set the initial values of the list (defaults to empty)"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"type":"object",
									"properties":{
										"url":{
											"type":"string",
											"title":"Url"
										},
										"query":{
											"type":"string",
											"title":"Query"
										},
										"agent_id":{
											"type":"string",
											"title":"Agent Id"
										},
										"caseID":{
											"type":"string",
											"title":"Case ID"
										},
										"modelID":{
											"type":"string",
											"title":"Model ID"
										}
									},
									"required":[]
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray"
				},
				"ua:title":"model inp",
				"ua:list_type":"OBJECT"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"model inp",
							"disableActions":true,
							"items":{
								"type":"object",
								"properties":{
									"url":{
										"type":"string",
										"title":"Url"
									},
									"query":{
										"type":"string",
										"title":"Query"
									},
									"agent_id":{
										"type":"string",
										"title":"Agent Id"
									},
									"caseID":{
										"type":"string",
										"title":"Case ID"
									},
									"modelID":{
										"type":"string",
										"title":"Model ID"
									}
								},
								"required":[]
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":0,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"5s0uf-1",
			"id":"n_6hEKN",
			"index":7,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ RkGgx.outputs.results }}",
				"captureIterations":false
			},
			"skip":false,
			"subTitle":"Loop",
			"title":"For each loop",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":453,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_6hEKN@5s0uf-1@l",
			"id":"n_6Q87C",
			"index":8,
			"inputs":{
				"itemToAdd":{
					"url":"{{ n_6hEKN.outputs.item.url }}",
					"query":"{{ TqnB7.outputs.query }}",
					"agent_id":"{{ TqnB7.outputs.agentID }}",
					"caseID":"{{ AU2XH.outputs.caseId }}",
					"modelID":"{{ TqnB7.outputs.modelID }}"
				},
				"insertLocation":"END",
				"listName":"{{ _aN708.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":452,
				"resourceName":"callables_call_automation_batch",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"5s0uf-1",
			"id":"_snNf0",
			"index":9,
			"inputs":{
				"automationId":"68a80aac8f443d617800033f",
				"runtimeConnections":{},
				"synchronous":true,
				"distributeWorkflowLoad":false,
				"parametersList":{
					"source":"{{ _aN708.outputs.items }}",
					"ua:type":"mappedArray",
					"items":{
						"query":"{{ _aN708.outputs.items[0].query }}",
						"agentID":"{{ _aN708.outputs.items[0].agent_id }}",
						"modelID":"{{ _aN708.outputs.items[0].modelID }}",
						"caseId":"{{ _aN708.outputs.items[0].caseID }}",
						"url":"{{ _aN708.outputs.items[0].url }}"
					}
				},
				"version":"-1"
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call automation (batch)",
			"type":"CALL_WORKFLOW"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.urls.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":8,
				"resourceName":"code_by_unifyapps_python",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"5s0uf-1",
			"id":"KS8hc",
			"index":10,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"favicon":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Favicon"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"configurationMode":"DEFAULT",
				"input":{
					"type":"object",
					"properties":{
						"urls":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Urls"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"code":"import requests\nfrom bs4 import BeautifulSoup\nfrom urllib.parse import urljoin, urlparse\n\nheaders = {\n    'User-Agent': (\n        'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 '\n        '(KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36'\n    ),\n    'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',\n    'Accept-Language': 'en-US,en;q=0.9',\n    'Accept-Encoding': 'gzip, deflate, br',\n    'Connection': 'keep-alive',\n    'Upgrade-Insecure-Requests': '1',\n    'Cache-Control': 'max-age=0',\n    'Referer': 'https://google.com'\n}\ntimeout = 10\nselectors = [\n    (\"link\", {\"rel\": \"icon\"}),\n    (\"link\", {\"rel\": \"shortcut icon\"}),\n    (\"link\", {\"rel\": \"apple-touch-icon\"}),\n    (\"link\", {\"rel\": \"apple-touch-icon-precomposed\"}),\n]\n\nif 'urls' in locals():\n    results = []\n\n    for url in urls:\n        favicon_url = None\n        error = None\n        parsed = urlparse(url)\n        base = f\"{parsed.scheme}://{parsed.netloc}\"\n        try:\n            resp = requests.get(url, timeout=timeout, headers=headers)\n            resp.raise_for_status()\n            soup = BeautifulSoup(resp.text, \"html.parser\")\n            for tag, attrs in selectors:\n                el = soup.find(tag, attrs=attrs)\n                if el and el.get(\"href\"):\n                    potential_url = urljoin(base, el[\"href\"])\n                    try:\n                        icon_resp = requests.get(potential_url, timeout=timeout, headers=headers)\n                        if icon_resp.status_code == 200:\n                            favicon_url = potential_url\n                            break \n                    except requests.RequestException:\n                        continue \n\n        except requests.RequestException as e:\n            error = str(e)\n\n        if not favicon_url:\n            # Use Google favicon fallback\n            favicon_url = f\"https://www.google.com/s2/favicons?domain={parsed.netloc}&sz=64\"\n\n        result = {\n            \"favicon\": favicon_url,\n        }\n        if error:\n            result[\"error\"] = error\n\n        results.append(result)\n\n    result = {\n        \"favicon\": results\n    }\nelse:\n    result = {\n        \"favicon\": []\n    }",
				"isAsync":false,
				"python_version":"3.12",
				"parameters":{
					"urls":{
						"source":"{{ RkGgx.outputs.results }}",
						"ua:type":"mappedArray",
						"items":"{{ RkGgx.outputs.results[0].url }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Get favicon",
			"title":"Execute Python script",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":237,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"5s0uf-1",
			"id":"MvWJz",
			"index":11,
			"inputs":{
				"automationId":"6801f34a8136c62fb3014199",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"aiAgentId":"{{ TqnB7.outputs.triggeredByAgentId }}",
					"results":{
						"source":"{{ RkGgx.outputs.results }}",
						"ua:type":"mappedArray",
						"items":"{{ RkGgx.outputs.results[0] }}"
					},
					"favicon":{
						"source":"{{ KS8hc.outputs.result.favicon }}",
						"ua:type":"mappedArray",
						"items":"{{ KS8hc.outputs.result.favicon[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Analyzing block",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.favicon.items",
					"root.parameters.resultList.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":360,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"5s0uf-1",
			"id":"B42S5",
			"index":12,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"chunks":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"chunkMetadata":{
										"type":"object",
										"properties":{},
										"additionalProperties":false,
										"title":"Chunk Metadata"
									},
									"content":{
										"type":"string",
										"title":"Content"
									}
								},
								"additionalProperties":false,
								"required":[
									"chunkMetadata",
									"content"
								]
							},
							"title":"Chunks"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"input":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Input"
						},
						"favicon":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Favicon"
						},
						"resultList":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Result List"
						}
					}
				},
				"code":"def results = resultList\n\ndef favicons = binding.hasVariable('favicon') ? favicon as List : []\n\ndef chunks = []\n\nfor (int idx = 0; idx < results.size(); idx++) {\n    def item = results[idx]\n    // pick the matching favicon entry by index, or fall back to empty string\n    def iconUrl = (idx < favicons.size() && favicons[idx]?.favicon) ? favicons[idx].favicon : \"\"\n\n    chunks << [\n        chunkMetadata: [\n            chunkContents   : item.summarized_content ? [ item.summarized_content ] : [],\n            name            : item?.title,\n            title           : item?.title,\n            referenceUrl    : item?.url,\n            websiteUrl      : item?.url,\n            uniqueEntityId  : item?.url,\n            sourceType      : \"WEBSITE\",\n            iconUrl         : iconUrl\n        ],\n        content: item.summarized_content ?: \"\"\n    ]\n}\n\nreturn [ chunks: chunks ]",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"input":"{{ RkGgx.outputs }}",
					"favicon":{
						"source":"{{ KS8hc.outputs.result.favicon }}",
						"ua:type":"mappedArray",
						"items":"{{ KS8hc.outputs.result.favicon[0] }}"
					},
					"resultList":{
						"ua:type":"mappedArray",
						"source":"{{ _snNf0.outputs.result }}",
						"items":"{{ _snNf0.outputs.result[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Make chunks from output",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":2,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"5s0uf-1",
			"id":"LpZOz",
			"index":13,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"counter":{
							"type":"integer",
							"title":"Counter"
						}
					},
					"required":[]
				}
			},
			"inputs":{},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"counter":{
							"type":"integer",
							"title":"Counter"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable ",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":73,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"5s0uf-1",
			"id":"z4F2m",
			"index":14,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ B42S5.outputs.result.chunks }}",
				"captureIterations":false
			},
			"skip":false,
			"subTitle":"relevant content",
			"title":"For loop",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"utility_by_unifyapps",
				"resourceVersion":72,
				"resourceName":"utility_by_unifyapps_sequence_generator",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"z4F2m@5s0uf-1@l",
			"id":"h9R03",
			"index":15,
			"inputs":{
				"sequenceName":"{{ AU2XH.outputs.caseId }}_ChunkNumber"
			},
			"skip":false,
			"subTitle":"Utility by UnifyApps",
			"title":"Sequence Generator",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":71,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"z4F2m@5s0uf-1@l",
			"id":"FW2ke",
			"index":16,
			"inputs":{
				"filters":[
					{
						"property":"{{ z4F2m.outputs.isFirst }}",
						"filter":{
							"operator":"EQUAL",
							"value":"true"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":72,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"FW2ke@z4F2m@5s0uf-1@l@y",
			"id":"TWO8C",
			"index":17,
			"inputs":{
				"variables":[
					{
						"source":"{{ LpZOz.outputs.counter }}",
						"value":"{{ h9R03.outputs.result }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.record.columnData.items",
					"root.record.rowData.items"
				]
			},
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":72,
				"resourceName":"storage_by_unifyapps_create_record",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"z4F2m@5s0uf-1@l",
			"id":"7txbk",
			"index":18,
			"inputs":{
				"writeThroughSessionVariables":false,
				"object_type":"citation_store",
				"record":{
					"hasMoreData":false,
					"tableIsPublished":false,
					"content":"{{ z4F2m.outputs.item.content }}",
					"metadata":"{{ z4F2m.outputs.item.chunkMetadata }}",
					"caseId":"{{ AU2XH.outputs.caseId }}",
					"chunkNumber":"{{ h9R03.outputs.result }}"
				}
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Create record",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.relevantContent.items",
					"root.parameters.columnData.items",
					"root.parameters.rowData.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":17,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"5s0uf-1",
			"id":"CWe4P",
			"index":19,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"formattedOutput":{
							"type":"object",
							"properties":{
								"results":{
									"type":"array",
									"items":{
										"type":"object",
										"properties":{},
										"additionalProperties":false
									},
									"title":"Results"
								}
							},
							"additionalProperties":false,
							"title":"Formatted Output",
							"required":[]
						}
					},
					"additionalProperties":false,
					"required":[
						"formattedOutput"
					]
				},
				"input":{
					"type":"object",
					"properties":{
						"counter":{
							"type":"integer",
							"title":"Counter"
						},
						"tavily":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Tavily"
						}
					},
					"additionalProperties":false,
					"required":[
						"tavily"
					]
				},
				"compile_static":false,
				"code":"def ctr = counter - 1\n\nif (binding.hasVariable('tavily')) {\n    def results = tavily.results\n    if (results != null && !results.isEmpty()) {\n        for (text in results) {\n            if (text?.content) {\n                ctr += 1\n                // assign the wrapped content directly, without .toString()\n                text.content = \"<chunk id=\\\"${ctr}\\\">\\n*****\\n${text.content}\\n*****\\n</chunk>\\n\".toString()\n            }\n        }\n    }\n}\n\nreturn [\n    \"formattedOutput\": tavily\n]",
				"parameters":{
					"counter":"{{ LpZOz.outputs.counter }}",
					"tavily":"{{ RkGgx.outputs }}"
				}
			},
			"skip":true,
			"subTitle":"prepareOutput",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.favicon.items",
					"root.parameters.resultList.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":360,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"5s0uf-1",
			"id":"_3SI7v",
			"index":20,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"chunks":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"content":{
										"type":"string",
										"title":"Content"
									}
								},
								"additionalProperties":false,
								"required":[
									"content"
								]
							},
							"title":"Chunks"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"favicon":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Favicon"
						},
						"resultList":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Result List"
						},
						"counter":{
							"type":"integer",
							"title":"Counter"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def results = binding.hasVariable('resultList') ? resultList as List : []\ndef favicons = binding.hasVariable('favicon') ? favicon as List : []\ndef ctr = counter - 1\ndef chunks = []\n\nfor (int idx = 0; idx < results.size(); idx++) {\n    def item = results[idx]\n    // pick the matching favicon entry by index, or fall back to empty string\n    def iconUrl = (idx < favicons.size() && favicons[idx]?.favicon) ? favicons[idx].favicon : \"\"\n    ctr += 1\n    chunks << [\n        // chunkMetadata: [\n        //     chunkContents   : item.text ? [ item.text ] : [],\n        //     name            : item?.title,\n        //     title           : item?.title,\n        //     referenceUrl    : item?.url,\n        //     websiteUrl      : item?.url,\n        //     uniqueEntityId  : item?.url,\n        //     sourceType      : \"WEBSITE\",\n        //     iconUrl         : iconUrl\n        // ],\n        content : \"<chunk id=\\\"${ctr}\\\">\\n*****\\n${item.summarized_content}\\n*****\\nurl: ${item.url}</chunk>\\n\".toString()\n    ]\n}\n\nreturn [ chunks: chunks ]",
				"parameters":{
					"favicon":{
						"source":"{{ KS8hc.outputs.result.favicon }}",
						"ua:type":"mappedArray",
						"items":"{{ KS8hc.outputs.result.favicon[0] }}"
					},
					"resultList":{
						"source":"{{ _snNf0.outputs.result }}",
						"ua:type":"mappedArray",
						"items":"{{ _snNf0.outputs.result[0] }}"
					},
					"counter":"{{ LpZOz.outputs.counter }}"
				}
			},
			"skip":false,
			"subTitle":"Make chunks from output",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":358,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"5s0uf-1",
			"id":"UB4qk",
			"index":21,
			"inputs":{
				"result":{
					"output":{
						"results":{
							"ua:type":"mappedArray",
							"source":"{{ _3SI7v.outputs.result.chunks }}",
							"items":"{{ _3SI7v.outputs.result.chunks[0] }}"
						}
					},
					"ans":"{{ RkGgx.outputs.results }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":-1,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"headerValueTierMap":{},
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		
	],
	"version":123
}