{
	"appsUsed":[
		
	],
	"createdTime":1760442754488,
	"deleted":false,
	"edges":[
		{
			"fromNodeId":"n_qzrFe",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ET0k2",
			"type":"next"
		},
		{
			"fromNodeId":"n_ET0k2",
			"priority":0,
			"skip":false,
			"toNodeId":"n_HxMj7",
			"type":"next"
		},
		{
			"fromNodeId":"n_HxMj7",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Sy0Hw",
			"type":"next"
		},
		{
			"fromNodeId":"n_Sy0Hw",
			"priority":0,
			"skip":false,
			"toNodeId":"n_3E5R1",
			"type":"next"
		},
		{
			"fromNodeId":"n_3E5R1",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_7xsRp",
			"type":"if"
		},
		{
			"fromNodeId":"n_7xsRp",
			"name":"error",
			"priority":0,
			"skip":false,
			"toNodeId":"n_9qBw3",
			"type":"error"
		},
		{
			"fromNodeId":"n_9qBw3",
			"priority":0,
			"skip":false,
			"toNodeId":"_buXRg",
			"type":"next"
		},
		{
			"fromNodeId":"n_7xsRp",
			"priority":0,
			"skip":false,
			"toNodeId":"n_NWFBG",
			"type":"next"
		},
		{
			"fromNodeId":"_buXRg",
			"priority":0,
			"skip":false,
			"toNodeId":"n_NWFBG",
			"type":"next"
		},
		{
			"fromNodeId":"n_NWFBG",
			"name":"error",
			"priority":0,
			"skip":false,
			"toNodeId":"n_7U91x",
			"type":"error"
		},
		{
			"fromNodeId":"n_7U91x",
			"priority":0,
			"skip":false,
			"toNodeId":"_ykicF",
			"type":"next"
		},
		{
			"fromNodeId":"n_NWFBG",
			"priority":0,
			"skip":false,
			"toNodeId":"n_cJWiB",
			"type":"next"
		},
		{
			"fromNodeId":"_ykicF",
			"priority":0,
			"skip":false,
			"toNodeId":"n_cJWiB",
			"type":"next"
		},
		{
			"fromNodeId":"n_cJWiB",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_JIYvA",
			"type":"if"
		},
		{
			"fromNodeId":"n_JIYvA",
			"priority":0,
			"skip":false,
			"toNodeId":"n_q1A6h",
			"type":"next"
		},
		{
			"fromNodeId":"n_cJWiB",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ahFJu",
			"type":"next"
		},
		{
			"fromNodeId":"n_ahFJu",
			"priority":0,
			"skip":false,
			"toNodeId":"_GOWnv",
			"type":"next"
		},
		{
			"fromNodeId":"n_3E5R1",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_hsux6",
			"type":"next"
		},
		{
			"fromNodeId":"n_hsux6",
			"priority":0,
			"skip":false,
			"toNodeId":"n_S4hua",
			"type":"next"
		},
		{
			"fromNodeId":"n_S4hua",
			"priority":0,
			"skip":false,
			"toNodeId":"n_9hMgd",
			"type":"next"
		}
	],
	"id":"68ee398260d00c2ce23c58f4",
	"lastModifiedBy":39715,
	"lcName":"validate azure ad token",
	"modifiedTime":1760444106082,
	"name":"Validate Azure Ad Token",
	"nodes":[
		{
			"context":{
				"appName":"webhooks",
				"resourceVersion":833,
				"resourceName":"webhooks_default"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"_6Puoh-1",
			"id":"n_qzrFe",
			"index":1,
			"inputs":{
				"request":{
					"contentType":"application/json"
				}
			},
			"skip":false,
			"subTitle":"Webhook",
			"title":"New event",
			"trigger":{
				"type":"WEBHOOK"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":5,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"_6Puoh-1",
			"id":"n_ET0k2",
			"index":2,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"authorization":{
							"type":"string",
							"title":"Authorization"
						}
					}
				},
				"code":"// def authValue = headers?.requestHeaders?.authorization?.getAt(0)\r\n// def token = \"\"\r\n// if (authValue) {\r\n//     token = authValue.replaceAll(\"Bearer \", \"\")\r\n// }\r\nreturn [\"authorization\": \"eyJ0eXAiOiJKV1QiLCJub25jZSI6IkRsWU9LRFZ4UjJ6R0NySHNzOWc0c0hLM0J2ZkNPQjRibnp4Ym1TX1FjTnciLCJhbGciOiJSUzI1NiIsIng1dCI6IkhTMjNiN0RvN1RjYVUxUm9MSHdwSXEyNFZZZyIsImtpZCI6IkhTMjNiN0RvN1RjYVUxUm9MSHdwSXEyNFZZZyJ9.eyJhdWQiOiJodHRwczovL2dyYXBoLm1pY3Jvc29mdC5jb20iLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8wZDg1MTYwYy01ODk5LTQ0Y2EtYWNjOC1kYjE1MDFiOTkzYjYvIiwiaWF0IjoxNzYwNDQxODk5LCJuYmYiOjE3NjA0NDE4OTksImV4cCI6MTc2MDQ0NzA4MCwiYWNjdCI6MCwiYWNyIjoiMSIsImFjcnMiOlsicDEiXSwiYWlvIjoiQVhRQWkvOGFBQUFBd0d2am44WUpUSU9KVDNHcGF6VEd4SitIWlc5TnNEeVBxd3hMMnlvT2JkN2hyZCs5WDBzVElzSnRLakZHU2ZXVzl5QXFnVHZMM2pDSVlNSlA4Nnd6ZlRxVXVWVEhETFltekVKdFViREYyc3c0dUdIbUk3L3hvbXhnb2dZdDlnbVlOOTNnVjkvYXJCelRyVmNsNFZwZEJ3PT0iLCJhbXIiOlsicHdkIiwicnNhIiwibWZhIl0sImFwcF9kaXNwbGF5bmFtZSI6IlNoYXJlUG9pbnQgT25saW5lIFdlYiBDbGllbnQgRXh0ZW5zaWJpbGl0eSIsImFwcGlkIjoiMDhlMTg4NzYtNjE3Ny00ODdlLWI4YjUtY2Y5NTBjMWU1OThjIiwiYXBwaWRhY3IiOiIwIiwiZGV2aWNlaWQiOiJhMzk4ZjJlNC03NTBjLTQwZWEtYWRmNC04ZjgwMTVhYzZlM2IiLCJmYW1pbHlfbmFtZSI6IkFtYXJhdGh1bmdhIiwiZ2l2ZW5fbmFtZSI6IkNoYXRodXJhIFByYXNhZCIsImlkdHlwIjoidXNlciIsImlwYWRkciI6IjEwNC40My4xOC4xMCIsIm5hbWUiOiJDaGF0aHVyYSBQcmFzYWQgQW1hcmF0aHVuZ2EiLCJvaWQiOiIxYzEwMmY2MS00ODk2LTQzMDItOTA0Ni1mZGM2ZjM0OWEzYjMiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtMTkzNTY1NTY5Ny0yMTM5ODcxOTk1LTY4MjAwMzMzMC0xMTQ2ODkiLCJwbGF0ZiI6IjMiLCJwdWlkIjoiMTAwMzAwMDA4NUVGMDJENSIsInB3ZF9leHAiOiI0MDQxMzMiLCJwd2RfdXJsIjoiaHR0cHM6Ly9wb3J0YWwubWljcm9zb2Z0b25saW5lLmNvbS9DaGFuZ2VQYXNzd29yZC5hc3B4IiwicmgiOiIxLkFRb0FEQmFGRFpsWXlrU3N5TnNWQWJtVHRnTUFBQUFBQUFBQXdBQUFBQUFBQUFBS0FIQUtBQS4iLCJzY3AiOiJBcHBDYXRhbG9nLlJlYWQuQWxsIEFwcENhdGFsb2cuU3VibWl0IENhbGVuZGFycy5SZWFkIENoYW5uZWwuQ3JlYXRlIENoYW5uZWwuUmVhZEJhc2ljLkFsbCBDaGF0TWVtYmVyLlJlYWQgRWR1QXNzaWdubWVudHMuUmVhZEJhc2ljIEVkdVJvc3Rlci5SZWFkQmFzaWMgRmlsZXMuUmVhZCBGaWxlcy5SZWFkLkFsbCBGaWxlcy5SZWFkV3JpdGUuQWxsIEZpbGVTdG9yYWdlQ29udGFpbmVyLlNlbGVjdGVkIEdyb3VwLlJlYWQuQWxsIEdyb3VwLUNvbnZlcnNhdGlvbi5SZWFkV3JpdGUuQWxsIEdyb3VwTWVtYmVyLlJlYWQuQWxsIEluZm9ybWF0aW9uUHJvdGVjdGlvblBvbGljeS5SZWFkIE1haWwuUmVhZCBNYWlsLlNlbmQgUGVvcGxlLlJlYWQgUGVvcGxlLlJlYWQuQWxsIFByZXNlbmNlLlJlYWQuQWxsIFByaW50ZXJTaGFyZS5SZWFkQmFzaWMuQWxsIFByaW50Sm9iLkNyZWF0ZSBQcmludEpvYi5SZWFkQmFzaWMgU2Vuc2l0aXZpdHlMYWJlbC5SZWFkIFNpdGVzLkZ1bGxDb250cm9sLkFsbCBTaXRlcy5SZWFkLkFsbCBTaXRlcy5SZWFkV3JpdGUuQWxsIFRhc2tzLlJlYWRXcml0ZSBUZWFtLlJlYWRCYXNpYy5BbGwgVGVhbXNBcHBJbnN0YWxsYXRpb24uUmVhZFdyaXRlRm9yVGVhbSBUZWFtc0FwcEluc3RhbGxhdGlvbi5SZWFkV3JpdGVTZWxmRm9yVGVhbSBUZWFtc1RhYi5DcmVhdGUgVGVybVN0b3JlLlJlYWRXcml0ZS5BbGwgVXNlci5SZWFkIFVzZXIuUmVhZEJhc2ljLkFsbCBwcm9maWxlIG9wZW5pZCBlbWFpbCIsInNpZCI6IjAwMzE3ODI5LWMxYzAtYjJkOS00MGM4LWI1OTE1Yzg2ZGFjYyIsInNpZ25pbl9zdGF0ZSI6WyJkdmNfZG1qZCIsImlua25vd25udHdrIiwia21zaSJdLCJzdWIiOiI2QlFkSGJUUE92RDl1eHE3Z25VR3FacDA0RWxIRmx6TzlrRUZjdnRXZ1BzIiwidGVuYW50X3JlZ2lvbl9zY29wZSI6IkFTIiwidGlkIjoiMGQ4NTE2MGMtNTg5OS00NGNhLWFjYzgtZGIxNTAxYjk5M2I2IiwidW5pcXVlX25hbWUiOiJjYW1hcmF0aHVuZ2FAVmlydHVzYS5jb20iLCJ1cG4iOiJjYW1hcmF0aHVuZ2FAVmlydHVzYS5jb20iLCJ1dGkiOiJSRURqWDJpM19rZXg5R1R2QzMtckFBIiwidmVyIjoiMS4wIiwid2lkcyI6WyJiNzlmYmY0ZC0zZWY5LTQ2ODktODE0My03NmIxOTRlODU1MDkiXSwieG1zX2FjZCI6MTUyODA5MjgzOCwieG1zX2FjdF9mY3QiOiI1IDMiLCJ4bXNfZnRkIjoiZEtzTmlDWngxaElGVVB1aGd6TFJ4bFl1Nkh1ZFNvRFBUdFRXMzRkR2VjTUJhMjl5WldGalpXNTBjbUZzTFdSemJYTSIsInhtc19pZHJlbCI6IjEgMjIiLCJ4bXNfc3QiOnsic3ViIjoicnh6dS1hZ21qelVwWjN4a3hwNEZIT3BJQk16ZDlNOVRJbDlpQTE1eENVNCJ9LCJ4bXNfc3ViX2ZjdCI6IjE2IDMiLCJ4bXNfdGNkdCI6MTM2OTczNTQ2MywieG1zX3RudF9mY3QiOiIzIDQifQ.V0JjM9DO6pzGLbdUjUd7T6MIcJTKx0lx4sjWdgYJBrsnHN7BWbCjxWm26DUYrHmGwVVGjSAGY_q96ebeILHVi_yGbenk2yVzUm-lbfqoobktCNxwIkRnbavxHO-Wxqmz7yuN3HeYUZor57hWuRhO0-cI7ywdFvy1-Xb1uSqSSPB0EKvJ8bbqhsucWAH4K-69CvBHXWeOYozPy-1O5k5PuVND7HpNdwK5MB1rQTiBr9llgALQDLQWEJpTjcOhByFjljhz0Nc1W0GD8HNUVMzFz5LdgcYwxFQWL2Odz9RcOiSWIsRsdre6PwWQBZptOlgyPAp8VOV69uKXVyt6fZzyhQ\"]",
				"compile_static":false,
				"captureStdOutput":false
			},
			"options":{
				"bulkheadConfig":{
					"enabled":false,
					"maxLeaseTimeUnit":"SECONDS",
					"maxWaitDurationUnit":"SECONDS"
				},
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false,
					"usagePolicy":"ALWAYS"
				},
				"circuitBreakerConfig":{
					"enabled":false,
					"slidingWindowType":"COUNT_BASED"
				},
				"disableLogging":true,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false,
					"postHooks":[
						
					],
					"preHooks":[
						
					]
				},
				"logConfig":{
					"enabled":false,
					"logPolicies":[
						
					]
				},
				"rateLimitConfig":{
					"enabled":false,
					"unit":"MINUTES",
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"STOP",
				"telemetryConfig":{
					"enableTelemetry":false,
					"metricConfigs":[
						
					]
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":5,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"_6Puoh-1",
			"id":"n_HxMj7",
			"index":3,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"response":{
							"type":"object",
							"properties":{
								"message":{
									"type":"string",
									"title":"Message"
								}
							},
							"additionalProperties":false,
							"title":"Response",
							"required":[]
						}
					},
					"required":[]
				}
			},
			"inputs":{
				"response":{
					"message":"JWT Validation Failed"
				}
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"response":{
							"type":"object",
							"properties":{
								"message":{
									"type":"string",
									"title":"Message"
								}
							},
							"additionalProperties":false,
							"title":"Response",
							"required":[]
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":869,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"_6Puoh-1",
			"id":"n_Sy0Hw",
			"index":4,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"tenantId":{
							"type":"string",
							"title":"Tenant Id"
						}
					},
					"required":[
						"tenantId"
					]
				}
			},
			"inputs":{
				"tenantId":"0d85160c-5899-44ca-acc8-db1501b993b6"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"tenantId":{
							"type":"string",
							"title":"Tenant Id"
						}
					},
					"required":[
						"tenantId"
					]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":5,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"_6Puoh-1",
			"id":"n_3E5R1",
			"index":5,
			"inputs":{
				"filters":[
					{
						"property":"{{ n_ET0k2.outputs.result.authorization }}",
						"filter":{
							"operator":"EXISTS"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"MANUAL",
			"groupId":"n_3E5R1@_6Puoh-1@y",
			"id":"n_7xsRp",
			"index":6,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"properties":{
						"response":{
							"type":"object",
							"properties":{
								"keys":{
									"type":"array",
									"items":{
										"type":"object",
										"properties":{
											"kty":{
												"type":"string",
												"title":"kty"
											},
											"use":{
												"type":"string",
												"title":"use"
											},
											"kid":{
												"type":"string",
												"title":"kid"
											},
											"x5t":{
												"type":"string",
												"title":"x5t"
											},
											"n":{
												"type":"string",
												"title":"n"
											},
											"e":{
												"type":"string",
												"title":"e"
											},
											"x5c":{
												"type":"array",
												"items":{
													"type":"string"
												},
												"title":"x5c"
											},
											"cloud_instance_name":{
												"type":"string",
												"title":"cloud_instance_name"
											}
										},
										"additionalProperties":false
									},
									"title":"keys"
								}
							},
							"title":"response",
							"additionalProperties":false
						}
					}
				},
				"code":"import com.unifyapps.infra.utils.JsonUtils;\r\n\r\n\r\nString tenantId = \"0d85160c-5899-44ca-acc8-db1501b993b6\";\r\nString jwksUri = \"https://login.microsoftonline.com/\" + tenantId + \"/discovery/keys\";\r\n\r\n\r\nURL url = new URL(jwksUri);\r\nHttpURLConnection conn = (HttpURLConnection) url.openConnection();\r\nconn.setRequestMethod(\"GET\");\r\nconn.setRequestProperty(\"Accept\", \"application/json\");\r\n\r\nif (conn.getResponseCode() != 200) {\r\n    throw new RuntimeException(\"Failed : HTTP error code : \" + conn.getResponseCode());\r\n}\r\n\r\ntry (BufferedReader br = new BufferedReader(new InputStreamReader((conn.getInputStream())))) {\r\n    StringBuilder sb = new StringBuilder();\r\n    String output;\r\n    while ((output = br.readLine()) != null) {\r\n        sb.append(output);\r\n    }\r\n    if (sb != null) {\r\n        return Map.of(\"response\", JsonUtils.fromJson(sb.toString(), Map.class));\r\n    }\r\n} finally {\r\n    conn.disconnect();\r\n}\r\n\r\nreturn [\"response\":Map.of(\"keys\", List.of())];",
				"compile_static":false,
				"captureStdOutput":false
			},
			"options":{
				"bulkheadConfig":{
					"enabled":false,
					"maxLeaseTimeUnit":"SECONDS",
					"maxWaitDurationUnit":"SECONDS"
				},
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"cacheKey":"{{ n_Sy0Hw.outputs.tenantId }}",
					"enabled":true,
					"timeToLive":"3600",
					"usagePolicy":"ALWAYS"
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false,
					"postHooks":[
						
					],
					"preHooks":[
						
					]
				},
				"logConfig":{
					"enabled":false,
					"logPolicies":[
						
					]
				},
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"MANUAL",
				"telemetryConfig":{
					"enableTelemetry":false,
					"metricConfigs":[
						
					]
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"stop"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"n_7xsRp@n_3E5R1@_6Puoh-1@y@error",
			"id":"n_9qBw3",
			"index":7,
			"skip":false,
			"subTitle":"Stop",
			"title":"Stop",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":800,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"n_7xsRp@n_3E5R1@_6Puoh-1@y@error",
			"id":"_buXRg",
			"index":8,
			"inputs":{
				"result":{
					"response":{
						"response":"123456",
						"message":"JWT validation failed",
						"statusCode":401
					},
					"proceed":false
				}
			},
			"skip":true,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":807,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"MANUAL",
			"groupId":"n_3E5R1@_6Puoh-1@y",
			"id":"n_NWFBG",
			"index":9,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"properties":{
						"decoded":{
							"type":"object",
							"properties":{
								"aud":{
									"type":"string",
									"title":"aud"
								},
								"iss":{
									"type":"string",
									"title":"iss"
								},
								"iat":{
									"type":"integer",
									"title":"iat"
								},
								"nbf":{
									"type":"integer",
									"title":"nbf"
								},
								"exp":{
									"type":"integer",
									"title":"exp"
								},
								"aio":{
									"type":"string",
									"title":"aio"
								},
								"appid":{
									"type":"string",
									"title":"appid"
								},
								"appidacr":{
									"type":"string",
									"title":"appidacr"
								},
								"idp":{
									"type":"string",
									"title":"idp"
								},
								"oid":{
									"type":"string",
									"title":"oid"
								},
								"rh":{
									"type":"string",
									"title":"rh"
								},
								"sub":{
									"type":"string",
									"title":"sub"
								},
								"tid":{
									"type":"string",
									"title":"tid"
								},
								"uti":{
									"type":"string",
									"title":"uti"
								},
								"ver":{
									"type":"string",
									"title":"ver"
								},
								"xms_ftd":{
									"type":"string",
									"title":"xms_ftd"
								}
							},
							"title":"decoded",
							"additionalProperties":false
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[
						"token",
						"keys"
					],
					"properties":{
						"token":{
							"type":"string",
							"title":"Token"
						},
						"keys":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Keys"
						}
					}
				},
				"code":"import com.nimbusds.jose.jwk.JWKSet\nimport com.nimbusds.jose.jwk.source.ImmutableJWKSet\nimport com.nimbusds.jose.jwk.source.JWKSource\nimport com.nimbusds.jose.proc.JWSVerificationKeySelector\nimport com.nimbusds.jose.proc.SecurityContext\nimport com.nimbusds.jwt.proc.ConfigurableJWTProcessor\nimport com.nimbusds.jwt.proc.DefaultJWTProcessor\nimport com.nimbusds.jose.JWSAlgorithm\n\ndef verifyToken(token, keys) {\n    def jwkSet = new JWKSet(keys.collect { it as Map })\n    JWKSource<SecurityContext> keySource = new ImmutableJWKSet<>(jwkSet)\n    ConfigurableJWTProcessor<SecurityContext> processor = new DefaultJWTProcessor<>()\n    processor.setJWSKeySelector(new JWSVerificationKeySelector<>(JWSAlgorithm.RS256, keySource))\n    \n    // Will throw exception if signature invalid or token expired\n    def claims = processor.process(token, null)\n    return claims\n}\n\n// Usage\ntry {\n    def decoded = verifyToken(token, keys)\n    return [\"decoded\": decoded]\n} catch (Exception e) {\n    return [\"error\": e.message]\n}\n",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"token":"{{ n_ET0k2.outputs.result.authorization }}",
					"keys":{
						"ua:type":"mappedArray",
						"source":"{{ n_7xsRp.outputs.result.response.keys }}",
						"items":"{{ n_7xsRp.outputs.result.response.keys[0] }}"
					}
				}
			},
			"options":{
				"bulkheadConfig":{
					"enabled":false,
					"maxLeaseTimeUnit":"SECONDS",
					"maxWaitDurationUnit":"SECONDS"
				},
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false,
					"usagePolicy":"ALWAYS"
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":true,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false,
					"postHooks":[
						
					],
					"preHooks":[
						
					]
				},
				"logConfig":{
					"enabled":false,
					"logPolicies":[
						
					]
				},
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"MANUAL",
				"telemetryConfig":{
					"enableTelemetry":false,
					"metricConfigs":[
						
					]
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"stop"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"n_NWFBG@n_3E5R1@_6Puoh-1@y@error",
			"id":"n_7U91x",
			"index":10,
			"skip":false,
			"subTitle":"Stop",
			"title":"Stop",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":800,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"n_NWFBG@n_3E5R1@_6Puoh-1@y@error",
			"id":"_ykicF",
			"index":11,
			"inputs":{
				"result":{
					"response":{
						"response":"345678",
						"message":"JWT validation failed",
						"statusCode":401
					},
					"proceed":false
				}
			},
			"skip":true,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":5,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"n_3E5R1@_6Puoh-1@y",
			"id":"n_cJWiB",
			"index":12,
			"inputs":{
				"filters":[
					{
						"property":"{{ n_NWFBG.outputs.result.decoded.iss }}",
						"filter":{
							"operator":"EQUAL",
							"value":"https://sts.windows.net/0d85160c-5899-44ca-acc8-db1501b993b6/"
						}
					},
					{
						"filters":[
							{
								"property":"{{ n_NWFBG.outputs.result.decoded.aud }}",
								"filter":{
									"operator":"EQUAL",
									"value":"https://graph.microsoft.com/"
								}
							},
							{
								"property":"{{ n_NWFBG.outputs.result.decoded.aud }}",
								"filter":{
									"operator":"EQUAL",
									"value":"https://service.flow.microsoft.com/"
								}
							},
							{
								"property":"{{ n_NWFBG.outputs.result.decoded.aud }}",
								"filter":{
									"operator":"EQUAL",
									"value":"https://eagprod.crm5.dynamics.com/"
								}
							}
						],
						"operator":"OR"
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"stop"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"n_cJWiB@n_3E5R1@_6Puoh-1@y@y",
			"id":"n_JIYvA",
			"index":13,
			"skip":false,
			"subTitle":"Stop",
			"title":"Stop",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":14,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"n_cJWiB@n_3E5R1@_6Puoh-1@y@y",
			"id":"n_q1A6h",
			"index":14,
			"inputs":{
				"result":{
					"response":{
						"headers":"{{ n_olwxh.outputs.response.headers }}",
						"message":"{{ n_olwxh.outputs.response.message }}",
						"response":"{{ n_olwxh.outputs.response.response }}",
						"statusCode":"{{ n_olwxh.outputs.response.statusCode }}"
					},
					"request":{
						"path":"{{ n_olwxh.outputs.request.path }}",
						"requestHeaders":"{{ n_olwxh.outputs.request.requestHeaders }}",
						"pathParams":"{{ n_olwxh.outputs.request.pathParams }}",
						"queryParams":"{{ n_olwxh.outputs.request.queryParams }}",
						"httpMethod":"{{ n_olwxh.outputs.request.httpMethod }}",
						"payload":"{{ n_olwxh.outputs.request.payload }}"
					},
					"proceed":true
				}
			},
			"skip":true,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"stop"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"n_cJWiB@n_3E5R1@_6Puoh-1@y@n",
			"id":"n_ahFJu",
			"index":15,
			"skip":false,
			"subTitle":"Stop",
			"title":"Stop",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":800,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"n_cJWiB@n_3E5R1@_6Puoh-1@y@n",
			"id":"_GOWnv",
			"index":16,
			"inputs":{
				"result":{
					"response":{
						"response":"{{ n_NWFBG.outputs.result.decoded }}",
						"message":"JWT validation failed- {{ n_NWFBG.outputs.result.decoded.aud }}-{{ n_NWFBG.outputs.result.decoded.iss }}",
						"statusCode":401
					},
					"proceed":false
				}
			},
			"skip":true,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":997,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"n_3E5R1@_6Puoh-1@n",
			"id":"n_hsux6",
			"index":17,
			"inputs":{
				"code":"return \"right\"",
				"compile_static":false,
				"captureStdOutput":false
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"stop"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"n_3E5R1@_6Puoh-1@n",
			"id":"n_S4hua",
			"index":18,
			"skip":false,
			"subTitle":"Stop",
			"title":"Stop",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":5,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"n_3E5R1@_6Puoh-1@n",
			"id":"n_9hMgd",
			"index":19,
			"inputs":{
				"result":{
					"response":{
						"response":"123456",
						"message":"JWT Validation Failed",
						"statusCode":401
					},
					"proceed":false
				}
			},
			"skip":true,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":161958,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":false,
	"tags":[
		
	],
	"version":7
}