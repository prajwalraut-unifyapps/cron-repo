{
	"appsUsed":[
		"storage_by_unifyapps"
	],
	"createdTime":1747000740965,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1758796450515,
		"deployedBy":1,
		"deployedDefinitionId":"68d51aa2d7e8855348a87aac",
		"status":"DEPLOYED",
		"version":72,
		"workflowVersion":111
	},
	"edges":[
		{
			"fromNodeId":"4aY8o",
			"priority":0,
			"skip":false,
			"toNodeId":"n_p6gF0",
			"type":"next"
		},
		{
			"fromNodeId":"n_p6gF0",
			"priority":0,
			"skip":false,
			"toNodeId":"n_dNzKM",
			"type":"next"
		},
		{
			"fromNodeId":"n_dNzKM",
			"priority":0,
			"skip":false,
			"toNodeId":"n_2Gq8V",
			"type":"next"
		},
		{
			"fromNodeId":"n_2Gq8V",
			"priority":0,
			"skip":false,
			"toNodeId":"gscvW",
			"type":"next"
		},
		{
			"fromNodeId":"gscvW",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"FQJgC",
			"type":"if"
		},
		{
			"fromNodeId":"FQJgC",
			"priority":0,
			"skip":false,
			"toNodeId":"fNpZG",
			"type":"next"
		},
		{
			"fromNodeId":"gscvW",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"fNpZG",
			"type":"next"
		},
		{
			"fromNodeId":"fNpZG",
			"name":"1",
			"priority":0,
			"skip":false,
			"toNodeId":"fNpZG@1",
			"type":"branch"
		},
		{
			"fromNodeId":"fNpZG@1",
			"priority":0,
			"skip":false,
			"toNodeId":"n_j2TSJ",
			"type":"next"
		},
		{
			"fromNodeId":"n_j2TSJ",
			"priority":0,
			"skip":false,
			"toNodeId":"n_S5iL7",
			"type":"next"
		},
		{
			"fromNodeId":"n_S5iL7",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_SFK4H",
			"type":"if"
		},
		{
			"fromNodeId":"n_SFK4H",
			"priority":0,
			"skip":false,
			"toNodeId":"n_uOy1Q",
			"type":"next"
		},
		{
			"fromNodeId":"n_S5iL7",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_ZMGAj",
			"type":"next"
		},
		{
			"fromNodeId":"_ZMGAj",
			"priority":0,
			"skip":false,
			"toNodeId":"n_t8yrJ",
			"type":"next"
		},
		{
			"fromNodeId":"n_uOy1Q",
			"priority":0,
			"skip":false,
			"toNodeId":"OyxLW",
			"type":"next"
		},
		{
			"fromNodeId":"n_t8yrJ",
			"priority":0,
			"skip":false,
			"toNodeId":"OyxLW",
			"type":"next"
		},
		{
			"fromNodeId":"OyxLW",
			"priority":0,
			"skip":false,
			"toNodeId":"c4W9Q",
			"type":"next"
		},
		{
			"fromNodeId":"c4W9Q",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"CVUId",
			"type":"if"
		},
		{
			"fromNodeId":"CVUId",
			"priority":0,
			"skip":false,
			"toNodeId":"bJJUf",
			"type":"next"
		},
		{
			"fromNodeId":"c4W9Q",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"bJJUf",
			"type":"next"
		},
		{
			"fromNodeId":"bJJUf",
			"priority":0,
			"skip":false,
			"toNodeId":"6zmM2",
			"type":"next"
		},
		{
			"fromNodeId":"6zmM2",
			"priority":0,
			"skip":false,
			"toNodeId":"Bd8Is",
			"type":"next"
		},
		{
			"fromNodeId":"Bd8Is",
			"priority":0,
			"skip":false,
			"toNodeId":"n_RENmP",
			"type":"next"
		},
		{
			"fromNodeId":"n_RENmP",
			"priority":0,
			"skip":false,
			"toNodeId":"n_62NZD",
			"type":"loop"
		},
		{
			"fromNodeId":"n_62NZD",
			"priority":0,
			"skip":false,
			"toNodeId":"n_bzUwL",
			"type":"next"
		},
		{
			"fromNodeId":"n_bzUwL",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_NM4rG",
			"type":"if"
		},
		{
			"fromNodeId":"n_NM4rG",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"n_RENmP",
			"type":"next"
		},
		{
			"fromNodeId":"n_bzUwL",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_RENmP",
			"type":"next"
		},
		{
			"fromNodeId":"n_RENmP",
			"priority":0,
			"skip":false,
			"toNodeId":"n_w8wDz",
			"type":"next"
		},
		{
			"fromNodeId":"n_w8wDz",
			"priority":0,
			"skip":false,
			"toNodeId":"n_nK38E",
			"type":"next"
		},
		{
			"fromNodeId":"n_nK38E",
			"priority":0,
			"skip":false,
			"toNodeId":"n_rOz5H",
			"type":"next"
		},
		{
			"fromNodeId":"n_rOz5H",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_SoEmC",
			"type":"if"
		},
		{
			"fromNodeId":"n_SoEmC",
			"priority":0,
			"skip":false,
			"toNodeId":"n_xIVld",
			"type":"next"
		},
		{
			"fromNodeId":"n_rOz5H",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_o88ch",
			"type":"next"
		},
		{
			"fromNodeId":"_o88ch",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Jz1sc",
			"type":"next"
		},
		{
			"fromNodeId":"n_xIVld",
			"priority":0,
			"skip":false,
			"toNodeId":"qz4IS",
			"type":"next"
		},
		{
			"fromNodeId":"n_Jz1sc",
			"priority":0,
			"skip":false,
			"toNodeId":"qz4IS",
			"type":"next"
		},
		{
			"fromNodeId":"qz4IS",
			"priority":0,
			"skip":false,
			"toNodeId":"z9wQe",
			"type":"next"
		},
		{
			"fromNodeId":"z9wQe",
			"priority":0,
			"skip":false,
			"toNodeId":"umRBL",
			"type":"next"
		},
		{
			"fromNodeId":"umRBL",
			"priority":0,
			"skip":false,
			"toNodeId":"X0W3O",
			"type":"next"
		},
		{
			"fromNodeId":"fNpZG",
			"name":"2",
			"priority":0,
			"skip":false,
			"toNodeId":"fNpZG@2",
			"type":"branch"
		},
		{
			"fromNodeId":"fNpZG@2",
			"priority":0,
			"skip":false,
			"toNodeId":"n_msKQf",
			"type":"next"
		},
		{
			"fromNodeId":"n_msKQf",
			"priority":0,
			"skip":false,
			"toNodeId":"n_MN9Xq",
			"type":"next"
		},
		{
			"fromNodeId":"n_MN9Xq",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"9p1oe",
			"type":"if"
		},
		{
			"fromNodeId":"9p1oe",
			"priority":0,
			"skip":false,
			"toNodeId":"1q6LI",
			"type":"next"
		},
		{
			"fromNodeId":"1q6LI",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Pe75e",
			"type":"next"
		},
		{
			"fromNodeId":"n_MN9Xq",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_G8RTL",
			"type":"next"
		},
		{
			"fromNodeId":"_G8RTL",
			"priority":0,
			"skip":false,
			"toNodeId":"_6804d",
			"type":"next"
		},
		{
			"fromNodeId":"_6804d",
			"priority":0,
			"skip":false,
			"toNodeId":"n_jrGYy",
			"type":"next"
		},
		{
			"fromNodeId":"X0W3O",
			"priority":0,
			"skip":false,
			"toNodeId":"y0Cab",
			"type":"next"
		},
		{
			"fromNodeId":"n_Pe75e",
			"priority":0,
			"skip":false,
			"toNodeId":"y0Cab",
			"type":"next"
		},
		{
			"fromNodeId":"n_jrGYy",
			"priority":0,
			"skip":false,
			"toNodeId":"y0Cab",
			"type":"next"
		},
		{
			"fromNodeId":"fNpZG",
			"name":"default",
			"priority":0,
			"skip":false,
			"toNodeId":"y0Cab",
			"type":"branch"
		},
		{
			"fromNodeId":"y0Cab",
			"priority":0,
			"skip":false,
			"toNodeId":"sMdDO",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"66eb213bdee489482ed19ecb",
	"lastModifiedBy":-1,
	"lcName":"observability | analytics final",
	"modifiedTime":1758820933762,
	"name":"Observability | Analytics Final",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":52,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fenGp-1",
			"id":"4aY8o",
			"index":1,
			"inputs":{
				"result":{
					"type":"object",
					"properties":{
						"totalSessions":{
							"type":"integer",
							"title":"Total Sessions"
						},
						"sessions":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"sessionId":{
										"type":"string",
										"title":"Session Id"
									},
									"lastResponseTime":{
										"type":"integer",
										"title":"Last Response Time"
									},
									"startTime":{
										"type":"integer",
										"title":"Start Time"
									},
									"sessionTime":{
										"type":"string",
										"title":"Session Time"
									},
									"tokenUsed":{
										"type":"string",
										"title":"Token Used"
									},
									"customerProfileId":{
										"type":"string",
										"title":"Customer Profile Id"
									},
									"customerName":{
										"type":"string",
										"title":"Customer Name"
									},
									"summary":{
										"type":"string",
										"title":"Summary"
									},
									"firstMessage":{
										"type":"string",
										"title":"First Message"
									},
									"lastMessage":{
										"type":"string",
										"title":"Last Message"
									},
									"traceCount":{
										"type":"integer",
										"title":"Trace Count"
									},
									"cost":{
										"type":"number",
										"title":"Cost"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Sessions",
							"required":[]
						},
						"avgTokenUsed":{
							"type":"string",
							"title":"Avg Token Used"
						},
						"avgSessionDuration":{
							"type":"string",
							"title":"Avg Session Duration"
						},
						"avgTraces":{
							"type":"number",
							"title":"Avg Traces"
						}
					},
					"additionalProperties":false,
					"required":[
						"avgTraces"
					]
				},
				"setup":{
					"type":"object",
					"properties":{
						"agentId":{
							"type":"string",
							"title":"Agent Id"
						},
						"startTime":{
							"type":"string",
							"title":"Start Time"
						},
						"endTime":{
							"type":"string",
							"title":"End Time"
						},
						"limit":{
							"type":"integer",
							"title":"Limit"
						},
						"offset":{
							"type":"integer",
							"title":"Offset"
						},
						"search":{
							"type":"string",
							"title":"Search"
						},
						"filterCustomerProfileIds":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Filter Customer Profile Ids"
						}
					},
					"additionalProperties":false,
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger from automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":451,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fenGp-1",
			"id":"n_p6gF0",
			"index":2,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"startTime":{
							"type":"number",
							"title":"Start Time"
						},
						"endTime":{
							"type":"number",
							"title":"End Time"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"startDate":{
							"type":"string",
							"title":"Start Date"
						},
						"endDate":{
							"type":"string",
							"title":"End Date"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"import java.time.Instant\nimport java.time.ZonedDateTime\nimport java.time.format.DateTimeFormatter\n\ndef getEpochMillis(timestamp) {\n  ZonedDateTime zdt = ZonedDateTime.parse(timestamp, DateTimeFormatter.ISO_DATE_TIME)\n  return zdt.toInstant().toEpochMilli()\n}\n\ndef startTime, endTime\nif(!binding.hasVariable('startDate'))\n{\n  startTime=0L\n}\nelse\n{\n  startTime = getEpochMillis(startDate)\n}\nif(!binding.hasVariable('endDate'))\n{\n  endTime=System.currentTimeMillis()\n}\nelse\n{\n  endTime = getEpochMillis(endDate)\n}\n\nreturn ['startTime':startTime, 'endTime':endTime]",
				"parameters":{
					"startDate":"{{ 4aY8o.outputs.startTime }}",
					"endDate":"{{ 4aY8o.outputs.endTime }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":458,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fenGp-1",
			"id":"n_dNzKM",
			"index":3,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"startTime":{
							"type":"number",
							"title":"Start Time"
						},
						"endTime":{
							"type":"number",
							"title":"End Time"
						}
					},
					"required":[]
				}
			},
			"inputs":{
				"startTime":"{{ n_p6gF0.outputs.result.startTime }}",
				"endTime":"{{ n_p6gF0.outputs.result.endTime }}"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"startTime":{
							"type":"number",
							"title":"Start Time"
						},
						"endTime":{
							"type":"number",
							"title":"End Time"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":449,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fenGp-1",
			"id":"n_2Gq8V",
			"index":4,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"Initial list items",
							"ui:description":"Set the initial values of the list (defaults to empty)"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"additionalProperties":false,
									"type":[
										"object",
										"string",
										"number",
										"boolean",
										"integer"
									],
									"properties":{
										"id":{
											"type":"string",
											"title":"Id"
										},
										"name":{
											"type":"string",
											"title":"Name"
										}
									},
									"required":[]
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray"
				},
				"ua:title":"customerProfile",
				"ua:list_type":"OBJECT"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"customerProfile",
							"disableActions":true,
							"items":{
								"type":"object",
								"properties":{
									"id":{
										"type":"string",
										"title":"Id"
									},
									"name":{
										"type":"string",
										"title":"Name"
									}
								},
								"required":[]
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":0,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fenGp-1",
			"id":"gscvW",
			"index":5,
			"inputs":{
				"filters":[
					{
						"property":"{{ 4aY8o.outputs.agentId }}",
						"filter":{
							"operator":"MISSING"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":0,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"gscvW@fenGp-1@y",
			"id":"FQJgC",
			"index":6,
			"inputs":{
				"result":{
					"totalSessions":0
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"branch",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fenGp-1",
			"id":"fNpZG",
			"index":7,
			"inputs":{
				"branches":[
					{
						"id":"1",
						"inputs":{
							"name":"Lookup Related Data"
						}
					},
					{
						"id":"2",
						"inputs":{
							"name":"Session Analytics"
						}
					},
					{
						"id":"default"
					}
				]
			},
			"skip":false,
			"subTitle":"Branch",
			"title":"",
			"type":"BRANCH"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":36,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fNpZG@fenGp-1@1",
			"id":"fNpZG@1",
			"index":8,
			"inputs":{
				"name":"Lookup Related Data"
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":458,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fNpZG@fenGp-1@1",
			"id":"n_j2TSJ",
			"index":9,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"sessionIds":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"columns":{
										"type":"object",
										"properties":{
											"endTime":{
												"type":"integer",
												"title":"endTime"
											},
											"sessionId":{
												"type":"string",
												"title":"sessionId"
											},
											"startTime":{
												"type":"integer",
												"title":"startTime"
											}
										},
										"title":"columns",
										"additionalProperties":false
									}
								},
								"additionalProperties":false
							},
							"title":"sessionIds"
						}
					},
					"required":[]
				}
			},
			"inputs":{},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"sessionIds":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"columns":{
										"type":"object",
										"properties":{
											"endTime":{
												"type":"integer",
												"title":"endTime"
											},
											"sessionId":{
												"type":"string",
												"title":"sessionId"
											},
											"startTime":{
												"type":"integer",
												"title":"startTime"
											}
										},
										"title":"columns",
										"additionalProperties":false
									}
								},
								"additionalProperties":false
							},
							"title":"sessionIds"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":439,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fNpZG@fenGp-1@1",
			"id":"n_S5iL7",
			"index":10,
			"inputs":{
				"filters":[
					{
						"property":"{{ __ENV__.outputs.read_traces_from_e_traces }}",
						"filter":{
							"operator":"EQUAL",
							"value":"true"
						}
					},
					{
						"property":"{{ __ENV__.outputs.read_traces_from_e_traces }}",
						"filter":{
							"operator":"MISSING"
						}
					}
				],
				"operator":"OR"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"additional":{
				"xsdSchemaConfig":{
					"root":{}
				}
			},
			"context":{
				"appName":"analytics_by_unifyapps",
				"resourceVersion":445,
				"resourceName":"analytics_by_unifyapps_execute_query",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_S5iL7@fNpZG@fenGp-1@1@y",
			"id":"n_SFK4H",
			"index":11,
			"inputs":{
				"outputSchema":{
					"type":"object",
					"additionalProperties":false,
					"properties":{
						"columns":{
							"type":"object",
							"properties":{
								"startTime":{
									"type":"integer",
									"title":"startTime"
								},
								"sessionId":{
									"type":"string",
									"title":"sessionId"
								},
								"endTime":{
									"type":"integer",
									"title":"endTime"
								}
							},
							"title":"columns",
							"additionalProperties":false
						}
					}
				},
				"query":"SELECT \n    eTraces._pr_caseId AS sessionId,\n    MIN(serviceHubCase._pr_additional__firstFanMessageCreatedTime) AS startTime,\n    MAX(serviceHubCase._pr_additional__lastBrandMessageTime) AS endTime\nFROM ENTITY_e_traces AS eTraces\nJOIN ENTITY_service_hub_case AS serviceHubCase \n    ON (eTraces._pr_caseId = serviceHubCase.id)\nWHERE eTraces._pr_fromAutomationId IN (\n    '66ac70650f725f5b425d12d8',\n    '67933cc866e1f1098aa02c39',\n    '66b32227db0c6546b93d3acc',\n    '66a1e74accc70b77f9bf0308',\n    '66b356891a78c401cb586890',\n    '67e6651efd3591529146b261',\n    '67e4346d4718117333c7ee9a',\n    '66b3353e1a78c401cb583431',\n    '679c6521a6583456a7198e97',\n    '68206abcccc45f469e288de0',\n    '6853d10e492bca4185ba983d',\n    '6851442f9e30586f552a6d73','67df12719fa26d792211be4f'\n)\nAND eTraces.timestamp BETWEEN '{{ 4aY8o.outputs.startTime }}' AND '{{ 4aY8o.outputs.endTime }}'\nAND serviceHubCase.timestamp BETWEEN '{{ 4aY8o.outputs.startTime }}' AND '{{ 4aY8o.outputs.endTime }}'\n  AND eTraces._pr_aiAgentId = '{{ 4aY8o.outputs.agentId }}'\nGROUP BY eTraces._pr_caseId\nORDER BY startTime DESC\nLIMIT {{ 4aY8o.outputs.offset }}, {{ 4aY8o.outputs.limit }};\n",
				"group":"ENTITY_REPORTING"
			},
			"skip":false,
			"subTitle":"Analytics by UnifyApps",
			"title":"Execute Analytics SQL Query",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_S5iL7@fNpZG@fenGp-1@1@y",
			"id":"n_uOy1Q",
			"index":12,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_j2TSJ.outputs.sessionIds }}",
						"value":{
							"source":"{{ n_SFK4H.outputs.objects }}",
							"ua:type":"mappedArray",
							"items":{
								"columns":{
									"endTime":"{{ n_SFK4H.outputs.objects[0].columns.endTime }}",
									"sessionId":"{{ n_SFK4H.outputs.objects[0].columns.sessionId }}",
									"startTime":"{{ n_SFK4H.outputs.objects[0].columns.startTime }}"
								}
							}
						}
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"analytics_by_unifyapps",
				"resourceVersion":70,
				"resourceName":"analytics_by_unifyapps_query_reports",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_S5iL7@fNpZG@fenGp-1@1@n",
			"id":"_ZMGAj",
			"index":13,
			"inputs":{
				"projections":[
					{
						"aggregationFunction":"MIN",
						"includePercentageChange":false,
						"alias":"startTime",
						"name":"START_TIME"
					},
					{
						"aggregationFunction":"GROUP",
						"includePercentageChange":false,
						"name":"CASE_ID",
						"alias":"sessionId"
					},
					{
						"aggregationFunction":"MAX",
						"includePercentageChange":false,
						"name":"END_TIME",
						"alias":"endTime"
					}
				],
				"filter":{
					"filters":[
						{
							"property":"WORKFLOW_ID",
							"filter":{
								"operator":"EQUAL",
								"value":"66966960e8797a59f4a46292"
							}
						},
						{
							"property":"AI_AGENT_ID",
							"filter":{
								"operator":"EQUAL",
								"value":"{{ 4aY8o.outputs.agentId }}"
							}
						}
					],
					"operator":"AND"
				},
				"searchField":{
					"fields":""
				},
				"entityType":"WORKFLOW_EXECUTION",
				"page":{
					"offset":"{{ 4aY8o.outputs.offset }}",
					"limit":"{{ 4aY8o.outputs.limit }}"
				},
				"sorts":[
					{
						"field":"startTime",
						"order":"DESC"
					}
				],
				"timeFilter":{
					"since":"{{ n_dNzKM.outputs.startTime }}",
					"until":"{{ n_dNzKM.outputs.endTime }}"
				},
				"group":"PLATFORM"
			},
			"skip":false,
			"subTitle":"Fetch Session Ids",
			"title":"Analytics Query",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_S5iL7@fNpZG@fenGp-1@1@n",
			"id":"n_t8yrJ",
			"index":14,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_j2TSJ.outputs.sessionIds }}",
						"value":{
							"source":"{{ _ZMGAj.outputs.objects }}",
							"ua:type":"mappedArray",
							"items":{
								"columns":{
									"endTime":"{{ _ZMGAj.outputs.objects[0].columns.endTime }}",
									"sessionId":"{{ _ZMGAj.outputs.objects[0].columns.sessionId }}",
									"startTime":"{{ _ZMGAj.outputs.objects[0].columns.startTime }}"
								}
							}
						}
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"analytics_by_unifyapps",
				"resourceVersion":70,
				"resourceName":"analytics_by_unifyapps_query_reports",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fNpZG@fenGp-1@1",
			"id":"OyxLW",
			"index":15,
			"inputs":{
				"projections":[
					{
						"aggregationFunction":"MIN",
						"includePercentageChange":false,
						"alias":"startTime",
						"name":"START_TIME"
					},
					{
						"aggregationFunction":"GROUP",
						"includePercentageChange":false,
						"name":"CASE_ID",
						"alias":"sessionId"
					},
					{
						"aggregationFunction":"MAX",
						"includePercentageChange":false,
						"name":"END_TIME",
						"alias":"endTime"
					}
				],
				"filter":{
					"filters":[
						{
							"property":"WORKFLOW_ID",
							"filter":{
								"operator":"EQUAL",
								"value":"66966960e8797a59f4a46292"
							}
						},
						{
							"property":"AI_AGENT_ID",
							"filter":{
								"operator":"EQUAL",
								"value":"{{ 4aY8o.outputs.agentId }}"
							}
						}
					],
					"operator":"AND"
				},
				"searchField":{
					"fields":""
				},
				"entityType":"WORKFLOW_EXECUTION",
				"page":{
					"offset":"{{ 4aY8o.outputs.offset }}",
					"limit":"{{ 4aY8o.outputs.limit }}"
				},
				"sorts":[
					{
						"field":"startTime",
						"order":"DESC"
					}
				],
				"timeFilter":{
					"since":"{{ n_dNzKM.outputs.startTime }}",
					"until":"{{ n_dNzKM.outputs.endTime }}"
				},
				"group":"PLATFORM"
			},
			"skip":true,
			"subTitle":"Fetch Session Ids",
			"title":"Analytics Query",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":50,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fNpZG@fenGp-1@1",
			"id":"c4W9Q",
			"index":16,
			"inputs":{
				"filters":[
					{
						"property":"=LEN({{ n_j2TSJ.outputs.sessionIds }})",
						"filter":{
							"operator":"EQUAL",
							"value":"0"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":48,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"c4W9Q@fNpZG@fenGp-1@1@y",
			"id":"CVUId",
			"index":17,
			"inputs":{
				"result":{
					"avgSessionDuration":"0",
					"totalSessions":0,
					"avgTokenUsed":"0"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":301,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fNpZG@fenGp-1@1",
			"id":"bJJUf",
			"index":18,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"Initial list items",
							"ui:description":"Set the initial values of the list (defaults to empty)"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"additionalProperties":false,
									"type":[
										"object",
										"string",
										"number",
										"boolean",
										"integer"
									],
									"properties":{}
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray",
					"source":"{{ n_j2TSJ.outputs.sessionIds }}",
					"items":"{{ n_j2TSJ.outputs.sessionIds[0].columns.sessionId }}"
				},
				"ua:title":"sessionIds",
				"ua:list_type":"STRING"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"sessionIds",
							"disableActions":true,
							"items":{
								"type":"string"
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":2011,
				"resourceName":"storage_by_unifyapps_get_records_by_ids",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fNpZG@fenGp-1@1",
			"id":"6zmM2",
			"index":19,
			"inputs":{
				"object_type":"service_hub_case",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"ids":{
					"ua:type":"mappedArray",
					"source":"{{ n_j2TSJ.outputs.sessionIds }}",
					"items":"{{ n_j2TSJ.outputs.sessionIds[0].columns.sessionId }}"
				},
				"translationsOption":"DEFAULT",
				"readThroughSessionVariables":false
			},
			"skip":false,
			"subTitle":"Fetch Session Details",
			"title":"Get records by IDs",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":2011,
				"resourceName":"storage_by_unifyapps_get_records_by_ids",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fNpZG@fenGp-1@1",
			"id":"Bd8Is",
			"index":20,
			"inputs":{
				"object_type":"customer_profile",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"ids":{
					"ua:type":"mappedArray",
					"source":"{{ 6zmM2.outputs.objects }}",
					"items":"{{ 6zmM2.outputs.objects[0].properties.fromCustomerUserId }}"
				},
				"translationsOption":"DEFAULT",
				"readThroughSessionVariables":false
			},
			"skip":false,
			"subTitle":"Fetch Customer Details",
			"title":"Get records by IDs",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":455,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fNpZG@fenGp-1@1",
			"id":"n_RENmP",
			"index":21,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ Bd8Is.outputs.objects }}",
				"captureIterations":false
			},
			"skip":false,
			"subTitle":"Loop",
			"title":"For each loop",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"standard_entities",
				"resourceVersion":747,
				"resourceName":"standard_entities_fetch_entities",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_RENmP@fNpZG@fenGp-1@1@l",
			"id":"n_62NZD",
			"index":22,
			"inputs":{
				"projections":[
					{
						"aggregationFunction":"GROUP",
						"name":"id"
					}
				],
				"filter":{
					"filters":[
						{
							"property":"contactDetails.email",
							"filter":{
								"operator":"EQUAL",
								"value":"{{ n_RENmP.outputs.item.properties.email }}"
							}
						}
					],
					"operator":"AND"
				},
				"entityType":"User"
			},
			"skip":false,
			"subTitle":"Standard entities by UnifyApps",
			"title":"Fetch entities",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":438,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_RENmP@fNpZG@fenGp-1@1@l",
			"id":"n_bzUwL",
			"index":23,
			"inputs":{
				"filters":[
					{
						"property":"{{ 4aY8o.outputs.filterCustomerProfileIds }}",
						"filter":{
							"operator":"MISSING"
						}
					},
					{
						"property":"{{ n_62NZD.outputs.objects[0].columns.id }}",
						"filter":{
							"operator":"IN",
							"value":"{{ 4aY8o.outputs.filterCustomerProfileIds }}"
						}
					}
				],
				"operator":"OR"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":452,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_bzUwL@n_RENmP@fNpZG@fenGp-1@1@l@y",
			"id":"n_NM4rG",
			"index":24,
			"inputs":{
				"itemToAdd":{
					"id":"{{ n_RENmP.outputs.item.id }}",
					"name":"{{ n_RENmP.outputs.item.properties.name }}"
				},
				"insertLocation":"END",
				"listName":"{{ n_2Gq8V.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.sessionIds.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":451,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fNpZG@fenGp-1@1",
			"id":"n_w8wDz",
			"index":25,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"sessionIdCsv":{
							"type":"string",
							"title":"Session Id Csv"
						},
						"startTime":{
							"type":"string",
							"title":"Start Time"
						},
						"endTime":{
							"type":"string",
							"title":"End Time"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"sessionIds":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Session Ids"
						},
						"startTime":{
							"type":"string",
							"title":"Start Time"
						},
						"endTime":{
							"type":"string",
							"title":"End Time"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"import java.time.*\nimport java.time.format.DateTimeFormatter\n\nlong toEpochMillis(String dateTimeWithZone) {\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"yyyy-MM-dd'T'HH:mm:ssXXX\")\n    OffsetDateTime odt = OffsetDateTime.parse(dateTimeWithZone, formatter)\n    return odt.toInstant().toEpochMilli()\n}\n\nif(!binding.hasVariable('sessionIds')) {\n  return [sessionIdsCsv : null]\n}\n\n\nreturn [\n    sessionIdCsv: sessionIds.collect { \"'${it}'\" }.join(','),\n    startTime : toEpochMillis(startTime),\n    endTime : toEpochMillis(endTime)\n]\n",
				"parameters":{
					"sessionIds":{
						"source":"{{ bJJUf.outputs.items }}",
						"ua:type":"mappedArray",
						"items":"{{ bJJUf.outputs.items[0] }}"
					},
					"startTime":"{{ 4aY8o.outputs.startTime }}",
					"endTime":"{{ 4aY8o.outputs.endTime }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fNpZG@fenGp-1@1",
			"id":"n_nK38E",
			"index":26,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"result":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"columns":{
										"type":"object",
										"properties":{
											"caseId":{
												"type":"string",
												"title":"caseId"
											},
											"firstMessageId":{
												"type":"string",
												"title":"firstMessageId"
											},
											"lastMessageId":{
												"type":"string",
												"title":"lastMessageId"
											},
											"messageCount":{
												"type":"integer",
												"title":"messageCount"
											}
										},
										"title":"columns",
										"additionalProperties":false
									}
								},
								"additionalProperties":false
							},
							"title":"result"
						}
					}
				}
			},
			"inputs":{},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"result":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"columns":{
										"type":"object",
										"properties":{
											"caseId":{
												"type":"string",
												"title":"caseId"
											},
											"firstMessageId":{
												"type":"string",
												"title":"firstMessageId"
											},
											"lastMessageId":{
												"type":"string",
												"title":"lastMessageId"
											},
											"messageCount":{
												"type":"integer",
												"title":"messageCount"
											}
										},
										"title":"columns",
										"additionalProperties":false
									}
								},
								"additionalProperties":false
							},
							"title":"result"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":439,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fNpZG@fenGp-1@1",
			"id":"n_rOz5H",
			"index":27,
			"inputs":{
				"filters":[
					{
						"property":"{{ __ENV__.outputs.read_traces_from_e_traces }}",
						"filter":{
							"operator":"EQUAL",
							"value":"true"
						}
					},
					{
						"property":"{{ __ENV__.outputs.read_traces_from_e_traces }}",
						"filter":{
							"operator":"MISSING"
						}
					}
				],
				"operator":"OR"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"additional":{
				"xsdSchemaConfig":{
					"root":{}
				}
			},
			"context":{
				"appName":"analytics_by_unifyapps",
				"resourceVersion":445,
				"resourceName":"analytics_by_unifyapps_execute_query",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_rOz5H@fNpZG@fenGp-1@1@y",
			"id":"n_SoEmC",
			"index":28,
			"inputs":{
				"outputSchema":{
					"type":"object",
					"additionalProperties":false,
					"properties":{
						"columns":{
							"type":"object",
							"properties":{
								"messageCount":{
									"type":"integer",
									"title":"messageCount"
								},
								"caseId":{
									"type":"string",
									"title":"caseId"
								},
								"firstMessageId":{
									"type":"string",
									"title":"firstMessageId"
								},
								"lastMessageId":{
									"type":"string",
									"title":"lastMessageId"
								}
							},
							"title":"columns",
							"additionalProperties":false
						}
					}
				},
				"query":"SELECT \n    _pr_caseId AS caseId,\n    COUNT(DISTINCT _pr_messageId) AS messageCount,\n    MIN(_pr_messageId) AS firstMessageId,\n    MAX(_pr_messageId) AS lastMessageId\nFROM ENTITY_e_traces\nWHERE _pr_fromAutomationId IN (\n  '67df12719fa26d792211be4f',\n    '6851442f9e30586f552a6d73',\n    '66ac70650f725f5b425d12d8',\n    '66966960e8797a59f4a46292',\n    '66b32227db0c6546b93d3acc',\n    '66a1e74accc70b77f9bf0308',\n    '66b356891a78c401cb586890',\n    '67e6651efd3591529146b261',\n    '67e4346d4718117333c7ee9a',\n    '66b3353e1a78c401cb583431',\n    '679c6521a6583456a7198e97',\n    '68206abcccc45f469e288de0',\n    '6853d10e492bca4185ba983d'\n)\n  AND _pr_caseId IN ({{ n_w8wDz.outputs.result.sessionIdCsv }})\n  AND timestamp BETWEEN '{{ 4aY8o.outputs.startTime }}' AND '{{ 4aY8o.outputs.endTime }}'\nGROUP BY _pr_caseId",
				"group":"ENTITY_REPORTING"
			},
			"skip":false,
			"subTitle":"Analytics by UnifyApps",
			"title":"Execute Analytics SQL Query",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_rOz5H@fNpZG@fenGp-1@1@y",
			"id":"n_xIVld",
			"index":29,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_nK38E.outputs.result }}",
						"value":{
							"items":{
								"columns":{
									"caseId":"{{ n_SoEmC.outputs.objects[0].columns.caseId }}",
									"firstMessageId":"{{ n_SoEmC.outputs.objects[0].columns.firstMessageId }}",
									"lastMessageId":"{{ n_SoEmC.outputs.objects[0].columns.lastMessageId }}",
									"messageCount":"{{ n_SoEmC.outputs.objects[0].columns.messageCount }}"
								}
							},
							"ua:type":"mappedArray",
							"source":"{{ n_SoEmC.outputs.objects }}"
						}
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"analytics_by_unifyapps",
				"resourceVersion":303,
				"resourceName":"analytics_by_unifyapps_query_reports",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_rOz5H@fNpZG@fenGp-1@1@n",
			"id":"_o88ch",
			"index":30,
			"inputs":{
				"projections":[
					{
						"aggregationFunction":"GROUP",
						"includePercentageChange":false,
						"name":"CASE_ID"
					},
					{
						"aggregationFunction":"DISTINCT_COUNT",
						"includePercentageChange":false,
						"name":"MESSAGE_ID",
						"alias":"messageCount"
					},
					{
						"aggregationFunction":"MIN",
						"includePercentageChange":false,
						"name":"MESSAGE_ID",
						"alias":"firstMessageId"
					},
					{
						"aggregationFunction":"MAX",
						"includePercentageChange":false,
						"alias":"lastMessageId",
						"name":"MESSAGE_ID"
					}
				],
				"filter":{
					"filters":[
						{
							"property":"WORKFLOW_ID",
							"filter":{
								"operator":"EQUAL",
								"value":"66966960e8797a59f4a46292"
							}
						},
						{
							"property":"CASE_ID",
							"filter":{
								"operator":"IN",
								"value":"{{ bJJUf.outputs.items }}"
							}
						}
					],
					"operator":"AND"
				},
				"entityType":"WORKFLOW_EXECUTION",
				"page":{
					"offset":0,
					"limit":"{{ 4aY8o.outputs.limit }}"
				},
				"sorts":[],
				"timeFilter":{
					"timeField":"START_TIME",
					"since":"{{ n_dNzKM.outputs.startTime }}",
					"until":"{{ n_dNzKM.outputs.endTime }}"
				},
				"group":"PLATFORM"
			},
			"skip":false,
			"subTitle":"Analytics by UnifyApps",
			"title":"Analytics Query",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_rOz5H@fNpZG@fenGp-1@1@n",
			"id":"n_Jz1sc",
			"index":31,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_nK38E.outputs.result }}",
						"value":{
							"items":{
								"columns":{
									"caseId":"{{ _o88ch.outputs.objects[0].columns.CASE_ID }}",
									"firstMessageId":"{{ _o88ch.outputs.objects[0].columns.firstMessageId }}",
									"lastMessageId":"{{ _o88ch.outputs.objects[0].columns.lastMessageId }}",
									"messageCount":"{{ _o88ch.outputs.objects[0].columns.messageCount }}"
								}
							},
							"ua:type":"mappedArray",
							"source":"{{ _o88ch.outputs.objects }}"
						}
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"analytics_by_unifyapps",
				"resourceVersion":303,
				"resourceName":"analytics_by_unifyapps_query_reports",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fNpZG@fenGp-1@1",
			"id":"qz4IS",
			"index":32,
			"inputs":{
				"projections":[
					{
						"aggregationFunction":"GROUP",
						"includePercentageChange":false,
						"name":"CASE_ID"
					},
					{
						"aggregationFunction":"DISTINCT_COUNT",
						"includePercentageChange":false,
						"name":"MESSAGE_ID",
						"alias":"messageCount"
					},
					{
						"aggregationFunction":"MIN",
						"includePercentageChange":false,
						"name":"MESSAGE_ID",
						"alias":"firstMessageId"
					},
					{
						"aggregationFunction":"MAX",
						"includePercentageChange":false,
						"alias":"lastMessageId",
						"name":"MESSAGE_ID"
					}
				],
				"filter":{
					"filters":[
						{
							"property":"WORKFLOW_ID",
							"filter":{
								"operator":"EQUAL",
								"value":"66966960e8797a59f4a46292"
							}
						},
						{
							"property":"CASE_ID",
							"filter":{
								"operator":"IN",
								"value":"{{ bJJUf.outputs.items }}"
							}
						}
					],
					"operator":"AND"
				},
				"entityType":"WORKFLOW_EXECUTION",
				"page":{
					"offset":0,
					"limit":"{{ 4aY8o.outputs.limit }}"
				},
				"sorts":[],
				"timeFilter":{
					"timeField":"START_TIME",
					"since":"{{ n_dNzKM.outputs.startTime }}",
					"until":"{{ n_dNzKM.outputs.endTime }}"
				},
				"group":"PLATFORM"
			},
			"skip":true,
			"subTitle":"Analytics by UnifyApps",
			"title":"Analytics Query",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":2538,
				"resourceName":"storage_by_unifyapps_get_records_by_ids",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fNpZG@fenGp-1@1",
			"id":"z9wQe",
			"index":33,
			"inputs":{
				"object_type":"service_hub_message",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"ids":{
					"ua:type":"mappedArray",
					"source":"{{ n_nK38E.outputs.result }}",
					"items":"{{ n_nK38E.outputs.result[0].columns.firstMessageId }}"
				},
				"translationsOption":"DEFAULT",
				"readThroughSessionVariables":false
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Get records by IDs",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":672,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fNpZG@fenGp-1@1",
			"id":"umRBL",
			"index":34,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"Initial list items",
							"ui:description":"Set the initial values of the list (defaults to empty)"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"additionalProperties":false,
									"type":[
										"object",
										"string",
										"number",
										"boolean",
										"integer"
									],
									"properties":{}
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray",
					"source":"{{ n_nK38E.outputs.result }}",
					"items":"{{ n_nK38E.outputs.result[0].columns.firstMessageId }}"
				},
				"ua:title":"messageIds",
				"ua:list_type":"STRING"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"messageIds",
							"disableActions":true,
							"items":{
								"type":"string"
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":2606,
				"resourceName":"storage_by_unifyapps_fetch_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fNpZG@fenGp-1@1",
			"id":"X0W3O",
			"index":35,
			"inputs":{
				"triggerInputCondition":{
					"filters":[
						{
							"property":"properties_additional_parentMessageId",
							"filter":{
								"operator":"IN",
								"value":"{{ umRBL.outputs.items }}"
							}
						},
						{
							"filters":[
								{
									"property":"properties_additional_temporaryMessage",
									"filter":{
										"operator":"EQUAL",
										"value":"false"
									}
								},
								{
									"property":"properties_additional_temporaryMessage",
									"filter":{
										"operator":"MISSING"
									}
								}
							],
							"operator":"OR"
						},
						{
							"property":"properties_type",
							"filter":{
								"operator":"NOT_EQUAL",
								"value":"fan"
							}
						}
					],
					"operator":"AND"
				},
				"object_type":"service_hub_message",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"translationsOption":"DEFAULT",
				"page":{
					"paginateBy":"OFFSET",
					"limit":20
				},
				"numberOfRecordsToFetch":"MULTIPLE",
				"readThroughSessionVariables":false,
				"includeTotalCount":false
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Fetch records",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":36,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fNpZG@fenGp-1@2",
			"id":"fNpZG@2",
			"index":36,
			"inputs":{
				"name":"Session Analytics"
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":458,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fNpZG@fenGp-1@2",
			"id":"n_msKQf",
			"index":37,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"result":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"columns":{
										"type":"object",
										"properties":{
											"AvgSessionDuration":{
												"type":"number",
												"title":"AvgSessionDuration"
											},
											"AvgTokens":{
												"type":"number",
												"title":"AvgTokens"
											},
											"EndTime":{
												"type":"integer",
												"title":"EndTime"
											},
											"SessionDuration":{
												"type":"integer",
												"title":"SessionDuration"
											},
											"SessionID":{
												"type":"string",
												"title":"SessionID"
											},
											"StartTime":{
												"type":"integer",
												"title":"StartTime"
											},
											"TotalInputCost":{
												"type":"number",
												"title":"TotalInputCost"
											},
											"TotalOutputCost":{
												"type":"number",
												"title":"TotalOutputCost"
											},
											"TotalSessions":{
												"type":"integer",
												"title":"TotalSessions"
											},
											"TotalTokensUsed":{
												"type":"integer",
												"title":"TotalTokensUsed"
											}
										},
										"title":"columns",
										"additionalProperties":false
									}
								},
								"additionalProperties":false
							},
							"title":"result"
						}
					}
				}
			},
			"inputs":{},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"result":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"columns":{
										"type":"object",
										"properties":{
											"AvgSessionDuration":{
												"type":"number",
												"title":"AvgSessionDuration"
											},
											"AvgTokens":{
												"type":"number",
												"title":"AvgTokens"
											},
											"EndTime":{
												"type":"integer",
												"title":"EndTime"
											},
											"SessionDuration":{
												"type":"integer",
												"title":"SessionDuration"
											},
											"SessionID":{
												"type":"string",
												"title":"SessionID"
											},
											"StartTime":{
												"type":"integer",
												"title":"StartTime"
											},
											"TotalInputCost":{
												"type":"number",
												"title":"TotalInputCost"
											},
											"TotalOutputCost":{
												"type":"number",
												"title":"TotalOutputCost"
											},
											"TotalSessions":{
												"type":"integer",
												"title":"TotalSessions"
											},
											"TotalTokensUsed":{
												"type":"integer",
												"title":"TotalTokensUsed"
											}
										},
										"title":"columns",
										"additionalProperties":false
									}
								},
								"additionalProperties":false
							},
							"title":"result"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":439,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fNpZG@fenGp-1@2",
			"id":"n_MN9Xq",
			"index":38,
			"inputs":{
				"filters":[
					{
						"property":"{{ __ENV__.outputs.read_traces_from_e_traces }}",
						"filter":{
							"operator":"EQUAL",
							"value":"true"
						}
					},
					{
						"property":"{{ __ENV__.outputs.read_traces_from_e_traces }}",
						"filter":{
							"operator":"MISSING"
						}
					}
				],
				"operator":"OR"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":58,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_MN9Xq@fNpZG@fenGp-1@2@y",
			"id":"9p1oe",
			"index":39,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"properties":{
						"sqlQuery":{
							"type":"string",
							"title":"sqlQuery"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"agentId":{
							"type":"string",
							"title":"Agent Id"
						},
						"limit":{
							"type":"integer",
							"title":"Limit"
						},
						"offset":{
							"type":"string",
							"title":"Offset"
						},
						"timestampStart":{
							"type":"string",
							"title":"Timestamp Start"
						},
						"timestampEnd":{
							"type":"string",
							"title":"Timestamp End"
						}
					}
				},
				"code":"import java.time.Instant\nimport java.time.ZonedDateTime\nimport java.time.format.DateTimeFormatter\n\ndef toEpochMillis(ts) {\n    if (ts instanceof Number) {\n        return ts.longValue()\n    } else {\n        return ZonedDateTime.parse(ts.toString(), DateTimeFormatter.ISO_DATE_TIME)\n                            .toInstant()\n                            .toEpochMilli()\n    }\n}\n\ndef generateQuery(aiAgentId, startTime, endTime, limit, offset) {\n    return \"SELECT \" +\n           \"    *, \" +\n           \"    AVG(TotalTokensUsed) OVER() AS AvgTokens, \" +\n           \"    AVG(SessionDuration) OVER() AS AvgSessionDuration \" +\n           \"FROM ( \" +\n           \"    SELECT \" +\n           \"        eTraces._pr_caseId AS SessionID, \" +\n           \"        SUM(COALESCE(eTraces._pr_inputToken, 0) + COALESCE(eTraces._pr_outputToken, 0)) AS TotalTokensUsed, \" +\n           \"        SUM(COALESCE(eTraces._pr_inputTokenCost, 0)) AS TotalInputCost, \" +\n           \"        SUM(COALESCE(eTraces._pr_outputTokenCost, 0)) AS TotalOutputCost, \" +\n           \"        MIN(serviceHubCase._pr_additional__firstFanMessageCreatedTime) AS StartTime, \" +\n           \"        MAX(serviceHubCase._pr_additional__lastBrandMessageTime) AS EndTime, \" +\n           \"        AVG(serviceHubCase._pr_additional__lastBrandMessageTime - serviceHubCase._pr_additional__firstFanMessageCreatedTime) AS SessionDuration, \" +\n           \"        COUNT(*) OVER() AS TotalSessions \" +\n           \"    FROM ENTITY_e_traces AS eTraces \" +\n           \"    JOIN ENTITY_service_hub_case AS serviceHubCase \" +\n           \"      ON (eTraces._pr_caseId = serviceHubCase.id) \" +\n           \"    WHERE eTraces._pr_aiAgentId = '\" + aiAgentId + \"' \" +\n           \"      AND eTraces._pr_caseId IS NOT NULL \" +\n           \"      AND eTraces.timestamp BETWEEN '\" + startTime + \"' AND '\" + endTime + \"' \" +\n           \"      AND serviceHubCase.timestamp BETWEEN '\" + startTime + \"' AND '\" + endTime + \"' \" +\n           \"      AND eTraces._pr_fromAutomationId IN ( \" +\n           \"            '6851442f9e30586f552a6d73', \" +\n           \"           '66ac70650f725f5b425d12d8', \" +\n           \"           '67933cc866e1f1098aa02c39', \" +\n           \"           '66b32227db0c6546b93d3acc', \" +\n           \"           '66a1e74accc70b77f9bf0308', \" +\n           \"           '66b356891a78c401cb586890', \" +\n           \"           '67e6651efd3591529146b261', \" +\n           \"           '67e4346d4718117333c7ee9a', \" +\n           \"           '66b3353e1a78c401cb583431', \" +\n           \"           '679c6521a6583456a7198e97', \" +\n           \"           '68206abcccc45f469e288de0', \" +\n           \"           '6853d10e492bca4185ba983d' \" +\n           \"      ) \" +\n           \"    GROUP BY eTraces._pr_caseId \" +\n           \") AS T \" +\n           \"ORDER BY StartTime DESC \" +\n           \"LIMIT \" + offset + \", \" + limit + \";\"\n}\n\n\ndef sqlQuery = generateQuery(agentId, timestampStart, timestampEnd, limit, offset)\nreturn [sqlQuery: sqlQuery]\n",
				"compile_static":false,
				"isAsync":false,
				"parameters":{
					"agentId":"{{ 4aY8o.outputs.agentId }}",
					"limit":"{{ 4aY8o.outputs.limit }}",
					"offset":"{{ 4aY8o.outputs.offset }}",
					"timestampStart":"{{ 4aY8o.outputs.startTime }}",
					"timestampEnd":"{{ 4aY8o.outputs.endTime }}"
				}
			},
			"options":{
				"bulkheadConfig":{
					"enabled":false,
					"global":false
				},
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false,
					"usagePolicy":"ALWAYS"
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false,
					"postHooks":[
						
					],
					"preHooks":[
						
					]
				},
				"logConfig":{
					"enabled":false,
					"logPolicies":[
						
					]
				},
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"STOP",
				"telemetryConfig":{
					"enableTelemetry":false,
					"metricConfigs":[
						
					]
				}
			},
			"skip":false,
			"subTitle":"Generate SQL",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"analytics_by_unifyapps",
				"resourceVersion":18,
				"resourceName":"analytics_by_unifyapps_execute_query",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_MN9Xq@fNpZG@fenGp-1@2@y",
			"id":"1q6LI",
			"index":40,
			"inputs":{
				"outputSchema":{
					"type":"object",
					"properties":{
						"columns":{
							"type":"object",
							"properties":{
								"SessionDuration":{
									"type":"integer",
									"title":"SessionDuration"
								},
								"TotalSessions":{
									"type":"integer",
									"title":"TotalSessions"
								},
								"EndTime":{
									"type":"integer",
									"title":"EndTime"
								},
								"TotalTokensUsed":{
									"type":"integer",
									"title":"TotalTokensUsed"
								},
								"AvgSessionDuration":{
									"type":"number",
									"title":"AvgSessionDuration"
								},
								"StartTime":{
									"type":"integer",
									"title":"StartTime"
								},
								"SessionID":{
									"type":"string",
									"title":"SessionID"
								},
								"AvgTokens":{
									"type":"integer",
									"title":"AvgTokens"
								},
								"TotalOutputCost":{
									"type":"number",
									"title":"Total Output Cost"
								},
								"TotalInputCost":{
									"type":"number",
									"title":"Total Input Cost"
								}
							},
							"title":"columns",
							"additionalProperties":false,
							"required":[
								"TotalOutputCost"
							]
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"query":"{{ 9p1oe.outputs.result.sqlQuery }}",
				"group":"PLATFORM"
			},
			"skip":false,
			"subTitle":"Execute SQL",
			"title":"Execute Analytics SQL Query",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_MN9Xq@fNpZG@fenGp-1@2@y",
			"id":"n_Pe75e",
			"index":41,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_msKQf.outputs.result }}",
						"value":{
							"source":"{{ 1q6LI.outputs.objects }}",
							"ua:type":"mappedArray",
							"items":{
								"columns":{
									"AvgSessionDuration":"{{ 1q6LI.outputs.objects[0].columns.AvgSessionDuration }}",
									"AvgTokens":"{{ 1q6LI.outputs.objects[0].columns.AvgTokens }}",
									"EndTime":"{{ 1q6LI.outputs.objects[0].columns.EndTime }}",
									"SessionDuration":"{{ 1q6LI.outputs.objects[0].columns.SessionDuration }}",
									"SessionID":"{{ 1q6LI.outputs.objects[0].columns.SessionID }}",
									"StartTime":"{{ 1q6LI.outputs.objects[0].columns.StartTime }}",
									"TotalInputCost":"{{ 1q6LI.outputs.objects[0].columns.TotalInputCost }}",
									"TotalOutputCost":"{{ 1q6LI.outputs.objects[0].columns.TotalOutputCost }}",
									"TotalSessions":"{{ 1q6LI.outputs.objects[0].columns.TotalSessions }}",
									"TotalTokensUsed":"{{ 1q6LI.outputs.objects[0].columns.TotalTokensUsed }}"
								}
							}
						}
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":58,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_MN9Xq@fNpZG@fenGp-1@2@n",
			"id":"_G8RTL",
			"index":42,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"sqlQuery":{
							"type":"string",
							"title":"sqlQuery"
						}
					},
					"additionalProperties":false
				},
				"input":{
					"type":"object",
					"properties":{
						"agentId":{
							"type":"string",
							"title":"Agent Id"
						},
						"limit":{
							"type":"integer",
							"title":"Limit"
						},
						"offset":{
							"type":"string",
							"title":"Offset"
						},
						"timestampStart":{
							"type":"string",
							"title":"Timestamp Start"
						},
						"timestampEnd":{
							"type":"string",
							"title":"Timestamp End"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"\nimport java.time.Instant\nimport java.time.ZonedDateTime\nimport java.time.format.DateTimeFormatter\n\ndef generateQuery(aiAgentId, startTime, endTime, limit, offset) {\n    return \"SELECT *, AVG(TotalTokensUsed) OVER() AS AvgTokens, AVG(SessionDuration) OVER() As AvgSessionDuration FROM (SELECT sessionId AS SessionID, SUM(tokenUsed) AS TotalTokensUsed, SUM(inputCost) AS TotalInputCost, SUM(outputCost) AS TotalOutputCost, MIN(startTime) AS StartTime, MAX(endTime) AS EndTime, (MAX(endTime) - MIN(startTime)) AS SessionDuration, COUNT(*) OVER() AS TotalSessions FROM (SELECT we.startTime AS StartTime, we.endTime AS EndTime, CAST(wne.outputs -> 'tokensUsed' AS int) AS TokenUsed, CAST(wne.outputs -> 'inputTokenCost' AS DOUBLE) AS inputCost, CAST(wne.outputs -> 'outputTokenCost' AS DOUBLE) AS outputCost, caseId AS SessionID FROM WORKFLOW_NODE_EXECUTION wne JOIN WORKFLOW_EXECUTION we ON (wne.executionInstanceId = we.id) WHERE aiAgentId = '\" + aiAgentId + \"' AND caseId IS NOT NULL AND wne.entryTime BETWEEN \" + startTime + \" AND \" + endTime + \" AND we.startTime BETWEEN \" + startTime + \" AND \" + endTime + \" AND we.workflowId in ('66ac70650f725f5b425d12d8', '66966960e8797a59f4a46292') AND wne.workflowId in ('66ac70650f725f5b425d12d8', '66966960e8797a59f4a46292') AND currentNodeId in ('27dr9', 'vBzOH')) AS AB WHERE SessionID IS NOT NULL GROUP BY SessionID) AS T ORDER BY StartTime DESC LIMIT \" + offset + \", \" + limit + \";\"\n}\n\n// def getEpochMillis(timestamp) {\n//     ZonedDateTime zdt = ZonedDateTime.parse(timestamp, DateTimeFormatter.ISO_DATE_TIME)\n//     return zdt.toInstant().toEpochMilli()\n// }\n\n// def startTime, endTime\n// if(!binding.hasVariable('timestampStart'))\n// {\n//     startTime=0L\n// }\n// else\n// {\n//     startTime = getEpochMillis(timestampStart)\n// }\n// if(!binding.hasVariable('timestampEnd'))\n// {\n//     endTime=Instant.now().toEpochMilli()\n// }\n// else\n// {\n//     endTime = getEpochMillis(timestampEnd)\n// }\n\n// // def startTime = getEpochMillis(timestampStart)\n// // def endTime = getEpochMillis(timestampEnd)\n\ndef sqlQuery = generateQuery(agentId, timestampStart, timestampEnd, limit, offset)\nreturn [sqlQuery: sqlQuery]",
				"isAsync":false,
				"parameters":{
					"agentId":"{{ 4aY8o.outputs.agentId }}",
					"limit":"{{ 4aY8o.outputs.limit }}",
					"offset":"{{ 4aY8o.outputs.offset }}",
					"timestampStart":"{{ n_dNzKM.outputs.startTime }}",
					"timestampEnd":"{{ n_dNzKM.outputs.endTime }}"
				}
			},
			"skip":false,
			"subTitle":"Generate SQL",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"analytics_by_unifyapps",
				"resourceVersion":18,
				"resourceName":"analytics_by_unifyapps_execute_query",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_MN9Xq@fNpZG@fenGp-1@2@n",
			"id":"_6804d",
			"index":43,
			"inputs":{
				"outputSchema":{
					"type":"object",
					"properties":{
						"columns":{
							"type":"object",
							"properties":{
								"SessionDuration":{
									"type":"integer",
									"title":"SessionDuration"
								},
								"TotalSessions":{
									"type":"integer",
									"title":"TotalSessions"
								},
								"EndTime":{
									"type":"integer",
									"title":"EndTime"
								},
								"TotalTokensUsed":{
									"type":"integer",
									"title":"TotalTokensUsed"
								},
								"AvgSessionDuration":{
									"type":"number",
									"title":"AvgSessionDuration"
								},
								"StartTime":{
									"type":"integer",
									"title":"StartTime"
								},
								"SessionID":{
									"type":"string",
									"title":"SessionID"
								},
								"AvgTokens":{
									"type":"integer",
									"title":"AvgTokens"
								},
								"TotalOutputCost":{
									"type":"number",
									"title":"Total Output Cost"
								},
								"TotalInputCost":{
									"type":"number",
									"title":"Total Input Cost"
								}
							},
							"title":"columns",
							"additionalProperties":false,
							"required":[
								"TotalOutputCost"
							]
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"query":"{{ _G8RTL.outputs.result.sqlQuery }}",
				"group":"PLATFORM"
			},
			"skip":false,
			"subTitle":"Execute SQL",
			"title":"Execute Analytics SQL Query",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_MN9Xq@fNpZG@fenGp-1@2@n",
			"id":"n_jrGYy",
			"index":44,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_msKQf.outputs.result }}",
						"value":{
							"source":"{{ _6804d.outputs.objects }}",
							"ua:type":"mappedArray",
							"items":{
								"columns":{
									"AvgSessionDuration":"{{ _6804d.outputs.objects[0].columns.AvgSessionDuration }}",
									"AvgTokens":"{{ _6804d.outputs.objects[0].columns.AvgTokens }}",
									"EndTime":"{{ _6804d.outputs.objects[0].columns.EndTime }}",
									"SessionDuration":"{{ _6804d.outputs.objects[0].columns.SessionDuration }}",
									"SessionID":"{{ _6804d.outputs.objects[0].columns.SessionID }}",
									"StartTime":"{{ _6804d.outputs.objects[0].columns.StartTime }}",
									"TotalInputCost":"{{ _6804d.outputs.objects[0].columns.TotalInputCost }}",
									"TotalOutputCost":"{{ _6804d.outputs.objects[0].columns.TotalOutputCost }}",
									"TotalSessions":"{{ _6804d.outputs.objects[0].columns.TotalSessions }}",
									"TotalTokensUsed":"{{ _6804d.outputs.objects[0].columns.TotalTokensUsed }}"
								}
							}
						}
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.cases.items.caseId",
					"root.parameters.cases.items.customerProfileId",
					"root.parameters.cases.items.subject",
					"root.parameters.customerProfiles.items.profileId",
					"root.parameters.customerProfiles.items.name",
					"root.parameters.sessions.items.totalTokensUsed",
					"root.parameters.sessions.items.totalSessions",
					"root.parameters.sessions.items.startTime",
					"root.parameters.sessions.items.endTime",
					"root.parameters.sessions.items.sessionID",
					"root.parameters.sessions.items.sessionDuration",
					"root.parameters.sessions.items.totalCost"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":58,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fenGp-1",
			"id":"y0Cab",
			"index":45,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[
						"avgTraceCount"
					],
					"properties":{
						"sessions":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"totalTokensUsed":{
										"type":"integer",
										"title":"totalTokensUsed"
									},
									"totalSessions":{
										"type":"integer",
										"title":"totalSessions"
									},
									"customerProfileName":{
										"type":"string",
										"title":"customerProfileName"
									},
									"startTime":{
										"type":"integer",
										"title":"startTime"
									},
									"endTime":{
										"type":"integer",
										"title":"endTime"
									},
									"sessionID":{
										"type":"string",
										"title":"sessionID"
									},
									"sessionDuration":{
										"type":"integer",
										"title":"sessionDuration"
									},
									"customerProfileId":{
										"type":"string",
										"title":"Customer Profile Id"
									},
									"summary":{
										"type":"string",
										"title":"Summary"
									},
									"traces":{
										"type":"integer",
										"title":"Traces"
									},
									"firstMessage":{
										"type":"string",
										"title":"First Message"
									},
									"lastMessage":{
										"type":"string",
										"title":"Last Message"
									},
									"totalCost":{
										"type":"number",
										"title":"Total Cost"
									}
								},
								"additionalProperties":false,
								"required":[
									"traces",
									"firstMessage",
									"lastMessage",
									"totalCost"
								]
							},
							"title":"sessions",
							"required":[]
						},
						"avgTraceCount":{
							"type":"integer",
							"title":"Avg Trace Count"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[
						"caseVsMessageCount",
						"fanMessages",
						"brandMessages"
					],
					"properties":{
						"cases":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"caseId":{
										"type":"string",
										"title":"caseId"
									},
									"customerProfileId":{
										"type":"string",
										"title":"Customer Profile Id"
									},
									"subject":{
										"type":"string",
										"title":"Subject"
									}
								},
								"additionalProperties":false
							},
							"title":"cases",
							"required":[]
						},
						"customerProfiles":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"profileId":{
										"type":"string",
										"title":"Profile Id"
									},
									"name":{
										"type":"string",
										"title":"Name"
									}
								},
								"additionalProperties":false
							},
							"title":"Customer Profiles",
							"required":[]
						},
						"sessions":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"totalTokensUsed":{
										"type":"integer",
										"title":"totalTokensUsed"
									},
									"totalSessions":{
										"type":"integer",
										"title":"totalSessions"
									},
									"startTime":{
										"type":"integer",
										"title":"startTime"
									},
									"endTime":{
										"type":"integer",
										"title":"endTime"
									},
									"sessionID":{
										"type":"string",
										"title":"sessionID"
									},
									"sessionDuration":{
										"type":"integer",
										"title":"sessionDuration"
									},
									"totalCost":{
										"type":"number",
										"title":"Total Cost"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Sessions"
						},
						"caseVsMessageCount":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"caseId":{
										"type":"string",
										"title":"Case Id"
									},
									"messageCount":{
										"type":"integer",
										"title":"Message Count"
									}
								},
								"additionalProperties":false,
								"required":[
									"caseId",
									"messageCount"
								]
							},
							"title":"Case Vs Message Count"
						},
						"fanMessages":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"caseId":{
										"type":"string",
										"title":"Case Id"
									},
									"content":{
										"type":"string",
										"title":"Content"
									}
								},
								"additionalProperties":false,
								"required":[
									"caseId",
									"content"
								]
							},
							"title":"Fan Messages"
						},
						"brandMessages":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"caseId":{
										"type":"string",
										"title":"Case Id"
									},
									"content":{
										"type":"string",
										"title":"Content"
									}
								},
								"additionalProperties":false,
								"required":[
									"caseId",
									"content"
								]
							},
							"title":"Brand Messages"
						}
					}
				},
				"code":"def caseVsCustomerProfileName = [:] as Map<String, String>\ndef customerProfileVsName = [:] as Map<String, String>\ndef caseVSCustomerProfileIds = [:] as Map<String, String>\ndef caseById = [:] as Map<String, Object>\ndef caseMessageCountMap = [:] as Map<String, Integer>\ndef caseIdVsFirstMessage = [:] as Map<String, String>\ndef caseIdVsLastMessage = [:] as Map<String, String>\n\ndef totalTraceCount = 0\n\n// Map customer profileId -> name\ncustomerProfiles.each { customerProfile ->\n    customerProfileVsName[customerProfile['profileId']] = customerProfile['name']\n}\n\nfanMessages.each { fanMessage ->\n    caseIdVsFirstMessage[fanMessage['caseId']] = fanMessage['content']\n}\nif(binding.hasVariable('brandMessages')) {\n    brandMessages.each { brandMessage ->\n    caseIdVsLastMessage[brandMessage['caseId']] = brandMessage['content']\n    }\n}\n\n\n// Map caseId -> messageCount and compute total traces\ncaseVsMessageCount.each { entry ->\n    caseMessageCountMap[entry.caseId] = entry.messageCount\n    totalTraceCount += entry.messageCount\n}\n\ndef avgTraceCount = (totalTraceCount / (caseMessageCountMap.size() ?: 1)).round()\n\n// Prepare case related mappings\ncases.each { caseData ->\n    String profileId = caseData['customerProfileId']\n    String profileName = customerProfileVsName[profileId]\n    if (profileName == null || profileName=='') {\n        return\n    }\n    String caseId = caseData['caseId']\n\n    caseData['traces'] = caseMessageCountMap[caseId] ?: 0  // Safe access\n    caseData['firstMessage'] = caseIdVsFirstMessage[caseId] ?: ''  // Safe access\n    caseData['lastMessage'] = caseIdVsLastMessage[caseId] ?: ''  // Safe access\n    caseVsCustomerProfileName[caseId] = profileName\n    caseVSCustomerProfileIds[caseId] = profileId\n    caseById[caseId] = caseData\n}\n\nList<Map<String, Object>> response = []\n\n// Build the final session response\nsessions.each { session ->\n    def sessionData = new HashMap(session)\n    def sessionId = session['sessionID'].toString()\n    def caseData = caseById[sessionId]\n\n    sessionData['customerProfileName'] = caseVsCustomerProfileName[sessionId] ?: ''\n    if (sessionData['customerProfileName'] == null || sessionData['customerProfileName'] == '') {\n        return\n    }\n    sessionData['customerProfileId'] = caseVSCustomerProfileIds[sessionId] ?: ''\n    sessionData['summary'] = caseData ? sessionId + \" : \" + caseData.subject : sessionId\n    sessionData['traces'] = caseData ? caseData['traces'] : 0\n    sessionData['firstMessage'] = caseData ? caseData['firstMessage'] : ''\n    sessionData['lastMessage'] = caseData ? caseData['lastMessage'] : ''\n    response.add(sessionData)\n}\n\nreturn [\"sessions\": response, \"avgTraceCount\": avgTraceCount]",
				"compile_static":false,
				"isAsync":false,
				"parameters":{
					"cases":{
						"ua:type":"mappedArray",
						"items":{
							"caseId":"{{ 6zmM2.outputs.objects[0].id }}",
							"customerProfileId":"{{ 6zmM2.outputs.objects[0].properties.fromCustomerUserId }}",
							"subject":"{{ 6zmM2.outputs.objects[0].properties.subject }}"
						},
						"source":"{{ 6zmM2.outputs.objects }}"
					},
					"customerProfiles":{
						"ua:type":"mappedArray",
						"items":{
							"profileId":"{{ n_2Gq8V.outputs.items[0].id }}",
							"name":"{{ n_2Gq8V.outputs.items[0].name }}"
						},
						"source":"{{ n_2Gq8V.outputs.items }}"
					},
					"sessions":{
						"ua:type":"mappedArray",
						"items":{
							"totalCost":"=SUM({{ n_msKQf.outputs.result[0].columns.TotalOutputCost }},{{ n_msKQf.outputs.result[0].columns.TotalInputCost }})",
							"totalTokensUsed":"{{ n_msKQf.outputs.result[0].columns.TotalTokensUsed }}",
							"totalSessions":"{{ n_msKQf.outputs.result[0].columns.TotalSessions }}",
							"startTime":"{{ n_msKQf.outputs.result[0].columns.StartTime }}",
							"endTime":"{{ n_msKQf.outputs.result[0].columns.EndTime }}",
							"sessionID":"{{ n_msKQf.outputs.result[0].columns.SessionID }}",
							"sessionDuration":"{{ n_msKQf.outputs.result[0].columns.SessionDuration }}"
						},
						"source":"{{ n_msKQf.outputs.result }}"
					},
					"caseVsMessageCount":{
						"ua:type":"mappedArray",
						"items":{
							"caseId":"{{ n_nK38E.outputs.result[0].columns.caseId }}",
							"messageCount":"{{ n_nK38E.outputs.result[0].columns.messageCount }}"
						},
						"source":"{{ n_nK38E.outputs.result }}"
					},
					"fanMessages":{
						"source":"{{ z9wQe.outputs.objects }}",
						"ua:type":"mappedArray",
						"items":{
							"caseId":"{{ z9wQe.outputs.objects[0].properties.caseId }}",
							"content":"{{ z9wQe.outputs.objects[0].properties.content.text }}"
						}
					},
					"brandMessages":{
						"source":"{{ X0W3O.outputs.objects }}",
						"ua:type":"mappedArray",
						"items":{
							"caseId":"{{ X0W3O.outputs.objects[0].properties.caseId }}",
							"content":"{{ X0W3O.outputs.objects[0].properties.content.text }}"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Generate Response",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":48,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"fenGp-1",
			"id":"sMdDO",
			"index":46,
			"inputs":{
				"result":{
					"totalSessions":"{{ n_msKQf.outputs.result[0].columns.TotalSessions }}",
					"avgTokenUsed":"{{ n_msKQf.outputs.result[0].columns.AvgTokens }}",
					"avgSessionDuration":"{{ n_msKQf.outputs.result[0].columns.AvgSessionDuration }}",
					"avgTraces":"{{ y0Cab.outputs.result.avgTraceCount }}",
					"sessions":{
						"ua:type":"mappedArray",
						"items":{
							"customerName":"{{ y0Cab.outputs.result.sessions[0].customerProfileName }}",
							"tokenUsed":"{{ y0Cab.outputs.result.sessions[0].totalTokensUsed }}",
							"sessionTime":"{{ y0Cab.outputs.result.sessions[0].sessionDuration }}",
							"startTime":"{{ y0Cab.outputs.result.sessions[0].startTime }}",
							"lastResponseTime":"{{ y0Cab.outputs.result.sessions[0].endTime }}",
							"sessionId":"{{ y0Cab.outputs.result.sessions[0].sessionID }}",
							"customerProfileId":"{{ y0Cab.outputs.result.sessions[0].customerProfileId }}",
							"summary":"{{ y0Cab.outputs.result.sessions[0].summary }}",
							"traceCount":"{{ y0Cab.outputs.result.sessions[0].traces }}",
							"firstMessage":"{{ y0Cab.outputs.result.sessions[0].firstMessage }}",
							"lastMessage":"{{ y0Cab.outputs.result.sessions[0].lastMessage }}",
							"cost":"{{ y0Cab.outputs.result.sessions[0].totalCost }}"
						},
						"source":"{{ y0Cab.outputs.result.sessions }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":1,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		"AI Agent",
		"Observability"
	],
	"version":112
}