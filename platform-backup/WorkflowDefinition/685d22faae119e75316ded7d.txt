{
	"appsUsed":[
		
	],
	"createdTime":1751469673751,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1757441822202,
		"deployedBy":0,
		"deployedDefinitionId":"68c06f1e91dbf0016b7687fd",
		"status":"DEPLOYED",
		"version":39,
		"workflowVersion":46
	},
	"edges":[
		{
			"fromNodeId":"_qmmVS",
			"priority":0,
			"skip":false,
			"toNodeId":"n_hMgVL",
			"type":"next"
		},
		{
			"fromNodeId":"n_hMgVL",
			"priority":0,
			"skip":false,
			"toNodeId":"n_omzDs",
			"type":"next"
		},
		{
			"fromNodeId":"n_omzDs",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"_bbaer",
			"type":"if"
		},
		{
			"fromNodeId":"_bbaer",
			"name":"success",
			"priority":0,
			"skip":false,
			"toNodeId":"n_h2cJe",
			"type":"next"
		},
		{
			"fromNodeId":"_bbaer",
			"name":"error",
			"priority":0,
			"skip":false,
			"toNodeId":"_NDQ6K",
			"type":"error"
		},
		{
			"fromNodeId":"_NDQ6K",
			"priority":0,
			"skip":false,
			"toNodeId":"_uDFOL",
			"type":"next"
		},
		{
			"fromNodeId":"n_omzDs",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_wHBkY",
			"type":"next"
		},
		{
			"fromNodeId":"_wHBkY",
			"priority":0,
			"skip":false,
			"toNodeId":"_F3jMX",
			"type":"next"
		},
		{
			"fromNodeId":"n_h2cJe",
			"priority":0,
			"skip":false,
			"toNodeId":"zpfOa",
			"type":"next"
		},
		{
			"fromNodeId":"_uDFOL",
			"priority":0,
			"skip":false,
			"toNodeId":"zpfOa",
			"type":"next"
		},
		{
			"fromNodeId":"_F3jMX",
			"priority":0,
			"skip":false,
			"toNodeId":"zpfOa",
			"type":"next"
		},
		{
			"fromNodeId":"zpfOa",
			"priority":0,
			"skip":false,
			"toNodeId":"n_eQA2v",
			"type":"next"
		},
		{
			"fromNodeId":"n_eQA2v",
			"priority":0,
			"skip":false,
			"toNodeId":"qK2EO",
			"type":"next"
		},
		{
			"fromNodeId":"qK2EO",
			"priority":0,
			"skip":false,
			"toNodeId":"_rDpuI",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"685d22faae119e75316ded7d",
	"lastModifiedBy":-1,
	"lcName":"website indexer | convert html to markdown and index",
	"modifiedTime":1758530296888,
	"name":"Website Indexer | Convert HTML to Markdown and Index",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_bvBRo@5NJaW@O66xp-1@l@l",
			"id":"_qmmVS",
			"index":1,
			"inputs":{
				"result":{
					"type":"object",
					"properties":{
						"status":{
							"type":"string",
							"title":"Status"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"setup":{
					"required":[],
					"$schema":"http://json-schema.org/draft-07/schema#",
					"type":"object",
					"properties":{
						"knowledge_id":{
							"type":"string",
							"title":"Knowledge Id"
						},
						"html":{
							"type":"string",
							"title":"Html"
						},
						"modelId":{
							"type":"string",
							"title":"Model Id"
						},
						"knowledgeVersion":{
							"type":"number",
							"title":"Knowledge Version"
						},
						"url":{
							"type":"string",
							"title":"Url"
						},
						"title":{
							"type":"string",
							"title":"Title"
						},
						"iconUrl":{
							"type":"string",
							"title":"Icon Url"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger via automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":92,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_bvBRo@5NJaW@O66xp-1@l@l",
			"id":"n_hMgVL",
			"index":2,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"markdownContent":{
							"type":"string",
							"title":"Markdown Content"
						}
					},
					"required":[]
				}
			},
			"inputs":{},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"markdownContent":{
							"type":"string",
							"title":"Markdown Content"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":438,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_bvBRo@5NJaW@O66xp-1@l@l",
			"id":"n_omzDs",
			"index":3,
			"inputs":{
				"filters":[
					{
						"property":"{{ _qmmVS.outputs.modelId }}",
						"filter":{
							"operator":"EXISTS"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":1,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"MANUAL",
			"groupId":"n_omzDs@_bvBRo@5NJaW@O66xp-1@l@l@y",
			"id":"_bbaer",
			"index":4,
			"inputs":{
				"automationId":"66dfd76eb70dad256986b784",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"type":"text",
					"response_format":"text",
					"content":"Extract Out all the Data in Markdown format from this HTML with headings and without image links to which that data belongs to:\n```html\n{{ _qmmVS.outputs.html }}\n```\nDo not use ```markdown tags as well. Directly Return with converted markdown text and nothing else. ",
					"modelId":"{{ _qmmVS.outputs.modelId }}"
				}
			},
			"options":{
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false
				},
				"logConfig":{
					"enabled":false
				},
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"MANUAL",
				"telemetryConfig":{
					"enableTelemetry":false
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":93,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_bbaer@n_omzDs@_bvBRo@5NJaW@O66xp-1@l@l@y@success",
			"id":"n_h2cJe",
			"index":5,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_hMgVL.outputs.markdownContent }}",
						"value":"{{ _bbaer.outputs.llmResponse }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"utility_by_unifyapps",
				"resourceVersion":318,
				"resourceName":"utility_by_unifyapps_from_html_to_plain_text",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_bbaer@n_omzDs@_bvBRo@5NJaW@O66xp-1@l@l@y@error",
			"id":"_NDQ6K",
			"index":6,
			"inputs":{
				"conversionType":"markdown",
				"htmlString":"{{ _qmmVS.outputs.html }}"
			},
			"skip":false,
			"subTitle":"Utility by UnifyApps",
			"title":"Convert HTML to text",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":93,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_bbaer@n_omzDs@_bvBRo@5NJaW@O66xp-1@l@l@y@error",
			"id":"_uDFOL",
			"index":7,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_hMgVL.outputs.markdownContent }}",
						"value":"{{ _NDQ6K.outputs.convertedText }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"utility_by_unifyapps",
				"resourceVersion":318,
				"resourceName":"utility_by_unifyapps_from_html_to_plain_text",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_omzDs@_bvBRo@5NJaW@O66xp-1@l@l@n",
			"id":"_wHBkY",
			"index":8,
			"inputs":{
				"conversionType":"markdown",
				"htmlString":"{{ _qmmVS.outputs.html }}"
			},
			"skip":false,
			"subTitle":"Utility by UnifyApps",
			"title":"Convert HTML to text",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":93,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_omzDs@_bvBRo@5NJaW@O66xp-1@l@l@n",
			"id":"_F3jMX",
			"index":9,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_hMgVL.outputs.markdownContent }}",
						"value":"{{ _wHBkY.outputs.convertedText }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":52,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_bvBRo@5NJaW@O66xp-1@l@l",
			"id":"zpfOa",
			"index":10,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"chunkMetadata":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Chunk Metadata"
						},
						"chunks":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Chunks"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"markdownContent":{
							"type":"string",
							"title":"Markdown Content"
						},
						"websiteUrl":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Website Url"
						},
						"iconUrl":{
							"type":"string",
							"title":"Icon Url"
						},
						"title":{
							"type":"string",
							"title":"Title"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"if (binding.hasVariable('markdownContent') && markdownContent.startsWith(\"```markdown\")) {\n    markdownContent = markdownContent.replaceFirst(\"```markdown\\\\n\", \"\")\n}\ndef extractSlugAndApplicationName(url) {\n    try{\n    def path = new URL(url).path\n    def segments = path.split('/').findAll { it }\n\n    if (segments.size() > 1) {\n        def slug = segments[-1] \n        def application_name = segments[-2] \n        return [slug: slug, application_name: application_name]\n    } else if (segments.size() == 1) {\n        def slug = segments[0] \n        return [slug: slug, application_name: null]\n    } else {\n        return [slug: null, application_name: null]\n    }\n} catch(Exception e) {\n    \n}\n}\n\n\ndef result = extractSlugAndApplicationName(websiteUrl)\ndef slug = result?.slug\ndef application_name = result?.application_name\n\n\ndef formattedString\nif (slug && application_name) {\n   \n    formattedString = \"This Content Belongs to ${slug} under ${application_name} : ${markdownContent}\"\n} else if (slug) {\n     \n    formattedString = \"This Content Belongs to ${slug} : ${markdownContent}\"\n} else {\n    formattedString = \"Content: ${markdownContent}\"\n}\n\ndef chunkMetadata = [:]\ndef websiteUrl=binding.hasVariable(\"websiteUrl\")?binding.websiteUrl:[:]\nif(websiteUrl instanceof Map)\n{\n    websiteUrl=websiteUrl[\"url\"]\n}\nelse{\n    websiteUrl=websiteUrl\n}\ndef iconUrl=binding.hasVariable(\"iconUrl\")?binding.iconUrl:\"\"\ndef title=binding.hasVariable(\"title\")?binding.title:\"\"\nchunkMetadata << (websiteUrl ? [\"websiteUrl\": websiteUrl , \"referenceUrl\": websiteUrl ] : [:])\nchunkMetadata << [\"iconUrl\":iconUrl]\nchunkMetadata << [\"title\": title, \"name\": title]\nreturn [\n    \"chunkMetadata\":chunkMetadata, \n    \"chunks\": [formattedString.toString()]\n]",
				"isAsync":false,
				"parameters":{
					"markdownContent":"{{ n_hMgVL.outputs.markdownContent }}",
					"websiteUrl":"{{ _qmmVS.outputs.url }}",
					"iconUrl":"{{ _qmmVS.outputs.iconUrl }}",
					"title":"{{ _qmmVS.outputs.title }}"
				}
			},
			"skip":false,
			"subTitle":"Get Chunks & Metadata from MD",
			"title":"Execute groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":449,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_bvBRo@5NJaW@O66xp-1@l@l",
			"id":"n_eQA2v",
			"index":11,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"uniqueId":{
							"type":"string",
							"title":"uniqueId"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def uuid = UUID.randomUUID().toString()\nreturn [\n  \"uniqueId\": uuid\n]"
			},
			"skip":false,
			"subTitle":"uniqueId",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":48,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_bvBRo@5NJaW@O66xp-1@l@l",
			"id":"qK2EO",
			"index":12,
			"inputs":{
				"automationId":"66af3ff4cd79b321cb478a37",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"chunks":{
						"ua:type":"mappedArray",
						"items":{
							"sharedWithIds":{
								"items":"GLOBAL",
								"ua:type":"mappedArray"
							},
							"data":"{{ zpfOa.outputs.result.chunks[0] }}"
						},
						"source":"{{ zpfOa.outputs.result.chunks }}"
					},
					"chunkMetadata":"{{ zpfOa.outputs.result.chunkMetadata }}",
					"knowledgeVersion":"{{ _qmmVS.outputs.knowledgeVersion }}",
					"knowledgeId":"{{ _qmmVS.outputs.knowledge_id }}",
					"uniqueEntityId":"{{ n_eQA2v.outputs.result.uniqueId }}"
				}
			},
			"skip":false,
			"subTitle":"Index Knowledge",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"callables",
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_bvBRo@5NJaW@O66xp-1@l@l",
			"id":"_rDpuI",
			"index":13,
			"inputs":{
				"result":{
					"status":"OK"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":148386,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":true,
	"version":48
}