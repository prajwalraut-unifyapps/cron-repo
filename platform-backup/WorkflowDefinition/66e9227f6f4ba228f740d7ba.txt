{
	"appsUsed":[
		"67a5fec96e654a7e11d97d9c"
	],
	"createdTime":1730143150793,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1739768053834,
		"deployedBy":1,
		"deployedDefinitionId":"67b2c0f57cac0c04574e6826",
		"status":"DEPLOYED",
		"version":25,
		"workflowVersion":114
	},
	"edges":[
		{
			"fromNodeId":"68uH2",
			"priority":0,
			"skip":false,
			"toNodeId":"dqCbX",
			"type":"next"
		},
		{
			"fromNodeId":"dqCbX",
			"priority":0,
			"skip":false,
			"toNodeId":"5nPo7",
			"type":"next"
		},
		{
			"fromNodeId":"5nPo7",
			"priority":0,
			"skip":false,
			"toNodeId":"UCFO5",
			"type":"next"
		},
		{
			"fromNodeId":"UCFO5",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"PO5fP",
			"type":"if"
		},
		{
			"fromNodeId":"PO5fP",
			"priority":0,
			"skip":false,
			"toNodeId":"7N8fo",
			"type":"next"
		},
		{
			"fromNodeId":"7N8fo",
			"priority":0,
			"skip":false,
			"toNodeId":"uBllR",
			"type":"next"
		},
		{
			"fromNodeId":"uBllR",
			"priority":0,
			"skip":false,
			"toNodeId":"Qrbp8",
			"type":"next"
		},
		{
			"fromNodeId":"Qrbp8",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"LvcAu",
			"type":"if"
		},
		{
			"fromNodeId":"UCFO5",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_UJ3Yj",
			"type":"next"
		},
		{
			"fromNodeId":"_UJ3Yj",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"_5xOGK",
			"type":"if"
		},
		{
			"fromNodeId":"LvcAu",
			"priority":0,
			"skip":false,
			"toNodeId":"TroXi",
			"type":"next"
		},
		{
			"fromNodeId":"Qrbp8",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"TroXi",
			"type":"next"
		},
		{
			"fromNodeId":"_5xOGK",
			"priority":0,
			"skip":false,
			"toNodeId":"TroXi",
			"type":"next"
		},
		{
			"fromNodeId":"_UJ3Yj",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"TroXi",
			"type":"next"
		}
	],
	"id":"66e9227f6f4ba228f740d7ba",
	"lastModifiedBy":4130,
	"lcName":"determinesaleschannelbyvpnr (dev)",
	"modifiedTime":1760087115524,
	"name":"determineSalesChannelByVPNR (dev)",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":0,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"oTsB2-1",
			"id":"68uH2",
			"index":0,
			"inputs":{
				"result":{
					"type":"object",
					"properties":{
						"salesChannel":{
							"type":"string",
							"title":"salesChannel"
						}
					},
					"additionalProperties":false,
					"required":[
						"salesChannel"
					]
				},
				"setup":{
					"type":"object",
					"properties":{
						"salesPointNumber":{
							"type":"string",
							"title":"salesPointNumber",
							"help":"sales point number (Vertriebspunktnummer/VPNR)"
						},
						"salesChannel":{
							"type":"string",
							"title":"salesChannel"
						}
					},
					"additionalProperties":false,
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger from automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":41,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"oTsB2-1",
			"id":"dqCbX",
			"index":0,
			"inputs":{
				"automationId":"671f5be84550ea7fc5179749",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1"
			},
			"skip":false,
			"subTitle":"Get secrets",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"oTsB2-1",
			"id":"5nPo7",
			"index":0,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"salesChannel":{
							"type":"number",
							"title":"salesChannel"
						}
					},
					"required":[]
				}
			},
			"inputs":{
				"salesChannel":"99"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"salesChannel":{
							"type":"number",
							"title":"salesChannel"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"salesChannel with default",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":0,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"oTsB2-1",
			"id":"UCFO5",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"{{ 68uH2.outputs.salesPointNumber }}",
						"filter":{
							"operator":"EXISTS"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Have salesPointNumber?",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"67a5fec96e654a7e11d97d9c",
				"resourceVersion":5,
				"resourceName":"67a5fec96e654a7e11d97d9c:67a5ff0f6e654a7e11d97d9d",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"UCFO5@oTsB2-1@y",
			"id":"PO5fP",
			"index":0,
			"inputs":{
				"grant_type":"client_credentials",
				"client_secret":"{{ dqCbX.outputs.client_secret }}",
				"client_id":"{{ dqCbX.outputs.client_id }}"
			},
			"options":{
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"cacheKey":"accesstoken",
					"enabled":true,
					"timeToLive":"{{ __ENV__.outputs.tokenCacheTimeToLiveSeconds }}",
					"usagePolicy":"ALWAYS"
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false
				},
				"logConfig":{
					"enabled":false
				},
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"STOP",
				"telemetryConfig":{
					"enableTelemetry":false
				}
			},
			"skip":false,
			"subTitle":"MM_Token_Fetch",
			"title":"Fetch_Token",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"custom_http_endpoint",
				"resourceVersion":12,
				"resourceName":"custom_http_endpoint_execute",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"UCFO5@oTsB2-1@y",
			"id":"7N8fo",
			"index":0,
			"inputs":{
				"isAsync":false,
				"requestTimeoutInSecs":-1,
				"type":"REST",
				"httpMethod":"GET",
				"sslVerify":true,
				"path":"/assistedSales/map",
				"responseSchema":{
					"type":"array",
					"items":{
						"type":"object",
						"properties":{
							"svpc":{
								"type":"integer",
								"title":"svpc"
							},
							"vk":{
								"type":"integer",
								"title":"vk"
							},
							"kzvnr":{
								"type":"string",
								"title":"kzvnr"
							},
							"vo":{
								"type":"string",
								"title":"vo"
							},
							"vpnr":{
								"type":"string",
								"title":"vpnr"
							}
						},
						"additionalProperties":false
					}
				},
				"baseUrl":"{{ __ENV__.outputs.backend_baseUrl_oneapp-hal-profile-baccount-v1 }}",
				"queryParamsList":[
					{
						"key":"vpnr",
						"value":"{{ 68uH2.outputs.salesPointNumber }}"
					}
				],
				"responseContentType":"application/json",
				"headersList":[
					{
						"key":"Content-Type",
						"value":"application/json"
					},
					{
						"key":"X-Request-Tracking-Id",
						"value":"{{ __ENV__.outputs.executionId }}"
					},
					{
						"key":"X-Request-Id",
						"value":"{{ __ENV__.outputs.executionId }}"
					},
					{
						"key":"X-Request-Session-Id",
						"value":"{{ __ENV__.outputs.executionId }}"
					},
					{
						"key":"Authorization",
						"value":"Bearer {{ PO5fP.outputs.access_token }}"
					}
				],
				"authType":"CUSTOM",
				"requestContentType":"application/json",
				"ignoreTrailingSlashes":false
			},
			"options":{
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"cacheKey":"{{ 68uH2.outputs.salesPointNumber }}",
					"enabled":true,
					"timeToLive":"300",
					"usagePolicy":"ALWAYS"
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false
				},
				"logConfig":{
					"enabled":false
				},
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"STOP",
				"telemetryConfig":{
					"enableTelemetry":false
				}
			},
			"skip":false,
			"subTitle":"Read SalesChannel by VPNR",
			"title":"Execute request",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":12,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"UCFO5@oTsB2-1@y",
			"id":"uBllR",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"responseValid":{
							"type":"boolean",
							"title":"responseValid",
							"default":false
						},
						"vk":{
							"type":"number",
							"title":"vk"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"vpnrData":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"vpnr":{
										"type":"string",
										"title":"vpnr"
									},
									"vk":{
										"type":"string",
										"title":"vk",
										"help":"Vertriebskanal (sales channel)"
									}
								},
								"additionalProperties":false
							},
							"title":"vpnrData"
						},
						"requestVPNR":{
							"type":"string",
							"title":"requestVPNR"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def vpnrData = init(\"vpnrData\")\r\ndef requestVPNR = init(\"requestVPNR\")\r\n\r\ndef result = main(vpnrData, requestVPNR)\r\nreturn result\r\n\r\ndef main(vpnrData, requestVPNR) {\r\n\r\n    def vk = null\r\n    def responseValid = false\r\n\r\n    if (vpnrData && requestVPNR) {\r\n        def resultList = vpnrData?.findAll()\r\n        if (resultList != null) {\r\n            resultList.each { result ->\r\n                if (result.vk && result.vpnr) {\r\n                    if (result.vpnr.equals(requestVPNR)) {\r\n                        responseValid = true\r\n                        vk = result.vk\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return [responseValid: responseValid, vk: vk]\r\n}\r\n\r\ndef Object init(String variableKey) {\r\n    if (binding.variables.containsKey(variableKey)) {\r\n        return binding.getVariable(variableKey)\r\n    }\r\n    return null\r\n}",
				"isAsync":false,
				"parameters":{
					"requestVPNR":"{{ 68uH2.outputs.salesPointNumber }}",
					"vpnrData":{
						"source":"{{ 7N8fo.outputs.result }}",
						"ua:type":"mappedArray",
						"items":{
							"vpnr":"{{ 7N8fo.outputs.result[0].vpnr }}",
							"vk":"{{ 7N8fo.outputs.result[0].vk }}"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Check Response",
			"title":"Execute groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":0,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"UCFO5@oTsB2-1@y",
			"id":"Qrbp8",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"{{ uBllR.outputs.result.responseValid }}",
						"filter":{
							"operator":"EQUAL",
							"value":"true"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Exists result?",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Qrbp8@UCFO5@oTsB2-1@y@y",
			"id":"LvcAu",
			"index":0,
			"inputs":{
				"variables":[
					{
						"source":"{{ 5nPo7.outputs.salesChannel }}",
						"value":"{{ uBllR.outputs.result.vk }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Update salesChannel",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":14,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"UCFO5@oTsB2-1@n",
			"id":"_UJ3Yj",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"{{ 68uH2.outputs.salesChannel }}",
						"filter":{
							"operator":"EXISTS"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Have SalesChannel",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_UJ3Yj@UCFO5@oTsB2-1@n@y",
			"id":"_5xOGK",
			"index":0,
			"inputs":{
				"variables":[
					{
						"source":"{{ 5nPo7.outputs.salesChannel }}",
						"value":"{{ 68uH2.outputs.salesChannel }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Update salesChannel",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":0,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"oTsB2-1",
			"id":"TroXi",
			"index":0,
			"inputs":{
				"result":{
					"salesChannel":"{{ 5nPo7.outputs.salesChannel }}"
				}
			},
			"skip":false,
			"subTitle":"Return salesChannel",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":34,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"loadtesting"
		}
	},
	"standard":false,
	"tags":[
		"dev"
	],
	"version":115
}