{
	"appsUsed":[
		"storage_by_unifyapps"
	],
	"createdTime":1760005871716,
	"deleted":false,
	"edges":[
		{
			"fromNodeId":"n_9yvaG",
			"priority":0,
			"skip":false,
			"toNodeId":"n_6weX0",
			"type":"next"
		},
		{
			"fromNodeId":"n_6weX0",
			"priority":0,
			"skip":false,
			"toNodeId":"n_1TiPd",
			"type":"next"
		},
		{
			"fromNodeId":"n_1TiPd",
			"priority":0,
			"skip":false,
			"toNodeId":"n_29tOV",
			"type":"next"
		},
		{
			"fromNodeId":"n_29tOV",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ZclTq",
			"type":"next"
		},
		{
			"fromNodeId":"n_ZclTq",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Xh46H",
			"type":"loop"
		},
		{
			"fromNodeId":"n_Xh46H",
			"priority":0,
			"skip":false,
			"toNodeId":"n_zamhg",
			"type":"next"
		},
		{
			"fromNodeId":"n_zamhg",
			"priority":0,
			"skip":false,
			"toNodeId":"n_jwDXJ",
			"type":"next"
		},
		{
			"fromNodeId":"n_jwDXJ",
			"priority":0,
			"skip":false,
			"toNodeId":"n_gz9ls",
			"type":"next"
		},
		{
			"fromNodeId":"n_gz9ls",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ZclTq",
			"type":"next"
		},
		{
			"fromNodeId":"n_ZclTq",
			"priority":0,
			"skip":false,
			"toNodeId":"n_vC5RH",
			"type":"next"
		}
	],
	"id":"68e65975b159731f1efe531b",
	"lastModifiedBy":162101,
	"lcName":"fetch attractions",
	"modifiedTime":1760005871716,
	"name":"Fetch Attractions",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":118,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_wtBR3-1",
			"id":"n_9yvaG",
			"index":1,
			"inputs":{
				"result":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"objects":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"properties":{
										"type":"object",
										"properties":{
											"short_description":{
												"type":"string",
												"title":"short_description"
											},
											"amenities":{
												"type":"array",
												"items":{
													"type":"string"
												},
												"title":"amenities"
											},
											"ticket_types_price_ranges_amount":{
												"type":"string",
												"title":"ticket_types_price_ranges_amount"
											},
											"highlight":{
												"type":"string",
												"title":"highlight"
											},
											"accessibility_info":{
												"type":"string",
												"title":"accessibility_info"
											},
											"opening_hours_seasonality":{
												"type":"string",
												"title":"opening_hours_seasonality"
											},
											"base_price_amount":{
												"type":"string",
												"title":"base_price_amount"
											},
											"tourist_attraction_list":{
												"type":"string",
												"title":"tourist_attraction_list"
											},
											"trusted_resellers_url":{
												"type":"string",
												"title":"trusted_resellers_url"
											},
											"crowd_management_tips":{
												"type":"array",
												"items":{
													"type":"object",
													"properties":{
														"item":{
															"type":"string",
															"title":"item"
														}
													},
													"additionalProperties":false
												},
												"title":"crowd_management_tips"
											},
											"final_amenities":{
												"type":"array",
												"items":{
													"type":"object",
													"properties":{
														"item":{
															"type":"string",
															"title":"item"
														}
													},
													"additionalProperties":false
												},
												"title":"final_amenities"
											},
											"best_time_to_visit":{
												"type":"string",
												"title":"best_time_to_visit"
											},
											"summary":{
												"type":"string",
												"title":"summary"
											},
											"address":{
												"type":"string",
												"title":"address"
											},
											"official_booking_link_url":{
												"type":"string",
												"title":"official_booking_link_url"
											},
											"image_url":{
												"type":"string",
												"title":"image_url"
											},
											"map_link_url":{
												"type":"string",
												"title":"map_link_url"
											},
											"tourist_attraction_suggestions":{
												"type":"string",
												"title":"tourist_attraction_suggestions"
											},
											"instagram_url":{
												"type":"string",
												"title":"instagram_url"
											},
											"website_url":{
												"type":"string",
												"title":"website_url"
											},
											"operating_hours":{
												"type":"array",
												"items":{
													"type":"string"
												},
												"title":"operating_hours"
											},
											"name":{
												"type":"string",
												"title":"name"
											},
											"phone_number":{
												"type":"string",
												"title":"phone_number"
											},
											"location":{
												"type":"object",
												"properties":{
													"lat":{
														"type":"number",
														"title":"lat"
													},
													"lon":{
														"type":"number",
														"title":"lon"
													}
												},
												"title":"location",
												"additionalProperties":false
											},
											"short_address":{
												"type":"string",
												"title":"short_address"
											},
											"google_rating":{
												"type":"number",
												"title":"google_rating"
											},
											"google_rating_count":{
												"type":"integer",
												"title":"google_rating_count"
											},
											"distanceFromUser":{
												"type":"string",
												"title":"Distance From User"
											},
											"basePriceAmount":{
												"type":"number",
												"title":"Base Price Amount"
											},
											"openStatus":{
												"type":"string",
												"title":"Open Status"
											},
											"todaysTimings":{
												"type":"string",
												"title":"Todays Timings"
											}
										},
										"title":"properties",
										"additionalProperties":false,
										"required":[]
									},
									"total":{
										"type":"number",
										"title":"Total"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"objects"
						}
					}
				},
				"setup":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"search":{
							"type":"string",
							"title":"Search"
						},
						"filter":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Filter"
						},
						"openDays":{
							"type":"string",
							"title":"Open Days"
						},
						"pagination":{
							"type":"number",
							"title":"Pagination"
						},
						"filterForID":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Filter For ID"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger via automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":96,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_wtBR3-1",
			"id":"n_6weX0",
			"index":2,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"Initial list items",
							"ui:description":"Set the initial values of the list (defaults to empty)"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"type":"object",
									"properties":{
										"properties":{
											"type":"object",
											"properties":{
												"short_description":{
													"type":"string",
													"title":"short_description"
												},
												"amenities":{
													"type":"array",
													"items":{
														"type":"string"
													},
													"title":"amenities"
												},
												"ticket_types_price_ranges_amount":{
													"type":"string",
													"title":"ticket_types_price_ranges_amount"
												},
												"google_rating":{
													"type":"number",
													"title":"google_rating"
												},
												"highlight":{
													"type":"string",
													"title":"highlight"
												},
												"accessibility_info":{
													"type":"string",
													"title":"accessibility_info"
												},
												"opening_hours_seasonality":{
													"type":"string",
													"title":"opening_hours_seasonality"
												},
												"base_price_amount":{
													"type":"string",
													"title":"base_price_amount"
												},
												"tourist_attraction_list":{
													"type":"string",
													"title":"tourist_attraction_list"
												},
												"trusted_resellers_url":{
													"type":"string",
													"title":"trusted_resellers_url"
												},
												"crowd_management_tips":{
													"type":"array",
													"items":{
														"type":"object",
														"properties":{
															"item":{
																"type":"string",
																"title":"item"
															}
														},
														"additionalProperties":false
													},
													"title":"crowd_management_tips"
												},
												"final_amenities":{
													"type":"array",
													"items":{
														"type":"object",
														"properties":{
															"item":{
																"type":"string",
																"title":"item"
															}
														},
														"additionalProperties":false
													},
													"title":"final_amenities"
												},
												"best_time_to_visit":{
													"type":"string",
													"title":"best_time_to_visit"
												},
												"summary":{
													"type":"string",
													"title":"summary"
												},
												"address":{
													"type":"string",
													"title":"address"
												},
												"official_booking_link_url":{
													"type":"string",
													"title":"official_booking_link_url"
												},
												"image_url":{
													"type":"string",
													"title":"image_url"
												},
												"map_link_url":{
													"type":"string",
													"title":"map_link_url"
												},
												"tourist_attraction_suggestions":{
													"type":"string",
													"title":"tourist_attraction_suggestions"
												},
												"google_rating_count":{
													"type":"integer",
													"title":"google_rating_count"
												},
												"instagram_url":{
													"type":"string",
													"title":"instagram_url"
												},
												"website_url":{
													"type":"string",
													"title":"website_url"
												},
												"operating_hours":{
													"type":"array",
													"items":{
														"type":"string"
													},
													"title":"operating_hours"
												},
												"name":{
													"type":"string",
													"title":"name"
												},
												"phone_number":{
													"type":"string",
													"title":"phone_number"
												},
												"location":{
													"type":"object",
													"properties":{
														"lat":{
															"type":"number",
															"title":"lat"
														},
														"lon":{
															"type":"number",
															"title":"lon"
														}
													},
													"title":"location",
													"additionalProperties":false
												},
												"short_address":{
													"type":"string",
													"title":"short_address"
												},
												"openStatus":{
													"type":"string",
													"title":"Open Status"
												},
												"todaysTimings":{
													"type":"string",
													"title":"Todays Timings"
												},
												"distance":{
													"type":"number",
													"title":"Distance"
												},
												"basePrice":{
													"type":"string",
													"title":"Base Price"
												}
											},
											"title":"properties",
											"additionalProperties":false,
											"required":[]
										},
										"standard":{
											"type":"boolean",
											"title":"standard"
										},
										"version":{
											"type":"integer",
											"title":"version"
										}
									},
									"additionalProperties":false,
									"required":[]
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray"
				},
				"ua:title":"Objects",
				"ua:list_type":"OBJECT"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"Objects",
							"disableActions":true,
							"items":{
								"type":"object",
								"properties":{
									"properties":{
										"type":"object",
										"properties":{
											"short_description":{
												"type":"string",
												"title":"short_description"
											},
											"amenities":{
												"type":"array",
												"items":{
													"type":"string"
												},
												"title":"amenities"
											},
											"ticket_types_price_ranges_amount":{
												"type":"string",
												"title":"ticket_types_price_ranges_amount"
											},
											"google_rating":{
												"type":"number",
												"title":"google_rating"
											},
											"highlight":{
												"type":"string",
												"title":"highlight"
											},
											"accessibility_info":{
												"type":"string",
												"title":"accessibility_info"
											},
											"opening_hours_seasonality":{
												"type":"string",
												"title":"opening_hours_seasonality"
											},
											"base_price_amount":{
												"type":"string",
												"title":"base_price_amount"
											},
											"tourist_attraction_list":{
												"type":"string",
												"title":"tourist_attraction_list"
											},
											"trusted_resellers_url":{
												"type":"string",
												"title":"trusted_resellers_url"
											},
											"crowd_management_tips":{
												"type":"array",
												"items":{
													"type":"object",
													"properties":{
														"item":{
															"type":"string",
															"title":"item"
														}
													},
													"additionalProperties":false
												},
												"title":"crowd_management_tips"
											},
											"final_amenities":{
												"type":"array",
												"items":{
													"type":"object",
													"properties":{
														"item":{
															"type":"string",
															"title":"item"
														}
													},
													"additionalProperties":false
												},
												"title":"final_amenities"
											},
											"best_time_to_visit":{
												"type":"string",
												"title":"best_time_to_visit"
											},
											"summary":{
												"type":"string",
												"title":"summary"
											},
											"address":{
												"type":"string",
												"title":"address"
											},
											"official_booking_link_url":{
												"type":"string",
												"title":"official_booking_link_url"
											},
											"image_url":{
												"type":"string",
												"title":"image_url"
											},
											"map_link_url":{
												"type":"string",
												"title":"map_link_url"
											},
											"tourist_attraction_suggestions":{
												"type":"string",
												"title":"tourist_attraction_suggestions"
											},
											"google_rating_count":{
												"type":"integer",
												"title":"google_rating_count"
											},
											"instagram_url":{
												"type":"string",
												"title":"instagram_url"
											},
											"website_url":{
												"type":"string",
												"title":"website_url"
											},
											"operating_hours":{
												"type":"array",
												"items":{
													"type":"string"
												},
												"title":"operating_hours"
											},
											"name":{
												"type":"string",
												"title":"name"
											},
											"phone_number":{
												"type":"string",
												"title":"phone_number"
											},
											"location":{
												"type":"object",
												"properties":{
													"lat":{
														"type":"number",
														"title":"lat"
													},
													"lon":{
														"type":"number",
														"title":"lon"
													}
												},
												"title":"location",
												"additionalProperties":false
											},
											"short_address":{
												"type":"string",
												"title":"short_address"
											},
											"openStatus":{
												"type":"string",
												"title":"Open Status"
											},
											"todaysTimings":{
												"type":"string",
												"title":"Todays Timings"
											},
											"distance":{
												"type":"number",
												"title":"Distance"
											},
											"basePrice":{
												"type":"string",
												"title":"Base Price"
											}
										},
										"title":"properties",
										"additionalProperties":false,
										"required":[]
									},
									"standard":{
										"type":"boolean",
										"title":"standard"
									},
									"version":{
										"type":"integer",
										"title":"version"
									}
								},
								"required":[]
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"standard_entities",
				"resourceVersion":263,
				"resourceName":"standard_entities_fetch_user",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_wtBR3-1",
			"id":"n_1TiPd",
			"index":3,
			"inputs":{
				"fetchBy":"id",
				"applicationId":"dda-16",
				"user":"204"
			},
			"skip":false,
			"subTitle":"Standard entities by UnifyApps",
			"title":"Fetch User",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"storage_by_unifyapps_fetch_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_wtBR3-1",
			"id":"n_29tOV",
			"index":4,
			"inputs":{
				"triggerInputCondition":{
					"filters":[
						{
							"property":"properties_entryId",
							"filter":{
								"operator":"IN",
								"value":"{{ n_9yvaG.outputs.filterForID }}"
							}
						},
						{
							"resolvedFilter":{
								"filter":"{{ n_9yvaG.outputs.filter }}"
							}
						}
					],
					"operator":"AND"
				},
				"searchField":{
					"fields":[
						"properties_name"
					],
					"expression":"{{ n_9yvaG.outputs.search }}"
				},
				"object_type":"aman_attraction",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"sortBy":[],
				"translationsOption":"DEFAULT",
				"page":{
					"paginateBy":"OFFSET",
					"limit":5,
					"offset":"{{ n_9yvaG.outputs.pagination }}"
				},
				"numberOfRecordsToFetch":"MULTIPLE",
				"readThroughSessionVariables":false,
				"includeTotalCount":true
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Fetch records",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":33,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_wtBR3-1",
			"id":"n_ZclTq",
			"index":5,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ n_29tOV.outputs.objects }}",
				"captureIterations":false
			},
			"skip":false,
			"subTitle":"Loop",
			"title":"For each loop",
			"type":"LOOP"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.weekday_descriptions.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"CONTINUE",
			"groupId":"n_ZclTq@_wtBR3-1@l",
			"id":"n_Xh46H",
			"index":6,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"openStatus":{
							"type":"string",
							"title":"Open Status"
						},
						"todaysTimings":{
							"type":"string",
							"title":"Todays Timings"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"weekday_descriptions":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Weekday Description"
						}
					}
				},
				"code":"def now = new Date()\ndef dayOfWeek = now.getDay() // 0=Sunday, 1=Monday, ..., 6=Saturday\ndef currentHour = now.getHours()\ndef currentMinute = now.getMinutes()\n\n// Map day numbers to day names\ndef dayNames = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"]\ndef todayName = dayNames[dayOfWeek]\n\n// Find today's schedule\ndef todaySchedule = weekday_descriptions.find { it.startsWith(todayName) }\ndef todaysTimings = todaySchedule.split(\": \")[1].replaceAll(\",\", \"\").trim()\n\n// Parse opening and closing times\ndef timeParts = todaysTimings.split(\" - \")\ndef openTime = timeParts[0].trim()\ndef closeTime = timeParts[1].trim()\n\n// Convert times to 24-hour format for comparison\ndef convertTo24Hour = { timeStr, isClosingTime = false ->\n    timeStr = timeStr.trim().replaceAll(\",\", \"\")\n    \n    // Check if it's already in 24-hour format (no AM/PM)\n    if (!timeStr.toUpperCase().contains(\"AM\") && !timeStr.toUpperCase().contains(\"PM\")) {\n        def parts = timeStr.split(\":\")\n        def hour = Integer.parseInt(parts[0])\n        def minute = Integer.parseInt(parts[1])\n        return [hour: hour, minute: minute]\n    }\n    \n    // Handle 12-hour format (with or without spaces)\n    def parts = timeStr.split(\":\")\n    def hour = Integer.parseInt(parts[0])\n    def minutePart = parts[1].toUpperCase()\n    \n    def minute, period\n    \n    // Handle format with space: \"8:00 PM\" or without space: \"8:00PM\"\n    if (minutePart.contains(\" \")) {\n        def minuteAndPeriod = minutePart.split(\" \")\n        minute = Integer.parseInt(minuteAndPeriod[0])\n        period = minuteAndPeriod[1]\n    } else {\n        // Extract minute digits and period\n        minute = Integer.parseInt(minutePart.substring(0, 2))\n        period = minutePart.substring(2)\n    }\n    \n    // Handle 12-hour to 24-hour conversion\n    if (period == \"PM\" && hour != 12) {\n        hour += 12\n    } else if (period == \"AM\" && hour == 12) {\n        // Special case: 12:00 AM as closing time means end of day (24:00)\n        if (isClosingTime) {\n            hour = 24\n        } else {\n            hour = 0\n        }\n    }\n    \n    return [hour: hour, minute: minute]\n}\n\ndef openTimeConverted = convertTo24Hour(openTime, false)\ndef closeTimeConverted = convertTo24Hour(closeTime, true)\n\n// Calculate current time in minutes for easy comparison\ndef currentTimeInMinutes = currentHour * 60 + currentMinute\ndef openTimeInMinutes = openTimeConverted.hour * 60 + openTimeConverted.minute\ndef closeTimeInMinutes = closeTimeConverted.hour * 60 + closeTimeConverted.minute\n\n// Handle overnight hours (when business operates across midnight)\ndef openStatus\nif (closeTimeInMinutes <= openTimeInMinutes) {\n    // Business operates overnight (e.g., 12:00 PM - 1:00 AM)\n    // Open if: current time >= opening time OR current time < closing time\n    openStatus = (currentTimeInMinutes >= openTimeInMinutes || currentTimeInMinutes < closeTimeInMinutes) ? \"open\" : \"closed\"\n} else {\n    // Normal same-day hours (e.g., 9:00 AM - 5:00 PM)\n    // Open if: current time >= opening time AND current time < closing time\n    openStatus = (currentTimeInMinutes >= openTimeInMinutes && currentTimeInMinutes < closeTimeInMinutes) ? \"open\" : \"closed\"\n}\n\n// Return only what was requested\ndef result = [\n    openStatus: openStatus,\n    todaysTimings: todaysTimings\n]\n\nreturn result",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"weekday_descriptions":{
						"ua:type":"mappedArray",
						"source":"{{ n_ZclTq.outputs.item.properties.operating_hours }}",
						"items":"{{ n_ZclTq.outputs.item.properties.operating_hours[0] }}"
					}
				}
			},
			"options":{
				"bulkheadConfig":{
					"enabled":false,
					"global":false
				},
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false,
					"usagePolicy":"ALWAYS"
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false,
					"postHooks":[
						
					],
					"preHooks":[
						
					]
				},
				"logConfig":{
					"enabled":false,
					"logPolicies":[
						
					]
				},
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"CONTINUE",
				"telemetryConfig":{
					"enableTelemetry":false,
					"metricConfigs":[
						
					]
				},
				"timeoutConfig":{
					"enabled":false
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_ZclTq@_wtBR3-1@l",
			"id":"n_zamhg",
			"index":7,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"basePrice":{
							"type":"string",
							"title":"basePrice"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"priceRange":{
							"type":"string",
							"title":"Price Range"
						}
					}
				},
				"code":"def getLowestPrice(String priceRange) {\n    // Handle null or empty input\n    if (!priceRange?.trim()) {\n        return null\n    }\n    \n    // Regular expression to match price range pattern\n    // Matches: number-number currency_code\n    def pattern = /(\\d+(?:\\.\\d+)?)\\s*-\\s*(\\d+(?:\\.\\d+)?)\\s+([A-Z]{3}|\\$|€|£|¥)/\n    def matcher = priceRange =~ pattern\n    \n    if (matcher.find()) {\n        def lowerPrice = matcher.group(1)\n        def currency = matcher.group(3)\n        return lowerPrice + \" \" + currency\n    }\n    \n    // If pattern doesn't match, try to handle edge cases\n    // Look for just a single number with currency\n    def singlePricePattern = /(\\d+(?:\\.\\d+)?)\\s+([A-Z]{3}|\\$|€|£|¥)/\n    def singleMatcher = priceRange =~ singlePricePattern\n    \n    if (singleMatcher.find()) {\n        return priceRange.trim()\n    }\n    \n    // Return original string if no pattern matches\n    return priceRange.trim()\n}\n\ndef basePrice = getLowestPrice(priceRange)",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"priceRange":"{{ n_ZclTq.outputs.item.properties.ticket_types_price_ranges_amount }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"CONTINUE",
			"groupId":"n_ZclTq@_wtBR3-1@l",
			"id":"n_jwDXJ",
			"index":8,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"distance":{
							"type":"number",
							"title":"Distance"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"lat1":{
							"type":"number",
							"title":"Lat 1"
						},
						"lon1":{
							"type":"number",
							"title":"Lon 1"
						},
						"lat2":{
							"type":"number",
							"title":"Lat 2"
						},
						"lon2":{
							"type":"number",
							"title":"Lon 2"
						}
					}
				},
				"code":"def calculateDistance(lat1, lon1, lat2, lon2) {\n    // Earth's radius in kilometers\n    def R = 6371.0\n    \n    // Convert degrees to radians\n    def lat1Rad = Math.toRadians(lat1)\n    def lon1Rad = Math.toRadians(lon1)\n    def lat2Rad = Math.toRadians(lat2)\n    def lon2Rad = Math.toRadians(lon2)\n    \n    // Calculate differences\n    def deltaLat = lat2Rad - lat1Rad\n    def deltaLon = lon2Rad - lon1Rad\n    \n    // Haversine formula\n    def a = Math.sin(deltaLat / 2) * Math.sin(deltaLat / 2) + \n            Math.cos(lat1Rad) * Math.cos(lat2Rad) * \n            Math.sin(deltaLon / 2) * Math.sin(deltaLon / 2)\n    \n    def c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a))\n    \n    // Distance in kilometers\n    def distance = R * c\n    \n    return distance\n}\n\ndef distance = calculateDistance(lat1, lon1, lat2, lon2)",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"lat1":"{{ n_1TiPd.outputs.customProperties.location.lat }}",
					"lon1":"{{ n_1TiPd.outputs.customProperties.location.long }}",
					"lat2":"{{ n_ZclTq.outputs.item.properties.location.lat }}",
					"lon2":"{{ n_ZclTq.outputs.item.properties.location.lon }}"
				}
			},
			"options":{
				"bulkheadConfig":{
					"enabled":false,
					"global":false
				},
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false,
					"usagePolicy":"ALWAYS"
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false,
					"postHooks":[
						
					],
					"preHooks":[
						
					]
				},
				"logConfig":{
					"enabled":false,
					"logPolicies":[
						
					]
				},
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"CONTINUE",
				"telemetryConfig":{
					"enableTelemetry":false,
					"metricConfigs":[
						
					]
				},
				"timeoutConfig":{
					"enabled":false
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.itemToAdd.properties.short_description",
					"root.itemToAdd.properties.amenities.items",
					"root.itemToAdd.properties.ticket_types_price_ranges_amount",
					"root.itemToAdd.properties.google_rating",
					"root.itemToAdd.properties.highlight",
					"root.itemToAdd.properties.accessibility_info",
					"root.itemToAdd.properties.opening_hours_seasonality",
					"root.itemToAdd.properties.base_price_amount",
					"root.itemToAdd.properties.tourist_attraction_list",
					"root.itemToAdd.properties.trusted_resellers_url",
					"root.itemToAdd.properties.crowd_management_tips.items.item",
					"root.itemToAdd.properties.final_amenities.items.item",
					"root.itemToAdd.properties.best_time_to_visit",
					"root.itemToAdd.properties.summary",
					"root.itemToAdd.properties.address",
					"root.itemToAdd.properties.official_booking_link_url",
					"root.itemToAdd.properties.image_url",
					"root.itemToAdd.properties.map_link_url",
					"root.itemToAdd.properties.tourist_attraction_suggestions",
					"root.itemToAdd.properties.google_rating_count",
					"root.itemToAdd.properties.instagram_url",
					"root.itemToAdd.properties.website_url",
					"root.itemToAdd.properties.operating_hours.items",
					"root.itemToAdd.properties.name",
					"root.itemToAdd.properties.phone_number",
					"root.itemToAdd.properties.location.lat",
					"root.itemToAdd.properties.location.lon",
					"root.itemToAdd.properties.short_address",
					"root.itemToAdd.properties.openStatus",
					"root.itemToAdd.properties.todaysTimings",
					"root.itemToAdd.properties.distance",
					"root.itemToAdd.properties.basePrice"
				]
			},
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":96,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_ZclTq@_wtBR3-1@l",
			"id":"n_gz9ls",
			"index":9,
			"inputs":{
				"itemToAdd":{
					"properties":{
						"short_description":"{{ n_ZclTq.outputs.item.properties.short_description }}",
						"ticket_types_price_ranges_amount":"{{ n_ZclTq.outputs.item.properties.ticket_types_price_ranges_amount }}",
						"google_rating":"{{ n_ZclTq.outputs.item.properties.google_rating }}",
						"highlight":"{{ n_ZclTq.outputs.item.properties.highlight }}",
						"accessibility_info":"{{ n_ZclTq.outputs.item.properties.accessibility_info }}",
						"opening_hours_seasonality":"{{ n_ZclTq.outputs.item.properties.opening_hours_seasonality }}",
						"base_price_amount":"{{ n_ZclTq.outputs.item.properties.base_price_amount }}",
						"tourist_attraction_list":"{{ n_ZclTq.outputs.item.properties.tourist_attraction_list }}",
						"trusted_resellers_url":"{{ n_ZclTq.outputs.item.properties.trusted_resellers_url }}",
						"best_time_to_visit":"{{ n_ZclTq.outputs.item.properties.best_time_to_visit }}",
						"summary":"{{ n_ZclTq.outputs.item.properties.summary }}",
						"address":"{{ n_ZclTq.outputs.item.properties.address }}",
						"official_booking_link_url":"{{ n_ZclTq.outputs.item.properties.official_booking_link_url }}",
						"image_url":"{{ n_ZclTq.outputs.item.properties.image_url }}",
						"map_link_url":"{{ n_ZclTq.outputs.item.properties.map_link_url }}",
						"tourist_attraction_suggestions":"{{ n_ZclTq.outputs.item.properties.tourist_attraction_suggestions }}",
						"google_rating_count":"{{ n_ZclTq.outputs.item.properties.google_rating_count }}",
						"instagram_url":"{{ n_ZclTq.outputs.item.properties.instagram_url }}",
						"website_url":"{{ n_ZclTq.outputs.item.properties.website_url }}",
						"name":"{{ n_ZclTq.outputs.item.properties.name }}",
						"phone_number":"{{ n_ZclTq.outputs.item.properties.phone_number }}",
						"location":{
							"lat":"{{ n_ZclTq.outputs.item.properties.location.lat }}",
							"lon":"{{ n_ZclTq.outputs.item.properties.location.lon }}"
						},
						"short_address":"{{ n_ZclTq.outputs.item.properties.short_address }}",
						"openStatus":"{{ n_Xh46H.outputs.result.openStatus }}",
						"todaysTimings":"{{ n_Xh46H.outputs.result.todaysTimings }}",
						"distance":"{{ n_jwDXJ.outputs.result }}",
						"basePrice":"{{ n_zamhg.outputs.result }}",
						"amenities":{
							"source":"{{ n_ZclTq.outputs.item.properties.amenities }}",
							"ua:type":"mappedArray",
							"items":"{{ n_ZclTq.outputs.item.properties.amenities[0] }}"
						},
						"crowd_management_tips":{
							"source":"{{ n_ZclTq.outputs.item.properties.crowd_management_tips }}",
							"ua:type":"mappedArray",
							"items":{
								"item":"{{ n_ZclTq.outputs.item.properties.crowd_management_tips[0].item }}"
							}
						},
						"final_amenities":{
							"source":"{{ n_ZclTq.outputs.item.properties.final_amenities }}",
							"ua:type":"mappedArray",
							"items":{
								"item":"{{ n_ZclTq.outputs.item.properties.final_amenities[0].item }}"
							}
						},
						"operating_hours":{
							"source":"{{ n_ZclTq.outputs.item.properties.operating_hours }}",
							"ua:type":"mappedArray",
							"items":"{{ n_ZclTq.outputs.item.properties.operating_hours[0] }}"
						}
					},
					"version":"{{ n_ZclTq.outputs.item.version }}"
				},
				"insertLocation":"END",
				"listName":"{{ n_6weX0.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.result.objects.source",
					"root.result.objects.ua:type",
					"root.result.objects.items.id",
					"root.result.objects.items.properties.short_description",
					"root.result.objects.items.properties.amenities.source",
					"root.result.objects.items.properties.amenities.ua:type",
					"root.result.objects.items.properties.amenities.items",
					"root.result.objects.items.properties.ticket_types_price_ranges_amount",
					"root.result.objects.items.properties.highlight",
					"root.result.objects.items.properties.accessibility_info",
					"root.result.objects.items.properties.opening_hours_seasonality",
					"root.result.objects.items.properties.base_price_amount",
					"root.result.objects.items.properties.tourist_attraction_list",
					"root.result.objects.items.properties.trusted_resellers_url",
					"root.result.objects.items.properties.crowd_management_tips.source",
					"root.result.objects.items.properties.crowd_management_tips.ua:type",
					"root.result.objects.items.properties.crowd_management_tips.items.item",
					"root.result.objects.items.properties.final_amenities.source",
					"root.result.objects.items.properties.final_amenities.ua:type",
					"root.result.objects.items.properties.final_amenities.items.item",
					"root.result.objects.items.properties.best_time_to_visit",
					"root.result.objects.items.properties.summary",
					"root.result.objects.items.properties.address",
					"root.result.objects.items.properties.official_booking_link_url",
					"root.result.objects.items.properties.image_url",
					"root.result.objects.items.properties.map_link_url",
					"root.result.objects.items.properties.tourist_attraction_suggestions",
					"root.result.objects.items.properties.instagram_url",
					"root.result.objects.items.properties.website_url",
					"root.result.objects.items.properties.operating_hours.source",
					"root.result.objects.items.properties.operating_hours.ua:type",
					"root.result.objects.items.properties.operating_hours.items",
					"root.result.objects.items.properties.name",
					"root.result.objects.items.properties.phone_number",
					"root.result.objects.items.properties.location.lat",
					"root.result.objects.items.properties.location.lon",
					"root.result.objects.items.properties.short_address",
					"root.result.objects.items.properties.google_rating",
					"root.result.objects.items.properties.google_rating_count",
					"root.result.objects.items.version",
					"root.result.hasMore"
				]
			},
			"context":{
				"appName":"callables",
				"resourceVersion":0,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_wtBR3-1",
			"id":"n_vC5RH",
			"index":10,
			"inputs":{
				"result":{
					"objects":{
						"ua:type":"mappedArray",
						"items":{
							"properties":{
								"amenities":{
									"ua:type":"mappedArray",
									"source":"{{ n_6weX0.outputs.items[0].properties.amenities }}",
									"items":"{{ n_6weX0.outputs.items[0].properties.amenities[0] }}"
								},
								"crowd_management_tips":{
									"ua:type":"mappedArray",
									"source":"{{ n_6weX0.outputs.items[0].properties.crowd_management_tips }}",
									"items":{
										"item":"{{ n_6weX0.outputs.items[0].properties.crowd_management_tips[0].item }}"
									}
								},
								"final_amenities":{
									"ua:type":"mappedArray",
									"source":"{{ n_6weX0.outputs.items[0].properties.final_amenities }}",
									"items":{
										"item":"{{ n_6weX0.outputs.items[0].properties.final_amenities[0].item }}"
									}
								},
								"operating_hours":{
									"ua:type":"mappedArray",
									"source":"{{ n_6weX0.outputs.items[0].properties.operating_hours }}",
									"items":"{{ n_6weX0.outputs.items[0].properties.operating_hours[0] }}"
								},
								"location":{
									"lat":"{{ n_6weX0.outputs.items[0].properties.location.lat }}",
									"lon":"{{ n_6weX0.outputs.items[0].properties.location.lon }}"
								},
								"short_description":"{{ n_6weX0.outputs.items[0].properties.short_description }}",
								"ticket_types_price_ranges_amount":"{{ n_6weX0.outputs.items[0].properties.ticket_types_price_ranges_amount }}",
								"highlight":"{{ n_6weX0.outputs.items[0].properties.highlight }}",
								"accessibility_info":"{{ n_6weX0.outputs.items[0].properties.accessibility_info }}",
								"opening_hours_seasonality":"{{ n_6weX0.outputs.items[0].properties.opening_hours_seasonality }}",
								"base_price_amount":"{{ n_6weX0.outputs.items[0].properties.base_price_amount }}",
								"tourist_attraction_list":"{{ n_6weX0.outputs.items[0].properties.tourist_attraction_list }}",
								"trusted_resellers_url":"{{ n_6weX0.outputs.items[0].properties.trusted_resellers_url }}",
								"best_time_to_visit":"{{ n_6weX0.outputs.items[0].properties.best_time_to_visit }}",
								"summary":"{{ n_6weX0.outputs.items[0].properties.summary }}",
								"address":"{{ n_6weX0.outputs.items[0].properties.address }}",
								"official_booking_link_url":"{{ n_6weX0.outputs.items[0].properties.official_booking_link_url }}",
								"image_url":"{{ n_6weX0.outputs.items[0].properties.image_url }}",
								"map_link_url":"{{ n_6weX0.outputs.items[0].properties.map_link_url }}",
								"tourist_attraction_suggestions":"{{ n_6weX0.outputs.items[0].properties.tourist_attraction_suggestions }}",
								"instagram_url":"{{ n_6weX0.outputs.items[0].properties.instagram_url }}",
								"website_url":"{{ n_6weX0.outputs.items[0].properties.website_url }}",
								"name":"{{ n_6weX0.outputs.items[0].properties.name }}",
								"phone_number":"{{ n_6weX0.outputs.items[0].properties.phone_number }}",
								"short_address":"{{ n_6weX0.outputs.items[0].properties.short_address }}",
								"google_rating":"{{ n_6weX0.outputs.items[0].properties.google_rating }}",
								"google_rating_count":"{{ n_6weX0.outputs.items[0].properties.google_rating_count }}",
								"distanceFromUser":"{{ n_6weX0.outputs.items[0].properties.distance }}",
								"basePriceAmount":"{{ n_6weX0.outputs.items[0].properties.basePrice }}",
								"openStatus":"{{ n_6weX0.outputs.items[0].properties.openStatus }}",
								"todaysTimings":"{{ n_6weX0.outputs.items[0].properties.todaysTimings }}"
							},
							"total":"{{ n_29tOV.outputs.total }}"
						},
						"source":"{{ n_6weX0.outputs.items }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":162101,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":false,
	"tags":[
		
	],
	"version":11
}