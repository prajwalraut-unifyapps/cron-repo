{
	"appsUsed":[
		
	],
	"createdTime":1751383697027,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1759607769239,
		"deployedBy":-1,
		"deployedDefinitionId":"68e17bd9daffd5540cf3bd1d",
		"status":"DEPLOYED",
		"version":68,
		"workflowVersion":126
	},
	"edges":[
		{
			"fromNodeId":"GkZzf",
			"priority":0,
			"skip":false,
			"toNodeId":"6mYy4",
			"type":"next"
		},
		{
			"fromNodeId":"6mYy4",
			"priority":0,
			"skip":false,
			"toNodeId":"vJdnu",
			"type":"next"
		},
		{
			"fromNodeId":"vJdnu",
			"priority":0,
			"skip":false,
			"toNodeId":"n_UvTiG",
			"type":"next"
		},
		{
			"fromNodeId":"n_UvTiG",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"_e1XYq",
			"type":"if"
		},
		{
			"fromNodeId":"_e1XYq",
			"priority":0,
			"skip":false,
			"toNodeId":"mD0Mk",
			"type":"next"
		},
		{
			"fromNodeId":"E0uht",
			"priority":0,
			"skip":false,
			"toNodeId":"mD0Mk",
			"type":"next"
		},
		{
			"fromNodeId":"y5v6C",
			"priority":0,
			"skip":false,
			"toNodeId":"mD0Mk",
			"type":"next"
		},
		{
			"fromNodeId":"mu2sY",
			"priority":0,
			"skip":false,
			"toNodeId":"mD0Mk",
			"type":"next"
		},
		{
			"fromNodeId":"i6RlR",
			"priority":0,
			"skip":false,
			"toNodeId":"mD0Mk",
			"type":"next"
		},
		{
			"fromNodeId":"n_UvTiG",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"mD0Mk",
			"type":"next"
		},
		{
			"fromNodeId":"mD0Mk",
			"priority":0,
			"skip":false,
			"toNodeId":"i6RlR",
			"type":"loop"
		},
		{
			"fromNodeId":"i6RlR",
			"name":"1",
			"priority":0,
			"skip":false,
			"toNodeId":"i6RlR@1",
			"type":"branch"
		},
		{
			"fromNodeId":"i6RlR@1",
			"priority":0,
			"skip":false,
			"toNodeId":"LvLay",
			"type":"next"
		},
		{
			"fromNodeId":"LvLay",
			"priority":0,
			"skip":false,
			"toNodeId":"E0uht",
			"type":"next"
		},
		{
			"fromNodeId":"i6RlR",
			"name":"2",
			"priority":0,
			"skip":false,
			"toNodeId":"i6RlR@2",
			"type":"branch"
		},
		{
			"fromNodeId":"i6RlR@2",
			"priority":0,
			"skip":false,
			"toNodeId":"JMKrC",
			"type":"next"
		},
		{
			"fromNodeId":"JMKrC",
			"priority":0,
			"skip":false,
			"toNodeId":"XjtDp",
			"type":"next"
		},
		{
			"fromNodeId":"XjtDp",
			"priority":0,
			"skip":false,
			"toNodeId":"F3igq",
			"type":"loop"
		},
		{
			"fromNodeId":"F3igq",
			"name":"1",
			"priority":0,
			"skip":false,
			"toNodeId":"F3igq@1",
			"type":"branch"
		},
		{
			"fromNodeId":"F3igq@1",
			"priority":0,
			"skip":false,
			"toNodeId":"HgmTh",
			"type":"next"
		},
		{
			"fromNodeId":"HgmTh",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"p6CfR",
			"type":"if"
		},
		{
			"fromNodeId":"p6CfR",
			"priority":0,
			"skip":false,
			"toNodeId":"JaAML",
			"type":"next"
		},
		{
			"fromNodeId":"HgmTh",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"VcMiS",
			"type":"next"
		},
		{
			"fromNodeId":"VcMiS",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"ozWSk",
			"type":"if"
		},
		{
			"fromNodeId":"ozWSk",
			"priority":0,
			"skip":false,
			"toNodeId":"Xgdx5",
			"type":"next"
		},
		{
			"fromNodeId":"Xgdx5",
			"priority":0,
			"skip":false,
			"toNodeId":"heHCP",
			"type":"next"
		},
		{
			"fromNodeId":"F3igq",
			"name":"2",
			"priority":0,
			"skip":false,
			"toNodeId":"F3igq@2",
			"type":"branch"
		},
		{
			"fromNodeId":"F3igq@2",
			"priority":0,
			"skip":false,
			"toNodeId":"KLNMO",
			"type":"next"
		},
		{
			"fromNodeId":"KLNMO",
			"priority":0,
			"skip":false,
			"toNodeId":"Rqhpr",
			"type":"next"
		},
		{
			"fromNodeId":"F3igq",
			"name":"3",
			"priority":0,
			"skip":false,
			"toNodeId":"F3igq@3",
			"type":"branch"
		},
		{
			"fromNodeId":"F3igq@3",
			"priority":0,
			"skip":false,
			"toNodeId":"eDRVl",
			"type":"next"
		},
		{
			"fromNodeId":"eDRVl",
			"priority":0,
			"skip":false,
			"toNodeId":"wJXLp",
			"type":"next"
		},
		{
			"fromNodeId":"F3igq",
			"name":"4",
			"priority":0,
			"skip":false,
			"toNodeId":"F3igq@4",
			"type":"branch"
		},
		{
			"fromNodeId":"F3igq@4",
			"priority":0,
			"skip":false,
			"toNodeId":"FhyRn",
			"type":"next"
		},
		{
			"fromNodeId":"FhyRn",
			"priority":0,
			"skip":false,
			"toNodeId":"5L1RT",
			"type":"next"
		},
		{
			"fromNodeId":"JaAML",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"XjtDp",
			"type":"next"
		},
		{
			"fromNodeId":"heHCP",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"XjtDp",
			"type":"next"
		},
		{
			"fromNodeId":"VcMiS",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"XjtDp",
			"type":"next"
		},
		{
			"fromNodeId":"Rqhpr",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"XjtDp",
			"type":"next"
		},
		{
			"fromNodeId":"wJXLp",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"XjtDp",
			"type":"next"
		},
		{
			"fromNodeId":"5L1RT",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"XjtDp",
			"type":"next"
		},
		{
			"fromNodeId":"F3igq",
			"name":"default",
			"priority":0,
			"skip":false,
			"toNodeId":"XjtDp",
			"type":"next"
		},
		{
			"fromNodeId":"XjtDp",
			"priority":0,
			"skip":false,
			"toNodeId":"46ANY",
			"type":"next"
		},
		{
			"fromNodeId":"46ANY",
			"priority":0,
			"skip":false,
			"toNodeId":"PgSl1",
			"type":"next"
		},
		{
			"fromNodeId":"PgSl1",
			"priority":0,
			"skip":false,
			"toNodeId":"y5v6C",
			"type":"next"
		},
		{
			"fromNodeId":"i6RlR",
			"name":"3",
			"priority":0,
			"skip":false,
			"toNodeId":"i6RlR@3",
			"type":"branch"
		},
		{
			"fromNodeId":"i6RlR@3",
			"priority":0,
			"skip":false,
			"toNodeId":"gfX0R",
			"type":"next"
		},
		{
			"fromNodeId":"gfX0R",
			"priority":0,
			"skip":false,
			"toNodeId":"yVCMD",
			"type":"next"
		},
		{
			"fromNodeId":"yVCMD",
			"priority":0,
			"skip":false,
			"toNodeId":"FSlUd",
			"type":"next"
		},
		{
			"fromNodeId":"FSlUd",
			"priority":0,
			"skip":false,
			"toNodeId":"uMI0a",
			"type":"loop"
		},
		{
			"fromNodeId":"uMI0a",
			"name":"1",
			"priority":0,
			"skip":false,
			"toNodeId":"uMI0a@1",
			"type":"branch"
		},
		{
			"fromNodeId":"uMI0a@1",
			"priority":0,
			"skip":false,
			"toNodeId":"4bXcA",
			"type":"next"
		},
		{
			"fromNodeId":"uMI0a",
			"name":"2",
			"priority":0,
			"skip":false,
			"toNodeId":"uMI0a@2",
			"type":"branch"
		},
		{
			"fromNodeId":"uMI0a@2",
			"priority":0,
			"skip":false,
			"toNodeId":"GFfAx",
			"type":"next"
		},
		{
			"fromNodeId":"GFfAx",
			"priority":0,
			"skip":false,
			"toNodeId":"80odH",
			"type":"next"
		},
		{
			"fromNodeId":"80odH",
			"priority":0,
			"skip":false,
			"toNodeId":"Ak3AT",
			"type":"next"
		},
		{
			"fromNodeId":"4bXcA",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"FSlUd",
			"type":"next"
		},
		{
			"fromNodeId":"Ak3AT",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"FSlUd",
			"type":"next"
		},
		{
			"fromNodeId":"uMI0a",
			"name":"default",
			"priority":0,
			"skip":false,
			"toNodeId":"FSlUd",
			"type":"next"
		},
		{
			"fromNodeId":"FSlUd",
			"priority":0,
			"skip":false,
			"toNodeId":"kKJ9L",
			"type":"next"
		},
		{
			"fromNodeId":"kKJ9L",
			"priority":0,
			"skip":false,
			"toNodeId":"mu2sY",
			"type":"next"
		},
		{
			"fromNodeId":"mD0Mk",
			"priority":0,
			"skip":false,
			"toNodeId":"xsOM2",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"680220d6031d503ad3a9ee26",
	"lastModifiedBy":1,
	"lcName":"call llm messages to watsonx payload messages",
	"modifiedTime":1759615001162,
	"name":"Call LLM Messages to Watsonx payload Messages",
	"nodes":[
		{
			"additional":{
				"xsdSchemaConfig":{}
			},
			"context":{
				"appName":"callables",
				"resourceVersion":224,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"IJmRa-1",
			"id":"GkZzf",
			"index":1,
			"inputs":{
				"result":{
					"type":"object",
					"properties":{
						"messages":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Messages"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"setup":{
					"type":"object",
					"properties":{
						"messages":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"role":{
										"type":"string",
										"title":"Role"
									},
									"content":{
										"type":"array",
										"items":{
											"type":"object",
											"properties":{
												"type":{
													"type":"string",
													"title":"Type"
												},
												"text":{
													"type":"string",
													"title":"Text"
												},
												"image_url":{
													"type":"object",
													"properties":{
														"url":{
															"type":"string",
															"title":"Url"
														},
														"detail":{
															"type":"string",
															"title":"Detail"
														}
													},
													"additionalProperties":false,
													"title":"Image Url",
													"required":[]
												},
												"source":{
													"type":"object",
													"properties":{
														"image_type":{
															"type":"string",
															"title":"Image Type"
														},
														"media_type":{
															"type":"string",
															"title":"Media Type"
														},
														"image_data":{
															"type":"string",
															"title":"Image Data"
														},
														"detail":{
															"type":"string",
															"title":"Detail"
														}
													},
													"additionalProperties":false,
													"title":"Source",
													"required":[]
												},
												"tool_use_id":{
													"type":"string",
													"title":"Tool Use Id"
												},
												"content":{
													"type":"string",
													"title":"Content"
												},
												"name":{
													"type":"string",
													"title":"Name"
												},
												"input":{
													"type":"object",
													"properties":{},
													"additionalProperties":false,
													"title":"Input"
												},
												"id":{
													"type":"string",
													"title":"Id"
												}
											},
											"additionalProperties":false,
											"required":[]
										},
										"title":"Content"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Messages"
						},
						"systemPrompt":{
							"type":"string",
							"title":"System Prompt"
						},
						"model":{
							"type":"string",
							"title":"Model"
						}
					},
					"additionalProperties":false,
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger via automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":227,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"IJmRa-1",
			"id":"6mYy4",
			"index":2,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"Initial list items",
							"ui:description":"Set the initial values of the list (defaults to empty)"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"additionalProperties":false,
									"type":[
										"object",
										"string",
										"number",
										"boolean",
										"integer"
									],
									"properties":{
										"item":{
											"type":"object",
											"properties":{},
											"additionalProperties":false,
											"title":"Item"
										}
									},
									"required":[]
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray"
				},
				"ua:title":"message",
				"ua:list_type":"OBJECT"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"message",
							"disableActions":true,
							"items":{
								"type":"object",
								"properties":{
									"item":{
										"type":"object",
										"properties":{},
										"additionalProperties":false,
										"title":"Item"
									}
								},
								"required":[]
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":227,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"IJmRa-1",
			"id":"vJdnu",
			"index":3,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"systemObject":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"System Object"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"prompt":{
							"type":"string",
							"title":"Prompt"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def systemObject = [:]\ndef prompt = binding.hasVariable(\"prompt\")?binding.getVariable(\"prompt\"):null\ndef temp = \"system\"\n\nif(prompt && prompt.toString().trim()){\n  systemObject['role'] = temp\n  systemObject['content'] = prompt\n}\nelse{\n  systemObject = null\n}\n\nreturn [\n  'systemObject' : systemObject\n]",
				"parameters":{
					"prompt":"{{ GkZzf.outputs.systemPrompt }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":96,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"IJmRa-1",
			"id":"n_UvTiG",
			"index":4,
			"inputs":{
				"filters":[
					{
						"property":"{{ vJdnu.outputs.result.systemObject }}",
						"filter":{
							"operator":"EXISTS"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":231,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_UvTiG@IJmRa-1@y",
			"id":"_e1XYq",
			"index":5,
			"inputs":{
				"itemToAdd":{
					"item":"{{ vJdnu.outputs.result.systemObject }}"
				},
				"insertLocation":"END",
				"listName":"{{ 6mYy4.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":228,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"IJmRa-1",
			"id":"mD0Mk",
			"index":6,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ GkZzf.outputs.messages }}",
				"captureIterations":false
			},
			"skip":false,
			"subTitle":"Loop",
			"title":"For loop",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"branch",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"mD0Mk@IJmRa-1@l",
			"id":"i6RlR",
			"index":7,
			"inputs":{
				"branches":[
					{
						"id":"1",
						"inputs":{
							"name":"System",
							"conditions":{
								"filters":[
									{
										"property":"{{ mD0Mk.outputs.item.role }}",
										"filter":{
											"operator":"EQUAL",
											"value":"system"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"2",
						"inputs":{
							"name":"User",
							"conditions":{
								"filters":[
									{
										"property":"{{ mD0Mk.outputs.item.role }}",
										"filter":{
											"operator":"EQUAL",
											"value":"user"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"3",
						"inputs":{
							"name":"Assistant",
							"conditions":{
								"filters":[
									{
										"property":"{{ mD0Mk.outputs.item.role }}",
										"filter":{
											"operator":"EQUAL",
											"value":"assistant"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"default"
					}
				]
			},
			"skip":false,
			"subTitle":"Branch",
			"title":"",
			"type":"BRANCH"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":233,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"i6RlR@mD0Mk@IJmRa-1@l@1",
			"id":"i6RlR@1",
			"index":8,
			"inputs":{
				"name":"System",
				"conditions":{
					"filters":[
						{
							"property":"{{ mD0Mk.outputs.item.role }}",
							"filter":{
								"operator":"EQUAL",
								"value":"system"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":227,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"i6RlR@mD0Mk@IJmRa-1@l@1",
			"id":"LvLay",
			"index":9,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"systemObject":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"System Object"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"prompt":{
							"type":"string",
							"title":"Prompt"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def systemObject = [:]\n\ndef temp = \"system\"\n\nif(binding.hasVariable('prompt')){\n  systemObject['role'] = temp\n  systemObject['content'] = prompt\n}\n\nreturn [\n  'systemObject' : systemObject\n]\n",
				"parameters":{
					"prompt":"{{ mD0Mk.outputs.item.content[0].text }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.itemsToAdd.items.item"
				]
			},
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":226,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"i6RlR@mD0Mk@IJmRa-1@l@1",
			"id":"E0uht",
			"index":10,
			"inputs":{
				"itemToAdd":{
					"item":"{{ LvLay.outputs.result.systemObject }}"
				},
				"insertLocation":"END",
				"listName":"{{ 6mYy4.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":233,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"i6RlR@mD0Mk@IJmRa-1@l@2",
			"id":"i6RlR@2",
			"index":11,
			"inputs":{
				"name":"User",
				"conditions":{
					"filters":[
						{
							"property":"{{ mD0Mk.outputs.item.role }}",
							"filter":{
								"operator":"EQUAL",
								"value":"user"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":227,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"i6RlR@mD0Mk@IJmRa-1@l@2",
			"id":"JMKrC",
			"index":12,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"Initial list items",
							"ui:description":"Set the initial values of the list (defaults to empty)"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"additionalProperties":false,
									"type":[
										"object",
										"string",
										"number",
										"boolean",
										"integer"
									],
									"properties":{
										"userContent":{
											"type":"object",
											"properties":{},
											"additionalProperties":false,
											"title":"User Content"
										}
									},
									"required":[]
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray"
				},
				"ua:title":"Content",
				"ua:list_type":"OBJECT"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"Content",
							"disableActions":true,
							"items":{
								"type":"object",
								"properties":{
									"userContent":{
										"type":"object",
										"properties":{},
										"additionalProperties":false,
										"title":"User Content"
									}
								},
								"required":[]
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":228,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"i6RlR@mD0Mk@IJmRa-1@l@2",
			"id":"XjtDp",
			"index":13,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ mD0Mk.outputs.item.content }}",
				"captureIterations":false
			},
			"skip":false,
			"subTitle":"Loop",
			"title":"For loop",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"branch",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"XjtDp@i6RlR@mD0Mk@IJmRa-1@l@2@l",
			"id":"F3igq",
			"index":14,
			"inputs":{
				"branches":[
					{
						"id":"1",
						"inputs":{
							"name":"Image",
							"conditions":{
								"filters":[
									{
										"property":"{{ XjtDp.outputs.item.type }}",
										"filter":{
											"operator":"EQUAL",
											"value":"image"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"2",
						"inputs":{
							"name":"ImageUrl",
							"conditions":{
								"filters":[
									{
										"property":"{{ XjtDp.outputs.item.type }}",
										"filter":{
											"operator":"EQUAL",
											"value":"image_url"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"3",
						"inputs":{
							"name":"Text",
							"conditions":{
								"filters":[
									{
										"property":"{{ XjtDp.outputs.item.type }}",
										"filter":{
											"operator":"EQUAL",
											"value":"text"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"4",
						"inputs":{
							"name":"ToolResult",
							"conditions":{
								"filters":[
									{
										"property":"{{ XjtDp.outputs.item.type }}",
										"filter":{
											"operator":"EQUAL",
											"value":"tool_result"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"default"
					}
				]
			},
			"skip":false,
			"subTitle":"Branch",
			"title":"",
			"type":"BRANCH"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":233,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"F3igq@XjtDp@i6RlR@mD0Mk@IJmRa-1@l@2@l@1",
			"id":"F3igq@1",
			"index":15,
			"inputs":{
				"name":"Image",
				"conditions":{
					"filters":[
						{
							"property":"{{ XjtDp.outputs.item.type }}",
							"filter":{
								"operator":"EQUAL",
								"value":"image"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":219,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"F3igq@XjtDp@i6RlR@mD0Mk@IJmRa-1@l@2@l@1",
			"id":"HgmTh",
			"index":16,
			"inputs":{
				"filters":[
					{
						"property":"{{ XjtDp.outputs.item.source.image_type }}",
						"filter":{
							"operator":"EQUAL",
							"value":"base64"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":227,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"HgmTh@F3igq@XjtDp@i6RlR@mD0Mk@IJmRa-1@l@2@l@1@y",
			"id":"p6CfR",
			"index":17,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"imageObject":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Image Object"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"mediaType":{
							"type":"string",
							"title":"Media Type"
						},
						"base64Content":{
							"type":"string",
							"title":"Base 64 Content"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def imageObject = [:]\ndef image_url = [:]\nimage_url['url'] = \"data:image/\" + mediaType + \";base64,\" + base64Content\nimageObject['image_url'] = image_url\nimageObject['type'] = 'image_url'\n\nreturn[\n  'imageObject' : imageObject\n]",
				"parameters":{
					"mediaType":"{{ XjtDp.outputs.item.source.media_type }}",
					"base64Content":"{{ XjtDp.outputs.item.source.image_data }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":226,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"HgmTh@F3igq@XjtDp@i6RlR@mD0Mk@IJmRa-1@l@2@l@1@y",
			"id":"JaAML",
			"index":18,
			"inputs":{
				"itemToAdd":{
					"content":"{{ p6CfR.outputs.result.imageObject }}",
					"userContent":"{{ p6CfR.outputs.result.imageObject }}"
				},
				"insertLocation":"END",
				"listName":"{{ JMKrC.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":219,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"HgmTh@F3igq@XjtDp@i6RlR@mD0Mk@IJmRa-1@l@2@l@1@n",
			"id":"VcMiS",
			"index":19,
			"inputs":{
				"filters":[
					{
						"property":"{{ XjtDp.outputs.item.source.image_type }}",
						"filter":{
							"operator":"EQUAL",
							"value":"file_object"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"utility_by_unifyapps",
				"resourceVersion":224,
				"resourceName":"utility_by_unifyapps_download_file_as_string",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"VcMiS@HgmTh@F3igq@XjtDp@i6RlR@mD0Mk@IJmRa-1@l@2@l@1@n@y",
			"id":"ozWSk",
			"index":20,
			"inputs":{
				"file":"{{ XjtDp.outputs.item.source.image_data }}",
				"encoding":"base64"
			},
			"skip":false,
			"subTitle":"Utility by UnifyApps",
			"title":"Download file as string",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":227,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"VcMiS@HgmTh@F3igq@XjtDp@i6RlR@mD0Mk@IJmRa-1@l@2@l@1@n@y",
			"id":"Xgdx5",
			"index":21,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"imageObject":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Image Object"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"mediaType":{
							"type":"string",
							"title":"Media Type"
						},
						"base64Content":{
							"type":"string",
							"title":"Base 64 Content"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def imageObject = [:]\ndef image_url = [:]\nimage_url['url'] = \"data:image/\" + mediaType + \";base64,\" + base64Content\nimageObject['image_url'] = image_url\nimageObject['type'] = 'image_url'\n\nreturn[\n  'imageObject' : imageObject\n]",
				"parameters":{
					"mediaType":"{{ XjtDp.outputs.item.source.media_type }}",
					"base64Content":"{{ ozWSk.outputs.fileContent }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":226,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"VcMiS@HgmTh@F3igq@XjtDp@i6RlR@mD0Mk@IJmRa-1@l@2@l@1@n@y",
			"id":"heHCP",
			"index":22,
			"inputs":{
				"itemToAdd":{
					"content":"{{ Xgdx5.outputs.result.imageObject }}",
					"userContent":"{{ Xgdx5.outputs.result.imageObject }}"
				},
				"insertLocation":"END",
				"listName":"{{ JMKrC.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":233,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"F3igq@XjtDp@i6RlR@mD0Mk@IJmRa-1@l@2@l@2",
			"id":"F3igq@2",
			"index":23,
			"inputs":{
				"name":"ImageUrl",
				"conditions":{
					"filters":[
						{
							"property":"{{ XjtDp.outputs.item.type }}",
							"filter":{
								"operator":"EQUAL",
								"value":"image_url"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":72,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"F3igq@XjtDp@i6RlR@mD0Mk@IJmRa-1@l@2@l@2",
			"id":"KLNMO",
			"index":24,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"imageObject":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Image Object"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"imageUrl":{
							"type":"string",
							"title":"imageUrl"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def parts = imageUrl.split(\",\")\ndef metadata = parts[0]\ndef mimeType = metadata.split(\";\")[0].split(\":\")[1]\ndef base64Data = parts[1]\n\ndef imageObject = [:]\ndef image_url = [:]\nimage_url['url'] = \"data:image/\" + mimeType + \";base64,\" + base64Data\nimageObject['image_url'] = image_url\nimageObject['type'] = 'image_url'\n\nreturn[\n  'imageObject' : imageObject\n]",
				"parameters":{
					"imageUrl":"{{ XjtDp.outputs.item.image_url.url }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":226,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"F3igq@XjtDp@i6RlR@mD0Mk@IJmRa-1@l@2@l@2",
			"id":"Rqhpr",
			"index":25,
			"inputs":{
				"itemToAdd":{
					"content":"{{ KLNMO.outputs.result.imageObject }}",
					"userContent":"{{ KLNMO.outputs.result.imageObject }}"
				},
				"insertLocation":"END",
				"listName":"{{ JMKrC.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":233,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"F3igq@XjtDp@i6RlR@mD0Mk@IJmRa-1@l@2@l@3",
			"id":"F3igq@3",
			"index":26,
			"inputs":{
				"name":"Text",
				"conditions":{
					"filters":[
						{
							"property":"{{ XjtDp.outputs.item.type }}",
							"filter":{
								"operator":"EQUAL",
								"value":"text"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":227,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"F3igq@XjtDp@i6RlR@mD0Mk@IJmRa-1@l@2@l@3",
			"id":"eDRVl",
			"index":27,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"textObject":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Text Object"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"text":{
							"type":"string",
							"title":"Text"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def textObject = [:]\n\ntextObject['type'] = 'text'\ntextObject['text'] = text\n\nreturn['textObject' : textObject]",
				"parameters":{
					"text":"{{ XjtDp.outputs.item.text }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":226,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"F3igq@XjtDp@i6RlR@mD0Mk@IJmRa-1@l@2@l@3",
			"id":"wJXLp",
			"index":28,
			"inputs":{
				"itemToAdd":{
					"content":"{{ eDRVl.outputs.result.textObject }}",
					"userContent":"{{ eDRVl.outputs.result.textObject }}"
				},
				"insertLocation":"END",
				"listName":"{{ JMKrC.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":233,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"F3igq@XjtDp@i6RlR@mD0Mk@IJmRa-1@l@2@l@4",
			"id":"F3igq@4",
			"index":29,
			"inputs":{
				"name":"ToolResult",
				"conditions":{
					"filters":[
						{
							"property":"{{ XjtDp.outputs.item.type }}",
							"filter":{
								"operator":"EQUAL",
								"value":"tool_result"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":228,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"F3igq@XjtDp@i6RlR@mD0Mk@IJmRa-1@l@2@l@4",
			"id":"FhyRn",
			"index":30,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"toolObject":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Tool Object"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"toolCallId":{
							"type":"string",
							"title":"Tool Call Id"
						},
						"content":{
							"type":"string",
							"title":"Content"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def toolObject = [:]\n\ntoolObject['tool_call_id'] = toolCallId\ntoolObject['content'] = content\ntoolObject['role'] = 'tool'\n\nreturn['toolObject':toolObject]",
				"parameters":{
					"content":"{{ XjtDp.outputs.item.content }}",
					"toolCallId":"{{ XjtDp.outputs.item.tool_use_id }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":227,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"F3igq@XjtDp@i6RlR@mD0Mk@IJmRa-1@l@2@l@4",
			"id":"5L1RT",
			"index":31,
			"inputs":{
				"itemToAdd":{
					"item":"{{ FhyRn.outputs.result.toolObject }}"
				},
				"insertLocation":"END",
				"listName":"{{ 6mYy4.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.content.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":227,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"i6RlR@mD0Mk@IJmRa-1@l@2",
			"id":"46ANY",
			"index":32,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"userObject":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"User Object"
						},
						"allowed":{
							"type":"boolean",
							"title":"Allowed"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"content":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Content"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def userObject = [:]\n\nuserObject['role'] = 'user'\nuserObject['content'] = (binding.hasVariable('content')) ? content : null\n\ndef allowed = (binding.hasVariable('content')) ? true : false\n\nreturn['userObject':userObject,'allowed' : allowed]",
				"parameters":{
					"content":{
						"ua:type":"mappedArray",
						"source":"{{ JMKrC.outputs.items }}",
						"items":"{{ JMKrC.outputs.items[0].userContent }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"continue",
				"resourceVersion":223,
				"resourceName":"continue",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"i6RlR@mD0Mk@IJmRa-1@l@2",
			"id":"PgSl1",
			"index":33,
			"inputs":{
				"loop":"mD0Mk",
				"conditions":{
					"filters":[
						{
							"property":"{{ 46ANY.outputs.result.allowed }}",
							"filter":{
								"operator":"EQUAL",
								"value":"false"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"subTitle":"Continue",
			"title":"Continue",
			"type":"CONTINUE"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":226,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"i6RlR@mD0Mk@IJmRa-1@l@2",
			"id":"y5v6C",
			"index":34,
			"inputs":{
				"itemToAdd":{
					"item":"{{ 46ANY.outputs.result.userObject }}"
				},
				"insertLocation":"END",
				"listName":"{{ 6mYy4.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":233,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"i6RlR@mD0Mk@IJmRa-1@l@3",
			"id":"i6RlR@3",
			"index":35,
			"inputs":{
				"name":"Assistant",
				"conditions":{
					"filters":[
						{
							"property":"{{ mD0Mk.outputs.item.role }}",
							"filter":{
								"operator":"EQUAL",
								"value":"assistant"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":228,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"i6RlR@mD0Mk@IJmRa-1@l@3",
			"id":"gfX0R",
			"index":36,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"Initial list items",
							"ui:description":"Set the initial values of the list (defaults to empty)"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"additionalProperties":false,
									"type":[
										"object",
										"string",
										"number",
										"boolean",
										"integer"
									],
									"properties":{
										"toolCalls":{
											"type":"object",
											"properties":{},
											"additionalProperties":false,
											"title":"Tool Calls"
										}
									},
									"required":[]
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray"
				},
				"ua:title":"toolCalls",
				"ua:list_type":"OBJECT"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"toolCalls",
							"disableActions":true,
							"items":{
								"type":"object",
								"properties":{
									"toolCalls":{
										"type":"object",
										"properties":{},
										"additionalProperties":false,
										"title":"Tool Calls"
									}
								},
								"required":[]
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":227,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"i6RlR@mD0Mk@IJmRa-1@l@3",
			"id":"yVCMD",
			"index":37,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"content":{
							"type":"string",
							"title":"Content"
						}
					},
					"required":[]
				}
			},
			"inputs":{},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"content":{
							"type":"string",
							"title":"Content"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":229,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"i6RlR@mD0Mk@IJmRa-1@l@3",
			"id":"FSlUd",
			"index":38,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ mD0Mk.outputs.item.content }}",
				"captureIterations":false
			},
			"skip":false,
			"subTitle":"Loop",
			"title":"For loop",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"branch",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"FSlUd@i6RlR@mD0Mk@IJmRa-1@l@3@l",
			"id":"uMI0a",
			"index":39,
			"inputs":{
				"branches":[
					{
						"id":"1",
						"inputs":{
							"name":"Text",
							"conditions":{
								"filters":[
									{
										"property":"{{ FSlUd.outputs.item.type }}",
										"filter":{
											"operator":"EQUAL",
											"value":"text"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"2",
						"inputs":{
							"name":"ToolUse",
							"conditions":{
								"filters":[
									{
										"property":"{{ FSlUd.outputs.item.type }}",
										"filter":{
											"operator":"EQUAL",
											"value":"tool_use"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"default"
					}
				]
			},
			"skip":false,
			"subTitle":"Branch",
			"title":"",
			"type":"BRANCH"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":233,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"uMI0a@FSlUd@i6RlR@mD0Mk@IJmRa-1@l@3@l@1",
			"id":"uMI0a@1",
			"index":40,
			"inputs":{
				"name":"Text",
				"conditions":{
					"filters":[
						{
							"property":"{{ FSlUd.outputs.item.type }}",
							"filter":{
								"operator":"EQUAL",
								"value":"text"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":225,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"uMI0a@FSlUd@i6RlR@mD0Mk@IJmRa-1@l@3@l@1",
			"id":"4bXcA",
			"index":41,
			"inputs":{
				"variables":[
					{
						"source":"{{ yVCMD.outputs.content }}",
						"value":"{{ FSlUd.outputs.item.text }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":233,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"uMI0a@FSlUd@i6RlR@mD0Mk@IJmRa-1@l@3@l@2",
			"id":"uMI0a@2",
			"index":42,
			"inputs":{
				"name":"ToolUse",
				"conditions":{
					"filters":[
						{
							"property":"{{ FSlUd.outputs.item.type }}",
							"filter":{
								"operator":"EQUAL",
								"value":"tool_use"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"utility_by_unifyapps",
				"resourceVersion":225,
				"resourceName":"utility_by_unifyapps_to_json_string",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"uMI0a@FSlUd@i6RlR@mD0Mk@IJmRa-1@l@3@l@2",
			"id":"GFfAx",
			"index":43,
			"inputs":{
				"object":"{{ FSlUd.outputs.item.input }}"
			},
			"skip":false,
			"subTitle":"Utility by UnifyApps",
			"title":"Serialise object to JSON string",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":228,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"uMI0a@FSlUd@i6RlR@mD0Mk@IJmRa-1@l@3@l@2",
			"id":"80odH",
			"index":44,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"toolUseObject":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Tool Use Object"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"toolUseId":{
							"type":"string",
							"title":"Tool Use Id"
						},
						"arguments":{
							"type":"string",
							"title":"Arguments"
						},
						"name":{
							"type":"string",
							"title":"Name"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def toolUseObject = [:]\ndef function = [:]\n\ntoolUseObject['id'] = toolUseId\ntoolUseObject['type'] = 'function'\n\nfunction['name'] = name\nfunction['arguments'] = arguments\n\ntoolUseObject['function'] = function\n\nreturn['toolUseObject' : toolUseObject]\n\n",
				"parameters":{
					"name":"{{ FSlUd.outputs.item.name }}",
					"arguments":"{{ GFfAx.outputs.result }}",
					"toolUseId":"{{ FSlUd.outputs.item.id }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":227,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"uMI0a@FSlUd@i6RlR@mD0Mk@IJmRa-1@l@3@l@2",
			"id":"Ak3AT",
			"index":45,
			"inputs":{
				"itemToAdd":{
					"toolCalls":"{{ 80odH.outputs.result.toolUseObject }}"
				},
				"insertLocation":"END",
				"listName":"{{ gfX0R.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.toolCalls.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":228,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"i6RlR@mD0Mk@IJmRa-1@l@3",
			"id":"kKJ9L",
			"index":46,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"assistantObject":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Assistant Object"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"content":{
							"type":"string",
							"title":"Content"
						},
						"toolCalls":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Tool Calls"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def assistantObject = [:]\n\nassistantObject['role'] = 'assistant'\nassistantObject['content'] = content\n\nif(binding.hasVariable('toolCalls')){\n  assistantObject['tool_calls'] = toolCalls\n}\n\nreturn ['assistantObject': assistantObject]\n",
				"parameters":{
					"content":"{{ yVCMD.outputs.content }}",
					"toolCalls":{
						"source":"{{ gfX0R.outputs.items }}",
						"ua:type":"mappedArray",
						"items":"{{ gfX0R.outputs.items[0].toolCalls }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":227,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"i6RlR@mD0Mk@IJmRa-1@l@3",
			"id":"mu2sY",
			"index":47,
			"inputs":{
				"itemToAdd":{
					"item":"{{ kKJ9L.outputs.result.assistantObject }}"
				},
				"insertLocation":"END",
				"listName":"{{ 6mYy4.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":229,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"IJmRa-1",
			"id":"xsOM2",
			"index":48,
			"inputs":{
				"result":{
					"messages":{
						"source":"{{ 6mYy4.outputs.items }}",
						"ua:type":"mappedArray",
						"items":"{{ 6mYy4.outputs.items[0].item }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":1,
	"schemaReferences":[
		"entity|e_code_snippet|e_67854ed08f07f84c6d9ae978"
	],
	"settings":{
		"enableNodeLevelLogging":false,
		"enableRunLogging":false,
		"enableVariableLogging":false,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		"AI Agent",
		"Internal"
	],
	"version":127
}