{
	"appsUsed":[
		"storage_by_unifyapps"
	],
	"createdTime":1751383778206,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1759425346327,
		"deployedBy":-1,
		"deployedDefinitionId":"68deb3421c55b7419376d891",
		"status":"DEPLOYED",
		"version":62,
		"workflowVersion":86
	},
	"edges":[
		{
			"fromNodeId":"whabY",
			"priority":0,
			"skip":false,
			"toNodeId":"7uNRl",
			"type":"next"
		},
		{
			"fromNodeId":"7uNRl",
			"priority":0,
			"skip":false,
			"toNodeId":"Uphqh",
			"type":"next"
		},
		{
			"fromNodeId":"Uphqh",
			"priority":0,
			"skip":false,
			"toNodeId":"HF9xA",
			"type":"next"
		},
		{
			"fromNodeId":"HF9xA",
			"priority":0,
			"skip":false,
			"toNodeId":"31Ma1",
			"type":"next"
		},
		{
			"fromNodeId":"31Ma1",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"CH0Xa",
			"type":"if"
		},
		{
			"fromNodeId":"31Ma1",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"3hKMA",
			"type":"next"
		},
		{
			"fromNodeId":"CH0Xa",
			"priority":0,
			"skip":false,
			"toNodeId":"BzoBD",
			"type":"next"
		},
		{
			"fromNodeId":"3hKMA",
			"priority":0,
			"skip":false,
			"toNodeId":"BzoBD",
			"type":"next"
		},
		{
			"fromNodeId":"BzoBD",
			"priority":0,
			"skip":false,
			"toNodeId":"u07bU",
			"type":"next"
		},
		{
			"fromNodeId":"u07bU",
			"priority":0,
			"skip":false,
			"toNodeId":"r7ygy",
			"type":"next"
		},
		{
			"fromNodeId":"r7ygy",
			"priority":0,
			"skip":false,
			"toNodeId":"RYwQe",
			"type":"next"
		},
		{
			"fromNodeId":"RYwQe",
			"priority":0,
			"skip":false,
			"toNodeId":"iEoY5",
			"type":"next"
		},
		{
			"fromNodeId":"iEoY5",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"KqPlX",
			"type":"if"
		},
		{
			"fromNodeId":"KqPlX",
			"priority":0,
			"skip":false,
			"toNodeId":"EFOkY",
			"type":"next"
		},
		{
			"fromNodeId":"EFOkY",
			"priority":0,
			"skip":false,
			"toNodeId":"7fxzy",
			"type":"next"
		},
		{
			"fromNodeId":"7fxzy",
			"priority":0,
			"skip":false,
			"toNodeId":"JRa3S",
			"type":"next"
		},
		{
			"fromNodeId":"iEoY5",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"JRa3S",
			"type":"next"
		},
		{
			"fromNodeId":"JRa3S",
			"priority":0,
			"skip":false,
			"toNodeId":"m9T0b",
			"type":"next"
		},
		{
			"fromNodeId":"m9T0b",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"fW0si",
			"type":"if"
		},
		{
			"fromNodeId":"fW0si",
			"priority":0,
			"skip":false,
			"toNodeId":"vcLLc",
			"type":"next"
		},
		{
			"fromNodeId":"m9T0b",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"vcLLc",
			"type":"next"
		},
		{
			"fromNodeId":"vcLLc",
			"name":"error",
			"priority":0,
			"skip":false,
			"toNodeId":"8a78G",
			"type":"error"
		},
		{
			"fromNodeId":"vcLLc",
			"priority":0,
			"skip":false,
			"toNodeId":"eYvq0",
			"type":"next"
		},
		{
			"fromNodeId":"8a78G",
			"priority":0,
			"skip":false,
			"toNodeId":"eYvq0",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"683ffe1acf4a4c4b2fab6aac",
	"lastModifiedBy":1,
	"lcName":"ai agent mcp server tool executor",
	"modifiedTime":1759485564542,
	"name":"AI Agent MCP Server Tool Executor",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":708,
				"resourceName":"callables_from_interface"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"M9090-1",
			"id":"whabY",
			"index":0,
			"inputs":{
				"result":{
					"additionalProperties":false,
					"ua:modal":{
						"field_type":"STRING",
						"is_optional":true
					},
					"type":"object",
					"properties":{
						"toolOutput":{
							"type":"string",
							"title":"toolOutput"
						},
						"success":{
							"type":"boolean",
							"title":"Success"
						},
						"error":{
							"type":"string",
							"title":"Error"
						}
					},
					"required":[]
				},
				"callableInterfaceId":"679484ef9c8ab5620dca9609",
				"setup":{
					"additionalProperties":false,
					"ua:modal":{
						"field_type":"STRING",
						"is_optional":true
					},
					"type":"object",
					"properties":{
						"toolId":{
							"type":"string",
							"title":"toolId"
						},
						"toolInputs":{
							"type":"object",
							"title":"toolInputs"
						},
						"triggeredByAgentId":{
							"type":"string",
							"title":"Triggered By Agent Id"
						},
						"agentResponseMessageId":{
							"type":"string",
							"title":"Agent Response Message Id"
						},
						"caseId":{
							"type":"string",
							"title":"Case Id"
						},
						"executeUsingModel":{
							"type":"string",
							"title":"Execute Using Model"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger interface",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":743,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"M9090-1",
			"id":"7uNRl",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"mcpServerActionId":{
							"type":"string",
							"title":"Mcp Server Action Id"
						},
						"mcpToolId":{
							"type":"string",
							"title":"Mcp Tool Id"
						}
					},
					"additionalProperties":false,
					"required":[
						"mcpServerActionId",
						"mcpToolId"
					]
				},
				"input":{
					"type":"object",
					"properties":{
						"input":{
							"type":"string",
							"title":"Input"
						}
					},
					"additionalProperties":false,
					"required":[
						"input"
					]
				},
				"compile_static":false,
				"code":"def parts = input.split('@')\ndef mcpServerActionId = parts[1]\ndef mcpToolId = parts[3]\n\nreturn [\n    mcpServerActionId: mcpServerActionId,\n    mcpToolId: mcpToolId\n]",
				"parameters":{
					"input":"{{ whabY.outputs.toolId }}"
				}
			},
			"skip":false,
			"subTitle":"Extracting MCP server's action id and tool id",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":251,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"M9090-1",
			"id":"Uphqh",
			"index":0,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"runTimeType":{
							"type":"string",
							"title":"Run Time Type"
						},
						"context":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Context"
						},
						"input":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Input"
						},
						"resourceName":{
							"type":"string",
							"title":"Resource Name",
							"format":"skip"
						},
						"toolName":{
							"type":"string",
							"title":"Tool Name"
						}
					},
					"required":[]
				}
			},
			"inputs":{
				"runTimeType":"{{ __RUN__.outputs.workflowRunTimeType }}"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"runTimeType":{
							"type":"string",
							"title":"Run Time Type"
						},
						"context":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Context"
						},
						"input":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Input"
						},
						"resourceName":{
							"type":"string",
							"title":"Resource Name",
							"format":"skip"
						},
						"toolName":{
							"type":"string",
							"title":"Tool Name"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":2,
				"resourceName":"storage_by_unifyapps_get_record_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"M9090-1",
			"id":"HF9xA",
			"index":0,
			"inputs":{
				"object_type":"e_mcp_server_tool",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"id":"{{ 7uNRl.outputs.result.mcpToolId }}",
				"readThroughSessionVariables":true
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Fetch record by ID",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":697,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"M9090-1",
			"id":"31Ma1",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"{{ HF9xA.outputs.id }}",
						"filter":{
							"operator":"EXISTS"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":733,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"31Ma1@M9090-1@y",
			"id":"CH0Xa",
			"index":0,
			"inputs":{
				"variables":[
					{
						"source":"{{ Uphqh.outputs.context }}",
						"value":"{{ HF9xA.outputs.properties.context }}"
					},
					{
						"source":"{{ Uphqh.outputs.input }}",
						"value":"{{ HF9xA.outputs.properties.inputs }}"
					},
					{
						"source":"{{ Uphqh.outputs.resourceName }}",
						"value":"{{ HF9xA.outputs.properties.context.resourceName }}"
					},
					{
						"source":"{{ Uphqh.outputs.toolName }}",
						"value":"{{ HF9xA.outputs.properties.name }} via {{ HF9xA.outputs.properties.context.appName }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":740,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"31Ma1@M9090-1@n",
			"id":"3hKMA",
			"index":0,
			"inputs":{
				"result":{
					"success":false,
					"toolOutput":"Not able to Execute this tool. Tool seems to be unavailable."
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":58,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"M9090-1",
			"id":"BzoBD",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"inputs":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Inputs"
						},
						"callSynchronous":{
							"type":"boolean",
							"title":"Call Synchronous"
						}
					},
					"additionalProperties":false,
					"required":[
						"callSynchronous"
					]
				},
				"input":{
					"type":"object",
					"properties":{
						"inputsFromDecisionEngine":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Inputs From Decision Engine"
						},
						"userFilledInputs":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"User Filled Inputs"
						},
						"resourceName":{
							"type":"string",
							"title":"Resource Name"
						},
						"caseId":{
							"type":"string",
							"title":"Case Id"
						},
						"agentId":{
							"type":"string",
							"title":"Agent Id"
						},
						"context":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Context"
						}
					},
					"additionalProperties":false,
					"required":[
						"caseId"
					]
				},
				"compile_static":false,
				"code":"def processInputs(inputData) {\n    return inputData?._ua_schema_override_ instanceof Map ? inputData._ua_schema_override_ : inputData\n}\n\ndef mergeMaps(existingMap, newMap, context, Map<?, ?> parent = null, Object parentKey = null) {\n    newMap.each { key, value ->\n        if (value instanceof Map) {\n            if (!(existingMap[key] instanceof Map)) {\n                existingMap[key] = [:]\n            }\n            mergeMaps(existingMap[key], value, context ,existingMap, key)\n\n        } else if (value instanceof List) {\n\n            if (!(existingMap[key] instanceof List)) {\n                existingMap[key] = []\n            }\n            if (existingMap[key].size() == 0) {\n                existingMap[key] = value\n            }\n\n            // custom handling, need to move in other automation\n            if (context?.resourceName == \"custom_http_application_execute\" || context?.resourceName == \"custom_http_endpoint_execute\" ){\n                existingMap[key].forEach{ keyVal ->\n                    matchingLlmKeyVal = value.find{it.key == keyVal.key }\n                    keyVal.value = matchingLlmKeyVal.value\n                }\n            }\n\n            // def mergedList = [:]\n            // def existingList = existingMap[key]\n\n            // existingList.each { item ->\n            //     if (item instanceof Map) {\n            //         mergedList[item.hashCode()] = item\n            //     } else {\n            //         mergedList[item] = item\n            //     }\n            // }\n\n            // value.each { item ->\n            //     if (item instanceof Map) {\n            //         def hashedItem = item.hashCode()\n            //         if (!mergedList.containsKey(hashedItem)) {\n            //             mergedList[hashedItem] = item\n            //         }\n            //     } else {\n            //         if (!mergedList.containsKey(item)) {\n            //             mergedList[item] = item\n            //         }\n            //     }\n            // }\n            \n            // existingMap[key] = mergedList.values().toList()\n            \n        } else {\n            if (key instanceof String && key == \"ua:type\") {\n            }\n            else{\n                if (!existingMap.containsKey(key) || existingMap[key] == null || (existingMap[key] instanceof String && existingMap[key].trim().isEmpty())) {\n                    existingMap[key] = value\n                }\n            }\n        }\n    }\n\n    if (existingMap.isEmpty() && parent != null && parentKey != null) {\n        parent.remove(parentKey)\n    }\n    \n}\n\nif (binding.hasVariable('resourceName') && resourceName == \"callables_call_automation\") {\n    def params = userFilledInputs?.parameters ?: [:]\n    def inputsToSubmit = [:]\n    if (binding.hasVariable('inputsFromDecisionEngine')) {\n        inputsToSubmit.putAll(processInputs(inputsFromDecisionEngine))\n    }\n\n    mergeMaps(inputsToSubmit, params, context)\n\n    if (binding.hasVariable('caseId')) {\n        inputsToSubmit[\"caseId\"] = caseId\n    }\n\n    userFilledInputs[\"parameters\"] = inputsToSubmit\n    userFilledInputs[\"timeoutInMillis\"] = 120000\n\n    return [\"inputs\": userFilledInputs, \"callSynchronous\": userFilledInputs?.synchronous ?: false]\n} else {\n    def inputsToSubmit = [:]\n    if (binding.hasVariable('userFilledInputs')) {\n        inputsToSubmit.putAll(userFilledInputs)\n    }\n\n    if (binding.hasVariable('inputsFromDecisionEngine')) {\n        mergeMaps(inputsToSubmit,processInputs(inputsFromDecisionEngine), context)\n    }\n\n    if(binding.hasVariable('context') && context.appName == \"custom_http_endpoint\") {\n        def headers = inputsToSubmit?.headersList\n        if(headers == null || headers.isEmpty()) {\n            headers = []\n        }\n        headers.add([\"key\": \"ua-agent-id\", \"value\": agentId])\n        inputsToSubmit.put(\"headersList\", headers)\n    }\n\n    if(binding.hasVariable('context') && context.resourceName == \"custom_http_application_execute\") {\n        def resolvedPath = inputsToSubmit.path\n        def pathParamsList = inputsToSubmit.pathParamsList\n        pathParamsList.forEach { pathParam ->\n            if (pathParam.key != null && pathParam.value != null )\n            resolvedPath = resolvedPath.replace(\":\" + pathParam.key, pathParam.value)\n        }\n        inputsToSubmit.path = resolvedPath\n    }\n\n    return [\"inputs\": inputsToSubmit]\n}",
				"isAsync":false,
				"parameters":{
					"userFilledInputs":"{{ Uphqh.outputs.input }}",
					"resourceName":"{{ Uphqh.outputs.resourceName }}",
					"context":"{{ Uphqh.outputs.context }}",
					"inputsFromDecisionEngine":"{{ whabY.outputs.toolInputs }}",
					"agentId":"{{ whabY.outputs.triggeredByAgentId }}",
					"caseId":"{{ whabY.outputs.caseId }}"
				}
			},
			"skip":false,
			"subTitle":"prepare inputs",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":185,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"M9090-1",
			"id":"u07bU",
			"index":0,
			"inputs":{
				"automationId":"67d2ec336341135beaf0cb02",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"context":"{{ Uphqh.outputs.context }}",
					"input":"{{ Uphqh.outputs.input }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":175,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"M9090-1",
			"id":"r7ygy",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"dynamicFieldsPath":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Dynamic Fields Path"
						}
					},
					"additionalProperties":false,
					"required":[
						"dynamicFieldsPath"
					]
				},
				"input":{
					"type":"object",
					"properties":{
						"inputSchemaObj":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Input Schema Obj"
						}
					},
					"additionalProperties":false,
					"required":[
						"inputSchemaObj"
					]
				},
				"compile_static":false,
				"code":"def inputSchema = null;\ndef dynamicPath = []\n\nif(binding.hasVariable('inputSchemaObj')){\n    inputSchema = com.unifyapps.infra.utils.JsonUtils.toJSON(inputSchemaObj)\n}\n\ndef dynamicSchema = []\ndef toolInputSchema = inputSchema?.schema\n\nif (toolInputSchema == null || toolInputSchema.type == null){\n    toolInputSchema = [\n        \"type\":\"object\",\n        \"properties\": [:]\n    ]\n}\n\ndef toolInputSchemaMain = toolInputSchema\nif (toolInputSchema?.properties?.containsKey(\"_ua_schema_override_\")){\n    toolInputSchema = toolInputSchema.properties.get(\"_ua_schema_override_\")\n}\ndef schemaLayout = inputSchema?.layout\nprocessSchemaProperties(toolInputSchema.properties, schemaLayout, \"\", dynamicPath)\n\nreturn [\"dynamicPath\": dynamicPath]\n\ndef processSchemaProperties(properties, layout, currentPath, dynamicPath) {\n    properties.each { propName, propValue ->\n        def layoutProps = layout?.get(propName)\n\n        def fullPath = \"\"\n        if (currentPath){\n            fullPath = currentPath + \".\" + propName\n        } else {\n            fullPath = propName\n        }\n\n        if (layoutProps?.get(\"ui:field\") == \"DynamicSchemaField\") {\n            def dynamicFieldName = layoutProps?.get(\"ui:options\")?.get(\"ua:field_name\")\n            \n            def lastElement = fullPath.tokenize('.')\n            def newStr=\"\"\n            if(lastElement.size()>1){\n                lastElement[-1]=dynamicFieldName\n                newStr = lastElement.join('.')\n            } else{\n                newStr=dynamicFieldName;\n            }\n            fullPath = newStr\n            dynamicPath << fullPath\n        }\n        \n        if (propValue.type == \"object\" && propValue.properties != null) {\n            processSchemaProperties(propValue.properties, layoutProps ?: [:], fullPath, dynamicPath)\n        }\n\n        if (propValue.type == \"array\" && propValue.items != null) {\n            processSchemaProperties(propValue.items.properties, layoutProps?.items ? layoutProps?.items : [:], fullPath, dynamicPath)\n        }\n    }\n}\n\ndef getSanitizedName(String header) {\n    def sb = new StringBuilder()\n    header.toCharArray().each { char c ->\n        def k = c.toLowerCase()\n        if (c.isLetterOrDigit()) {\n            sb.append(k)\n        } else {\n            sb.append(\"_\")\n        }\n    }\n    return sb.toString()\n}",
				"parameters":{
					"inputSchemaObj":"{{ u07bU.outputs.schema }}"
				}
			},
			"skip":false,
			"subTitle":"Extracting dynamic fields.",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":435,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"M9090-1",
			"id":"RYwQe",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"modifiedInputs":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Modified Inputs"
						}
					},
					"additionalProperties":false,
					"required":[
						"modifiedInputs"
					]
				},
				"input":{
					"type":"object",
					"properties":{
						"inputs":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Inputs"
						},
						"dynamicFieldsPath":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Dynamic Fields Path"
						}
					},
					"additionalProperties":false,
					"required":[
						"inputs",
						"dynamicFieldsPath"
					]
				},
				"compile_static":false,
				"code":"def getValueByPath(map, path) {\n    def keys = path.split(\"\\\\.\")\n    def value = map\n    for (key in keys) {\n        if (!(value instanceof Map) || !value.containsKey(key)) {\n            return null\n        }\n        value = value[key]\n    }\n    return value\n}\n\ndef paths;\nif(!binding.hasVariable('dynamicFieldsPath'))\n{\n    return [\"modifiedInputs\" : inputs]\n}\n\npaths = dynamicFieldsPath\npaths.each { path ->\n    def value = getValueByPath(inputs, path)\n    if (value != null) {\n        def topKey = path.contains(\".\") ? path.split(\"\\\\.\").last() : path\n        inputs[topKey] = value\n    }\n}\n\npaths.each { path ->\n    if (path.contains(\".\")) {\n        def keys = path.split(\"\\\\.\")\n        def parentKey = keys[0]\n        def childKey = keys[-1]\n        if (inputs[parentKey] instanceof Map) {\n            inputs[parentKey].remove(childKey)\n            if (inputs[parentKey].isEmpty()) {\n                inputs.remove(parentKey)\n            }\n        }\n    }\n}\n\nreturn [\"modifiedInputs\" : inputs]",
				"parameters":{
					"inputs":"{{ BzoBD.outputs.result.inputs }}",
					"dynamicFieldsPath":{
						"source":"{{ r7ygy.outputs.result.dynamicFieldsPath }}",
						"ua:type":"mappedArray",
						"items":"{{ r7ygy.outputs.result.dynamicFieldsPath[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Modifying input for dynamic schema",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":178,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"M9090-1",
			"id":"iEoY5",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"{{ BzoBD.outputs.result.callSynchronous }}",
						"filter":{
							"operator":"EQUAL",
							"value":""
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":198,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"iEoY5@M9090-1@y",
			"id":"KqPlX",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"automationId":{
							"type":"string",
							"title":"Automation Id"
						},
						"parameters":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Parameters"
						}
					},
					"additionalProperties":false,
					"required":[
						"automationId",
						"parameters"
					]
				},
				"input":{
					"type":"object",
					"properties":{
						"context":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Context"
						},
						"inputs":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Inputs"
						}
					},
					"additionalProperties":false,
					"required":[
						"context",
						"inputs"
					]
				},
				"compile_static":false,
				"code":"return [\"automationId\": inputs.automationId, \"parameters\":inputs.parameters ]",
				"parameters":{
					"context":"{{ Uphqh.outputs.context }}",
					"inputs":"{{ Uphqh.outputs.input }}"
				}
			},
			"skip":false,
			"subTitle":"get callable inputs",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":211,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"iEoY5@M9090-1@y",
			"id":"EFOkY",
			"index":0,
			"inputs":{
				"automationId":"{{ KqPlX.outputs.result.automationId }}",
				"runtimeConnections":"",
				"synchronous":true,
				"version":"-1",
				"parameters":"{{ KqPlX.outputs.result.parameters }}"
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":183,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"iEoY5@M9090-1@y",
			"id":"7fxzy",
			"index":0,
			"inputs":{
				"result":{
					"success":"true",
					"toolOutput":"{{ EFOkY.outputs }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":342,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"M9090-1",
			"id":"JRa3S",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"appName":{
							"type":"string",
							"title":"App Name"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"context":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Context"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"return [\"appName\": context?.appName]",
				"parameters":{
					"context":"{{ Uphqh.outputs.context }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":333,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"M9090-1",
			"id":"m9T0b",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"{{ JRa3S.outputs.result.appName }}",
						"filter":{
							"operator":"EXISTS"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":352,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"m9T0b@M9090-1@y",
			"id":"fW0si",
			"index":0,
			"inputs":{
				"automationId":"681c81e891321b2f5fc0983c",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"appName":"{{ JRa3S.outputs.result.appName }}",
					"toolName":"{{ Uphqh.outputs.toolName }}",
					"caseId":"{{ whabY.outputs.caseId }}",
					"aiAgentId":"{{ whabY.outputs.triggeredByAgentId }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"custom_application",
				"resourceVersion":0,
				"resourceName":"custom_application_execute",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"MANUAL",
			"groupId":"M9090-1",
			"id":"vcLLc",
			"index":0,
			"inputs":{
				"input":"{{ RYwQe.outputs.result.modifiedInputs }}",
				"context":"{{ Uphqh.outputs.context }}"
			},
			"options":{
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false,
					"usagePolicy":"ALWAYS"
				},
				"circuitBreakerConfig":{
					"enabled":false,
					"slidingWindowType":"COUNT_BASED"
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false,
					"postHooks":[
						
					],
					"preHooks":[
						
					]
				},
				"logConfig":{
					"enabled":false,
					"logPolicies":[
						
					]
				},
				"rateLimitConfig":{
					"enabled":false,
					"unit":"MINUTES",
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"MANUAL",
				"telemetryConfig":{
					"enableTelemetry":false,
					"metricConfigs":[
						
					]
				}
			},
			"skip":false,
			"subTitle":"Custom Application",
			"title":"Execute Custom Application Request",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":738,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"vcLLc@M9090-1@error",
			"id":"8a78G",
			"index":0,
			"inputs":{
				"result":{
					"success":false,
					"toolOutput":"{{ vcLLc.outputs.result }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":48,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"M9090-1",
			"id":"eYvq0",
			"index":0,
			"inputs":{
				"result":{
					"success":"true",
					"toolOutput":"{{ vcLLc.outputs.result }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":1,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":false,
		"enableRunLogging":false,
		"enableVariableLogging":false,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":true,
	"version":87
}