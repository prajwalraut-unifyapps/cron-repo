{
	"appsUsed":[
		
	],
	"createdTime":1760281938540,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1760541118448,
		"deployedBy":46030,
		"deployedDefinitionId":"68efb9be1ff997436ed33d74",
		"status":"DEPLOYED",
		"version":14,
		"workflowVersion":19
	},
	"edges":[
		{
			"fromNodeId":"n_sVV5k",
			"priority":0,
			"skip":false,
			"toNodeId":"n_gbr3D",
			"type":"next"
		},
		{
			"fromNodeId":"n_gbr3D",
			"priority":0,
			"skip":false,
			"toNodeId":"n_qVSpG",
			"type":"next"
		},
		{
			"fromNodeId":"n_qVSpG",
			"priority":0,
			"skip":false,
			"toNodeId":"n_OSC6k",
			"type":"next"
		},
		{
			"fromNodeId":"n_OSC6k",
			"priority":0,
			"skip":false,
			"toNodeId":"n_I2Ly7",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"VIEW_RUNS",
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"68ea85debdec112aba2a7b08",
	"lastModifiedBy":46030,
	"lcName":"workflow agent | improve with ai",
	"modifiedTime":1760542497666,
	"name":"Workflow Agent | Improve with AI",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":556,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_1n3Ji-1",
			"id":"n_sVV5k",
			"index":1,
			"inputs":{
				"result":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"rephrasedUserQuery":{
							"type":"string",
							"title":"Rephrased User Query"
						}
					}
				},
				"setup":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"userQuery":{
							"type":"string",
							"title":"User Query"
						},
						"modelId":{
							"type":"string",
							"title":"Model Id"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger via automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":989,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"_1n3Ji-1",
			"id":"n_gbr3D",
			"index":2,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"prompt":{
							"type":"string",
							"title":"Prompt"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"userQuery":{
							"type":"string",
							"title":"User Query"
						}
					}
				},
				"code":"def userQuery = binding.hasVariable('userQuery') ? userQuery : \"\"\n\nreturn [\n  \"prompt\": \"\"\"You are an expert prompt rewriter specializing in clarifying and enhancing user instructions while preserving their original intent and structure.\n\nYour task is to REPHRASE and COMPLETE the provided user input—NOT to answer or respond to it. Whether the input contains instructions, queries, procedural workflows, or technical specifications, your role is to improve its clarity, readability, and professional tone while maintaining all substantive content, including meaning, logical structure, examples, technical details, and placeholders. Additionally, ensure all examples are comprehensive and demonstrate the full scope of the instruction by adding relevant scenarios or cases where examples are incomplete.\n\nIMPORTANT: You are rewriting the input itself, not providing a response or solution to it. Output the improved version of the input text. Use simple language. \n\nGuidelines:\n1. Preserve all procedural elements: Maintain every step, sub-step, sequence number, conditional branch, and logical flow exactly as presented.\n2. Keep technical content intact: Do not modify code snippets, keywords, domain-specific terminology, variable names, or placeholders (enclosed in double curly brackets).\n3. Apply professional writing standards: Use complete sentences, active voice, proper grammar, consistent formatting, and clear transitions between ideas.\n4. Enhance without altering core meaning: Improve only the clarity, flow, and readability—do not remove existing information or merge separate concepts.\n5. Convert to steps when appropriate: If the user query naturally lends itself to a step-by-step format and would benefit from structured organization, convert it into numbered steps or a procedural workflow. Do not force this conversion if the content is better suited to prose, narrative, or Q&A format.\n6. Complete partial examples thoroughly: If examples show only one scenario (e.g., hardware only), add additional relevant scenarios that logically fit the context (e.g., software, network). Ensure all examples align with the original intent and fully illustrate the instruction's scope and applicability.\n7. Provide clean output: Return only the rephrased and completed text with no meta-commentary, explanations, or additional notes.\n\nUser Query:\n${userQuery}\n\"\"\".toString()\n]",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"userQuery":"{{ n_sVV5k.outputs.userQuery }}"
				}
			},
			"skip":false,
			"subTitle":"create rephrase query prompt",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":1085,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"_1n3Ji-1",
			"id":"n_qVSpG",
			"index":3,
			"inputs":{
				"automationId":"684fceac5ae1b66e4745e406",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"modelId":"{{ n_sVV5k.outputs.modelId }}",
					"content":"{{ n_gbr3D.outputs.result.prompt }}",
					"type":"text",
					"response_format":"text",
					"signalProperties":{
						"waitingInstanceId":"{{ __RUN__.outputs.executionId }}",
						"waitingInstanceRunTimeType":"{{ __RUN__.outputs.workflowRunTimeType }}",
						"automationId":"{{ __RUN__.outputs.workflowId }}",
						"nodeId":"n_OSC6k"
					}
				}
			},
			"skip":false,
			"subTitle":"LLM call to rephrase query",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"signals_by_unifyapps",
				"resourceVersion":907,
				"resourceName":"signals_by_unifyapps_wait_for_signal",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_1n3Ji-1",
			"id":"n_OSC6k",
			"index":4,
			"inputs":{
				"duration":"5min",
				"unit":"MINUTES",
				"signal_payload":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"llmResponse":{
							"type":"string",
							"title":"Llm Response"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"waiting for LLM response",
			"title":"Wait for signal",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":1065,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_1n3Ji-1",
			"id":"n_I2Ly7",
			"index":5,
			"inputs":{
				"result":{
					"rephrasedUserQuery":"{{ n_OSC6k.outputs.signal_payload.llmResponse }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":46030,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		
	],
	"version":20
}