{
	"appsUsed":[
		
	],
	"createdTime":1760281938540,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1760538998807,
		"deployedBy":46030,
		"deployedDefinitionId":"68efb1761ff997436ed2f8c4",
		"status":"DEPLOYED",
		"version":12,
		"workflowVersion":15
	},
	"edges":[
		{
			"fromNodeId":"n_sVV5k",
			"priority":0,
			"skip":false,
			"toNodeId":"n_gbr3D",
			"type":"next"
		},
		{
			"fromNodeId":"n_gbr3D",
			"priority":0,
			"skip":false,
			"toNodeId":"n_qVSpG",
			"type":"next"
		},
		{
			"fromNodeId":"n_qVSpG",
			"priority":0,
			"skip":false,
			"toNodeId":"n_OSC6k",
			"type":"next"
		},
		{
			"fromNodeId":"n_OSC6k",
			"priority":0,
			"skip":false,
			"toNodeId":"n_I2Ly7",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"VIEW_RUNS",
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"68ea85debdec112aba2a7b08",
	"lastModifiedBy":46030,
	"lcName":"workflow agent | improve with ai",
	"modifiedTime":1760540991281,
	"name":"Workflow Agent | Improve with AI",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":556,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_1n3Ji-1",
			"id":"n_sVV5k",
			"index":1,
			"inputs":{
				"result":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"rephrasedUserQuery":{
							"type":"string",
							"title":"Rephrased User Query"
						}
					}
				},
				"setup":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"userQuery":{
							"type":"string",
							"title":"User Query"
						},
						"modelId":{
							"type":"string",
							"title":"Model Id"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger via automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":989,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"_1n3Ji-1",
			"id":"n_gbr3D",
			"index":2,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"prompt":{
							"type":"string",
							"title":"Prompt"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"userQuery":{
							"type":"string",
							"title":"User Query"
						}
					}
				},
				"code":"def userQuery = binding.hasVariable('userQuery') ? userQuery : \"\"\n\nreturn [\n  \"prompt\": \"\"\"You are an expert prompt rewriter specializing in clarifying and enhancing user instructions while preserving their original intent and structure.\n\nYour task is to rephrase the provided user input—whether it contains instructions, queries, procedural workflows, or technical specifications—to improve clarity, readability, and professional tone. You must maintain all substantive content, including meaning, logical structure, examples, technical details, and placeholders.\n\nGuidelines:\n1. Preserve all procedural elements: Maintain every step, sub-step, sequence number, conditional branch, and logical flow exactly as presented.\n2. Keep technical content intact: Do not modify code snippets, keywords, domain-specific terminology, variable names, or placeholders (enclosed in double curly brackets such as {{variable}}).\n3. Apply professional writing standards: Use complete sentences, active voice, proper grammar, consistent formatting, and clear transitions between ideas.\n4. Enhance without altering: Improve only the clarity, flow, and readability—do not add new content, remove existing information, or merge separate concepts.\n5. Complete partial examples: If examples are incomplete or lack necessary detail (such as missing scenarios, edge cases, or illustrative instances), complete them in a way that aligns with the original intent without changing the core meaning.\n6. Provide clean output: Return only the rephrased text with no meta-commentary, explanations, or additional notes.\n\nUser Query:\n${userQuery}\n\"\"\".toString()\n]",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"userQuery":"{{ n_sVV5k.outputs.userQuery }}"
				}
			},
			"skip":false,
			"subTitle":"create rephrase query prompt",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":1085,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_1n3Ji-1",
			"id":"n_qVSpG",
			"index":3,
			"inputs":{
				"automationId":"684fceac5ae1b66e4745e406",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"modelId":"{{ n_sVV5k.outputs.modelId }}",
					"content":"{{ n_gbr3D.outputs.result.prompt }}",
					"type":"text",
					"response_format":"text",
					"signalProperties":{
						"waitingInstanceId":"{{ __RUN__.outputs.executionId }}",
						"waitingInstanceRunTimeType":"{{ __RUN__.outputs.workflowRunTimeType }}",
						"automationId":"{{ __RUN__.outputs.workflowId }}",
						"nodeId":"n_OSC6k"
					}
				}
			},
			"skip":false,
			"subTitle":"LLM call to rephrase query",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"signals_by_unifyapps",
				"resourceVersion":907,
				"resourceName":"signals_by_unifyapps_wait_for_signal",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_1n3Ji-1",
			"id":"n_OSC6k",
			"index":4,
			"inputs":{
				"duration":"5min",
				"unit":"MINUTES",
				"signal_payload":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"llmResponse":{
							"type":"string",
							"title":"Llm Response"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"waiting for LLM response",
			"title":"Wait for signal",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":1065,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_1n3Ji-1",
			"id":"n_I2Ly7",
			"index":5,
			"inputs":{
				"result":{
					"rephrasedUserQuery":"{{ n_OSC6k.outputs.signal_payload.llmResponse }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":46030,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		
	],
	"version":16
}